<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Dyck.Prog</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--cubical</a> <a id="23" class="Pragma">--safe</a> <a id="30" class="Pragma">--postfix-projections</a> <a id="52" class="Symbol">#-}</a>

<a id="57" class="Comment">-- This file contains an implementation of the stack-based compiler for Hutton&#39;s</a>
<a id="138" class="Comment">-- razor, as from:</a>
<a id="157" class="Comment">--</a>
<a id="160" class="Comment">--   P. Bahr and G. Hutton, “Calculating correct compilers,” Journal of</a>
<a id="232" class="Comment">--   Functional Programming, vol. 25, no. e14, Sep. 2015,</a>
<a id="290" class="Comment">--   doi: 10.1017/S0956796815000180.</a>
<a id="327" class="Comment">--</a>
<a id="330" class="Comment">-- The compiler is total and the evaluator is stack-safe, and furthermore we have</a>
<a id="412" class="Comment">-- proven a full isomorphism between the code representation and the AST.</a>

<a id="487" class="Keyword">module</a> <a id="494" href="Data.Dyck.Prog.html" class="Module">Data.Dyck.Prog</a> <a id="509" class="Keyword">where</a>

<a id="516" class="Keyword">open</a> <a id="521" class="Keyword">import</a> <a id="528" href="Prelude.html" class="Module">Prelude</a>
<a id="536" class="Keyword">open</a> <a id="541" class="Keyword">import</a> <a id="548" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="557" class="Keyword">using</a> <a id="563" class="Symbol">(</a><a id="564" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="567" class="Symbol">)</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Data.Vec.Iterated.html" class="Module">Data.Vec.Iterated</a> <a id="599" class="Keyword">using</a> <a id="605" class="Symbol">(</a><a id="606" href="Data.Vec.Iterated.html#218" class="Function">Vec</a><a id="609" class="Symbol">;</a> <a id="611" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">_∷_</a><a id="614" class="Symbol">;</a> <a id="616" href="Data.Vec.Iterated.html#364" class="InductiveConstructor">[]</a><a id="618" class="Symbol">;</a> <a id="620" href="Data.Vec.Iterated.html#978" class="Function">foldlN</a><a id="626" class="Symbol">;</a> <a id="628" href="Data.Vec.Iterated.html#504" class="Field">head</a><a id="632" class="Symbol">)</a>

<a id="635" class="Keyword">private</a>
  <a id="645" class="Keyword">variable</a>
    <a id="658" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a> <a id="660" class="Symbol">:</a> <a id="662" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

<a id="665" class="Comment">--------------------------------------------------------------------------------</a>
<a id="746" class="Comment">-- Language for Arithmetic Expressions</a>
<a id="785" class="Comment">--------------------------------------------------------------------------------</a>

<a id="867" class="Keyword">data</a> <a id="Expr"></a><a id="872" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="877" class="Symbol">(</a><a id="878" href="Data.Dyck.Prog.html#878" class="Bound">A</a> <a id="880" class="Symbol">:</a> <a id="882" href="Level.html#192" class="Function">Type</a> <a id="887" href="Level.html#372" class="Generalizable">a</a><a id="888" class="Symbol">)</a> <a id="890" class="Symbol">:</a> <a id="892" href="Level.html#192" class="Function">Type</a> <a id="897" href="Data.Dyck.Prog.html#887" class="Bound">a</a> <a id="899" class="Keyword">where</a>
  <a id="Expr.[_]"></a><a id="907" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">[_]</a> <a id="911" class="Symbol">:</a> <a id="913" href="Data.Dyck.Prog.html#878" class="Bound">A</a> <a id="915" class="Symbol">→</a> <a id="917" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="922" href="Data.Dyck.Prog.html#878" class="Bound">A</a>
  <a id="Expr._⊕_"></a><a id="926" href="Data.Dyck.Prog.html#926" class="InductiveConstructor Operator">_⊕_</a> <a id="930" class="Symbol">:</a> <a id="932" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="937" href="Data.Dyck.Prog.html#878" class="Bound">A</a> <a id="939" class="Symbol">→</a> <a id="941" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="946" href="Data.Dyck.Prog.html#878" class="Bound">A</a> <a id="948" class="Symbol">→</a> <a id="950" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="955" href="Data.Dyck.Prog.html#878" class="Bound">A</a>

<a id="958" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1039" class="Comment">-- Code for the virtual stack machine.</a>
<a id="1078" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1160" class="Keyword">data</a> <a id="Code"></a><a id="1165" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1170" class="Symbol">(</a><a id="1171" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1173" class="Symbol">:</a> <a id="1175" href="Level.html#192" class="Function">Type</a> <a id="1180" href="Level.html#372" class="Generalizable">a</a><a id="1181" class="Symbol">)</a> <a id="1183" class="Symbol">:</a> <a id="1185" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1187" class="Symbol">→</a> <a id="1189" href="Level.html#192" class="Function">Type</a> <a id="1194" href="Data.Dyck.Prog.html#1180" class="Bound">a</a> <a id="1196" class="Keyword">where</a>
  <a id="Code.HALT"></a><a id="1204" href="Data.Dyck.Prog.html#1204" class="InductiveConstructor">HALT</a> <a id="1209" class="Symbol">:</a> <a id="1211" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1216" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1218" class="Number">1</a>
  <a id="Code.PUSH"></a><a id="1222" href="Data.Dyck.Prog.html#1222" class="InductiveConstructor">PUSH</a> <a id="1227" class="Symbol">:</a> <a id="1229" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1231" class="Symbol">→</a> <a id="1233" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1238" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1240" class="Symbol">(</a><a id="1241" class="Number">1</a> <a id="1243" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1245" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="1246" class="Symbol">)</a> <a id="1248" class="Symbol">→</a> <a id="1250" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1255" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1257" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a>
  <a id="Code.ADD"></a><a id="1261" href="Data.Dyck.Prog.html#1261" class="InductiveConstructor">ADD</a>  <a id="1266" class="Symbol">:</a> <a id="1268" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1273" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1275" class="Symbol">(</a><a id="1276" class="Number">1</a> <a id="1278" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1280" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="1281" class="Symbol">)</a> <a id="1283" class="Symbol">→</a> <a id="1285" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1290" href="Data.Dyck.Prog.html#1171" class="Bound">A</a> <a id="1292" class="Symbol">(</a><a id="1293" class="Number">2</a> <a id="1295" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="1297" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="1298" class="Symbol">)</a>

<a id="1301" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1382" class="Comment">-- Conversion from a Code to a Expr (evaluation / execution)</a>
<a id="1443" class="Comment">--------------------------------------------------------------------------------</a>

<a id="code→expr⊙"></a><a id="1525" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1536" class="Symbol">:</a> <a id="1538" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1543" href="Level.html#388" class="Generalizable">A</a> <a id="1545" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a> <a id="1547" class="Symbol">→</a> <a id="1549" href="Data.Vec.Iterated.html#218" class="Function">Vec</a> <a id="1553" class="Symbol">(</a><a id="1554" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="1559" href="Level.html#388" class="Generalizable">A</a><a id="1560" class="Symbol">)</a> <a id="1562" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a> <a id="1564" class="Symbol">→</a> <a id="1566" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="1571" href="Level.html#388" class="Generalizable">A</a>
<a id="1573" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1584" href="Data.Dyck.Prog.html#1204" class="InductiveConstructor">HALT</a>        <a id="1596" class="Symbol">(</a><a id="1597" href="Data.Dyck.Prog.html#1597" class="Bound">v</a> <a id="1599" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="1601" href="Data.Vec.Iterated.html#364" class="InductiveConstructor">[]</a><a id="1603" class="Symbol">)</a>       <a id="1611" class="Symbol">=</a> <a id="1613" href="Data.Dyck.Prog.html#1597" class="Bound">v</a>
<a id="1615" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1626" class="Symbol">(</a><a id="1627" href="Data.Dyck.Prog.html#1222" class="InductiveConstructor">PUSH</a> <a id="1632" href="Data.Dyck.Prog.html#1632" class="Bound">v</a> <a id="1634" href="Data.Dyck.Prog.html#1634" class="Bound">is</a><a id="1636" class="Symbol">)</a> <a id="1638" href="Data.Dyck.Prog.html#1638" class="Bound">st</a>             <a id="1653" class="Symbol">=</a> <a id="1655" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1666" href="Data.Dyck.Prog.html#1634" class="Bound">is</a> <a id="1669" class="Symbol">(</a><a id="1670" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">[</a> <a id="1672" href="Data.Dyck.Prog.html#1632" class="Bound">v</a> <a id="1674" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">]</a> <a id="1676" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="1678" href="Data.Dyck.Prog.html#1638" class="Bound">st</a><a id="1680" class="Symbol">)</a>
<a id="1682" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1693" class="Symbol">(</a><a id="1694" href="Data.Dyck.Prog.html#1261" class="InductiveConstructor">ADD</a>    <a id="1701" href="Data.Dyck.Prog.html#1701" class="Bound">is</a><a id="1703" class="Symbol">)</a> <a id="1705" class="Symbol">(</a><a id="1706" href="Data.Dyck.Prog.html#1706" class="Bound">t₁</a> <a id="1709" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="1711" href="Data.Dyck.Prog.html#1711" class="Bound">t₂</a> <a id="1714" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="1716" href="Data.Dyck.Prog.html#1716" class="Bound">st</a><a id="1718" class="Symbol">)</a> <a id="1720" class="Symbol">=</a> <a id="1722" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1733" href="Data.Dyck.Prog.html#1701" class="Bound">is</a> <a id="1736" class="Symbol">(</a><a id="1737" href="Data.Dyck.Prog.html#1711" class="Bound">t₂</a> <a id="1740" href="Data.Dyck.Prog.html#926" class="InductiveConstructor Operator">⊕</a> <a id="1742" href="Data.Dyck.Prog.html#1706" class="Bound">t₁</a> <a id="1745" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="1747" href="Data.Dyck.Prog.html#1716" class="Bound">st</a><a id="1749" class="Symbol">)</a>

<a id="code→expr"></a><a id="1752" href="Data.Dyck.Prog.html#1752" class="Function">code→expr</a> <a id="1762" class="Symbol">:</a> <a id="1764" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="1769" href="Level.html#388" class="Generalizable">A</a> <a id="1771" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="1776" class="Symbol">→</a> <a id="1778" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="1783" href="Level.html#388" class="Generalizable">A</a>
<a id="1785" href="Data.Dyck.Prog.html#1752" class="Function">code→expr</a> <a id="1795" href="Data.Dyck.Prog.html#1795" class="Bound">ds</a> <a id="1798" class="Symbol">=</a> <a id="1800" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="1811" href="Data.Dyck.Prog.html#1795" class="Bound">ds</a> <a id="1814" href="Data.Vec.Iterated.html#364" class="InductiveConstructor">[]</a>

<a id="1818" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1899" class="Comment">-- Conversion from a Expr to a Code (compilation)</a>
<a id="1949" class="Comment">--------------------------------------------------------------------------------</a>

<a id="expr→code⊙"></a><a id="2031" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2042" class="Symbol">:</a> <a id="2044" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2049" href="Level.html#388" class="Generalizable">A</a> <a id="2051" class="Symbol">→</a> <a id="2053" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2058" href="Level.html#388" class="Generalizable">A</a> <a id="2060" class="Symbol">(</a><a id="2061" class="Number">1</a> <a id="2063" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2065" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="2066" class="Symbol">)</a> <a id="2068" class="Symbol">→</a> <a id="2070" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2075" href="Level.html#388" class="Generalizable">A</a> <a id="2077" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a>
<a id="2079" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2090" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">[</a> <a id="2092" href="Data.Dyck.Prog.html#2092" class="Bound">x</a> <a id="2094" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">]</a>     <a id="2100" class="Symbol">=</a> <a id="2102" href="Data.Dyck.Prog.html#1222" class="InductiveConstructor">PUSH</a> <a id="2107" href="Data.Dyck.Prog.html#2092" class="Bound">x</a>
<a id="2109" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2120" class="Symbol">(</a><a id="2121" href="Data.Dyck.Prog.html#2121" class="Bound">xs</a> <a id="2124" href="Data.Dyck.Prog.html#926" class="InductiveConstructor Operator">⊕</a> <a id="2126" href="Data.Dyck.Prog.html#2126" class="Bound">ys</a><a id="2128" class="Symbol">)</a> <a id="2130" class="Symbol">=</a> <a id="2132" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2143" href="Data.Dyck.Prog.html#2121" class="Bound">xs</a> <a id="2146" href="Function.html#97" class="Function Operator">∘</a> <a id="2148" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2159" href="Data.Dyck.Prog.html#2126" class="Bound">ys</a> <a id="2162" href="Function.html#97" class="Function Operator">∘</a> <a id="2164" href="Data.Dyck.Prog.html#1261" class="InductiveConstructor">ADD</a>

<a id="expr→code"></a><a id="2169" href="Data.Dyck.Prog.html#2169" class="Function">expr→code</a> <a id="2179" class="Symbol">:</a> <a id="2181" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2186" href="Level.html#388" class="Generalizable">A</a> <a id="2188" class="Symbol">→</a> <a id="2190" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2195" href="Level.html#388" class="Generalizable">A</a> <a id="2197" class="Number">0</a>
<a id="2199" href="Data.Dyck.Prog.html#2169" class="Function">expr→code</a> <a id="2209" href="Data.Dyck.Prog.html#2209" class="Bound">tr</a> <a id="2212" class="Symbol">=</a> <a id="2214" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2225" href="Data.Dyck.Prog.html#2209" class="Bound">tr</a> <a id="2228" href="Data.Dyck.Prog.html#1204" class="InductiveConstructor">HALT</a>

<a id="2234" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2315" class="Comment">-- Proof of isomorphism</a>
<a id="2339" class="Comment">--------------------------------------------------------------------------------</a>

<a id="expr→code→expr⊙"></a><a id="2421" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a> <a id="2437" class="Symbol">:</a> <a id="2439" class="Symbol">{</a><a id="2440" href="Data.Dyck.Prog.html#2440" class="Bound">is</a> <a id="2443" class="Symbol">:</a> <a id="2445" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2450" href="Level.html#388" class="Generalizable">A</a> <a id="2452" class="Symbol">(</a><a id="2453" class="Number">1</a> <a id="2455" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2457" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="2458" class="Symbol">)}</a> <a id="2461" class="Symbol">{</a><a id="2462" href="Data.Dyck.Prog.html#2462" class="Bound">st</a> <a id="2465" class="Symbol">:</a> <a id="2467" href="Data.Vec.Iterated.html#218" class="Function">Vec</a> <a id="2471" class="Symbol">(</a><a id="2472" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2477" href="Level.html#388" class="Generalizable">A</a><a id="2478" class="Symbol">)</a> <a id="2480" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="2481" class="Symbol">}</a> <a id="2483" class="Symbol">(</a><a id="2484" href="Data.Dyck.Prog.html#2484" class="Bound">e</a> <a id="2486" class="Symbol">:</a> <a id="2488" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2493" href="Level.html#388" class="Generalizable">A</a><a id="2494" class="Symbol">)</a> <a id="2496" class="Symbol">→</a>
  <a id="2500" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="2511" class="Symbol">(</a><a id="2512" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2523" href="Data.Dyck.Prog.html#2484" class="Bound">e</a> <a id="2525" href="Data.Dyck.Prog.html#2440" class="Bound">is</a><a id="2527" class="Symbol">)</a> <a id="2529" href="Data.Dyck.Prog.html#2462" class="Bound">st</a> <a id="2532" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="2534" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="2545" href="Data.Dyck.Prog.html#2440" class="Bound">is</a> <a id="2548" class="Symbol">(</a><a id="2549" href="Data.Dyck.Prog.html#2484" class="Bound">e</a> <a id="2551" href="Data.Vec.Iterated.html#484" class="InductiveConstructor Operator">∷</a> <a id="2553" href="Data.Dyck.Prog.html#2462" class="Bound">st</a><a id="2555" class="Symbol">)</a>
<a id="2557" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a> <a id="2573" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">[</a> <a id="2575" href="Data.Dyck.Prog.html#2575" class="Bound">x</a> <a id="2577" href="Data.Dyck.Prog.html#907" class="InductiveConstructor Operator">]</a>     <a id="2583" class="Symbol">=</a> <a id="2585" href="Cubical.Foundations.Id.html#570" class="Function">refl</a>
<a id="2590" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a> <a id="2606" class="Symbol">(</a><a id="2607" href="Data.Dyck.Prog.html#2607" class="Bound">xs</a> <a id="2610" href="Data.Dyck.Prog.html#926" class="InductiveConstructor Operator">⊕</a> <a id="2612" href="Data.Dyck.Prog.html#2612" class="Bound">ys</a><a id="2614" class="Symbol">)</a> <a id="2616" class="Symbol">=</a> <a id="2618" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a> <a id="2634" href="Data.Dyck.Prog.html#2607" class="Bound">xs</a> <a id="2637" href="Cubical.Foundations.Id.html#747" class="Function Operator">;</a> <a id="2639" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a> <a id="2655" href="Data.Dyck.Prog.html#2612" class="Bound">ys</a>

<a id="code→expr→code⊙"></a><a id="2659" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a> <a id="2675" class="Symbol">:</a> <a id="2677" class="Symbol">{</a><a id="2678" href="Data.Dyck.Prog.html#2678" class="Bound">st</a> <a id="2681" class="Symbol">:</a> <a id="2683" href="Data.Vec.Iterated.html#218" class="Function">Vec</a> <a id="2687" class="Symbol">(</a><a id="2688" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2693" href="Level.html#388" class="Generalizable">A</a><a id="2694" class="Symbol">)</a> <a id="2696" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="2697" class="Symbol">}</a> <a id="2699" class="Symbol">(</a><a id="2700" href="Data.Dyck.Prog.html#2700" class="Bound">is</a> <a id="2703" class="Symbol">:</a> <a id="2705" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2710" href="Level.html#388" class="Generalizable">A</a> <a id="2712" href="Data.Dyck.Prog.html#658" class="Generalizable">n</a><a id="2713" class="Symbol">)</a> <a id="2715" class="Symbol">→</a>
 <a id="2718" href="Data.Dyck.Prog.html#2169" class="Function">expr→code</a> <a id="2728" class="Symbol">(</a><a id="2729" href="Data.Dyck.Prog.html#1525" class="Function">code→expr⊙</a> <a id="2740" href="Data.Dyck.Prog.html#2700" class="Bound">is</a> <a id="2743" href="Data.Dyck.Prog.html#2678" class="Bound">st</a><a id="2745" class="Symbol">)</a> <a id="2747" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="2749" href="Data.Vec.Iterated.html#978" class="Function">foldlN</a> <a id="2756" class="Symbol">(</a><a id="2757" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2762" href="Level.html#388" class="Generalizable">A</a><a id="2763" class="Symbol">)</a> <a id="2765" href="Data.Dyck.Prog.html#2031" class="Function">expr→code⊙</a> <a id="2776" href="Data.Dyck.Prog.html#2700" class="Bound">is</a> <a id="2779" href="Data.Dyck.Prog.html#2678" class="Bound">st</a>
<a id="2782" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a>  <a id="2799" href="Data.Dyck.Prog.html#1204" class="InductiveConstructor">HALT</a>       <a id="2810" class="Symbol">=</a> <a id="2812" href="Cubical.Foundations.Id.html#570" class="Function">refl</a>
<a id="2817" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a> <a id="2833" class="Symbol">(</a><a id="2834" href="Data.Dyck.Prog.html#1222" class="InductiveConstructor">PUSH</a> <a id="2839" href="Data.Dyck.Prog.html#2839" class="Bound">i</a> <a id="2841" href="Data.Dyck.Prog.html#2841" class="Bound">is</a><a id="2843" class="Symbol">)</a> <a id="2845" class="Symbol">=</a> <a id="2847" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a> <a id="2863" href="Data.Dyck.Prog.html#2841" class="Bound">is</a>
<a id="2866" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a> <a id="2882" class="Symbol">(</a><a id="2883" href="Data.Dyck.Prog.html#1261" class="InductiveConstructor">ADD</a>    <a id="2890" href="Data.Dyck.Prog.html#2890" class="Bound">is</a><a id="2892" class="Symbol">)</a> <a id="2894" class="Symbol">=</a> <a id="2896" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a> <a id="2912" href="Data.Dyck.Prog.html#2890" class="Bound">is</a>

<a id="prog-iso"></a><a id="2916" href="Data.Dyck.Prog.html#2916" class="Function">prog-iso</a> <a id="2925" class="Symbol">:</a> <a id="2927" href="Data.Dyck.Prog.html#1165" class="Datatype">Code</a> <a id="2932" href="Level.html#388" class="Generalizable">A</a> <a id="2934" class="Number">0</a> <a id="2936" href="Function.Isomorphism.html#338" class="Function Operator">⇔</a> <a id="2938" href="Data.Dyck.Prog.html#872" class="Datatype">Expr</a> <a id="2943" href="Level.html#388" class="Generalizable">A</a>
<a id="2945" href="Data.Dyck.Prog.html#2916" class="Function">prog-iso</a> <a id="2954" class="Symbol">.</a><a id="2955" href="Cubical.Foundations.Isomorphism.html#810" class="Field">fun</a> <a id="2959" class="Symbol">=</a> <a id="2961" href="Data.Dyck.Prog.html#1752" class="Function">code→expr</a>
<a id="2971" href="Data.Dyck.Prog.html#2916" class="Function">prog-iso</a> <a id="2980" class="Symbol">.</a><a id="2981" href="Cubical.Foundations.Isomorphism.html#826" class="Field">inv</a> <a id="2985" class="Symbol">=</a> <a id="2987" href="Data.Dyck.Prog.html#2169" class="Function">expr→code</a>
<a id="2997" href="Data.Dyck.Prog.html#2916" class="Function">prog-iso</a> <a id="3006" class="Symbol">.</a><a id="3007" href="Cubical.Foundations.Isomorphism.html#842" class="Field">rightInv</a> <a id="3016" class="Symbol">=</a> <a id="3018" href="Data.Dyck.Prog.html#2421" class="Function">expr→code→expr⊙</a>
<a id="3034" href="Data.Dyck.Prog.html#2916" class="Function">prog-iso</a> <a id="3043" class="Symbol">.</a><a id="3044" href="Cubical.Foundations.Isomorphism.html#873" class="Field">leftInv</a>  <a id="3053" class="Symbol">=</a> <a id="3055" href="Data.Dyck.Prog.html#2659" class="Function">code→expr→code⊙</a>
</pre></body></html>