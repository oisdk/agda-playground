<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.RecursionSchemes</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--without-K</a> <a id="25" class="Symbol">#-}</a>

<a id="30" class="Keyword">module</a> <a id="37" href="Data.RecursionSchemes.html" class="Module">Data.RecursionSchemes</a> <a id="59" class="Keyword">where</a>

<a id="66" class="Keyword">open</a> <a id="71" class="Keyword">import</a> <a id="78" href="Function.html" class="Module">Function</a>
<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="108" class="Keyword">open</a> <a id="113" class="Keyword">import</a> <a id="120" href="Data.Sigma.Base.html" class="Module">Data.Sigma.Base</a>
<a id="136" class="Keyword">open</a> <a id="141" class="Keyword">import</a> <a id="148" href="Level.html" class="Module">Level</a>
<a id="154" class="Keyword">open</a> <a id="159" class="Keyword">import</a> <a id="166" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="176" class="Keyword">open</a> <a id="181" class="Keyword">import</a> <a id="188" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="203" class="Keyword">using</a> <a id="209" class="Symbol">(</a><a id="210" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="214" class="Symbol">;</a> <a id="216" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="219" class="Symbol">;</a> <a id="221" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="223" class="Symbol">;</a> <a id="225" href="Data.List.Base.html#191" class="Function">foldr</a><a id="230" class="Symbol">)</a>

<a id="233" class="Keyword">data</a> <a id="Functor"></a><a id="238" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a> <a id="246" class="Symbol">:</a> <a id="248" href="Level.html#242" class="Function">Type₀</a> <a id="254" class="Keyword">where</a>
  <a id="Functor.U"></a><a id="262" href="Data.RecursionSchemes.html#262" class="InductiveConstructor">U</a> <a id="Functor.I"></a><a id="264" href="Data.RecursionSchemes.html#264" class="InductiveConstructor">I</a> <a id="Functor.P"></a><a id="266" href="Data.RecursionSchemes.html#266" class="InductiveConstructor">P</a> <a id="268" class="Symbol">:</a> <a id="270" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a>
  <a id="Functor._⊕_"></a><a id="280" href="Data.RecursionSchemes.html#280" class="InductiveConstructor Operator">_⊕_</a> <a id="Functor._⊗_"></a><a id="284" href="Data.RecursionSchemes.html#284" class="InductiveConstructor Operator">_⊗_</a> <a id="288" class="Symbol">:</a> <a id="290" class="Symbol">(</a><a id="291" href="Data.RecursionSchemes.html#291" class="Bound">F</a> <a id="293" href="Data.RecursionSchemes.html#293" class="Bound">G</a> <a id="295" class="Symbol">:</a> <a id="297" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a><a id="304" class="Symbol">)</a> <a id="306" class="Symbol">→</a> <a id="308" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a>
  <a id="Functor._⊚_"></a><a id="318" href="Data.RecursionSchemes.html#318" class="InductiveConstructor Operator">_⊚_</a> <a id="322" class="Symbol">:</a> <a id="324" class="Symbol">(</a><a id="325" href="Data.RecursionSchemes.html#325" class="Bound">F</a> <a id="327" href="Data.RecursionSchemes.html#327" class="Bound">G</a> <a id="329" class="Symbol">:</a> <a id="331" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a><a id="338" class="Symbol">)</a> <a id="340" class="Symbol">→</a> <a id="342" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a>

<a id="351" class="Keyword">variable</a>
  <a id="362" href="Data.RecursionSchemes.html#362" class="Generalizable">F</a> <a id="364" href="Data.RecursionSchemes.html#364" class="Generalizable">G</a> <a id="366" class="Symbol">:</a> <a id="368" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a>
  <a id="378" href="Data.RecursionSchemes.html#378" class="Generalizable">Fs</a> <a id="381" class="Symbol">:</a> <a id="383" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="388" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a>
  <a id="398" href="Data.RecursionSchemes.html#398" class="Generalizable">R</a> <a id="400" href="Data.RecursionSchemes.html#400" class="Generalizable">S</a> <a id="402" class="Symbol">:</a> <a id="404" href="Level.html#242" class="Function">Type₀</a>

<a id="411" class="Keyword">record</a> <a id="Param"></a><a id="418" href="Data.RecursionSchemes.html#418" class="Record">Param</a> <a id="424" class="Symbol">(</a><a id="425" href="Data.RecursionSchemes.html#425" class="Bound">A</a> <a id="427" class="Symbol">:</a> <a id="429" href="Level.html#242" class="Function">Type₀</a><a id="434" class="Symbol">)</a> <a id="436" class="Symbol">:</a> <a id="438" href="Level.html#242" class="Function">Type₀</a> <a id="444" class="Keyword">where</a>
  <a id="452" class="Keyword">constructor</a> <a id="param"></a><a id="464" href="Data.RecursionSchemes.html#464" class="InductiveConstructor">param</a>
  <a id="472" class="Keyword">field</a> <a id="Param.getParam"></a><a id="478" href="Data.RecursionSchemes.html#478" class="Field">getParam</a> <a id="487" class="Symbol">:</a> <a id="489" href="Data.RecursionSchemes.html#425" class="Bound">A</a>
<a id="491" class="Keyword">open</a> <a id="496" href="Data.RecursionSchemes.html#418" class="Module">Param</a>

<a id="503" class="Keyword">record</a> <a id="Recur"></a><a id="510" href="Data.RecursionSchemes.html#510" class="Record">Recur</a> <a id="516" class="Symbol">(</a><a id="517" href="Data.RecursionSchemes.html#517" class="Bound">A</a> <a id="519" class="Symbol">:</a> <a id="521" href="Level.html#242" class="Function">Type₀</a><a id="526" class="Symbol">)</a> <a id="528" class="Symbol">:</a> <a id="530" href="Level.html#242" class="Function">Type₀</a> <a id="536" class="Keyword">where</a>
  <a id="544" class="Keyword">constructor</a> <a id="recur"></a><a id="556" href="Data.RecursionSchemes.html#556" class="InductiveConstructor">recur</a>
  <a id="564" class="Keyword">field</a> <a id="Recur.getRecur"></a><a id="570" href="Data.RecursionSchemes.html#570" class="Field">getRecur</a> <a id="579" class="Symbol">:</a> <a id="581" href="Data.RecursionSchemes.html#517" class="Bound">A</a>
<a id="583" class="Keyword">open</a> <a id="588" href="Data.RecursionSchemes.html#510" class="Module">Recur</a>

<a id="595" class="Keyword">mutual</a>
  <a id="⟦_⟧"></a><a id="604" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦_⟧</a> <a id="608" class="Symbol">:</a> <a id="610" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a> <a id="618" class="Symbol">→</a> <a id="620" href="Level.html#242" class="Function">Type₀</a> <a id="626" class="Symbol">→</a> <a id="628" href="Level.html#242" class="Function">Type₀</a> <a id="634" class="Symbol">→</a> <a id="636" href="Level.html#242" class="Function">Type₀</a>
  <a id="644" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="646" href="Data.RecursionSchemes.html#262" class="InductiveConstructor">U</a>     <a id="652" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="654" href="Data.RecursionSchemes.html#654" class="Bound">A</a> <a id="656" href="Data.RecursionSchemes.html#656" class="Bound">R</a> <a id="658" class="Symbol">=</a> <a id="660" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>
  <a id="664" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="666" href="Data.RecursionSchemes.html#264" class="InductiveConstructor">I</a>     <a id="672" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="674" href="Data.RecursionSchemes.html#674" class="Bound">A</a> <a id="676" href="Data.RecursionSchemes.html#676" class="Bound">R</a> <a id="678" class="Symbol">=</a> <a id="680" href="Data.RecursionSchemes.html#510" class="Record">Recur</a> <a id="686" href="Data.RecursionSchemes.html#676" class="Bound">R</a>
  <a id="690" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="692" href="Data.RecursionSchemes.html#266" class="InductiveConstructor">P</a>     <a id="698" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="700" href="Data.RecursionSchemes.html#700" class="Bound">A</a> <a id="702" href="Data.RecursionSchemes.html#702" class="Bound">R</a> <a id="704" class="Symbol">=</a> <a id="706" href="Data.RecursionSchemes.html#418" class="Record">Param</a> <a id="712" href="Data.RecursionSchemes.html#700" class="Bound">A</a>
  <a id="716" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="718" href="Data.RecursionSchemes.html#718" class="Bound">F</a> <a id="720" href="Data.RecursionSchemes.html#280" class="InductiveConstructor Operator">⊕</a> <a id="722" href="Data.RecursionSchemes.html#722" class="Bound">G</a> <a id="724" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="726" href="Data.RecursionSchemes.html#726" class="Bound">A</a> <a id="728" href="Data.RecursionSchemes.html#728" class="Bound">R</a> <a id="730" class="Symbol">=</a> <a id="732" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="734" href="Data.RecursionSchemes.html#718" class="Bound">F</a> <a id="736" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="738" href="Data.RecursionSchemes.html#726" class="Bound">A</a> <a id="740" href="Data.RecursionSchemes.html#728" class="Bound">R</a> <a id="742" href="Data.Sum.html#172" class="Datatype Operator">⊎</a> <a id="744" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="746" href="Data.RecursionSchemes.html#722" class="Bound">G</a> <a id="748" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="750" href="Data.RecursionSchemes.html#726" class="Bound">A</a> <a id="752" href="Data.RecursionSchemes.html#728" class="Bound">R</a>
  <a id="756" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="758" href="Data.RecursionSchemes.html#758" class="Bound">F</a> <a id="760" href="Data.RecursionSchemes.html#284" class="InductiveConstructor Operator">⊗</a> <a id="762" href="Data.RecursionSchemes.html#762" class="Bound">G</a> <a id="764" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="766" href="Data.RecursionSchemes.html#766" class="Bound">A</a> <a id="768" href="Data.RecursionSchemes.html#768" class="Bound">R</a> <a id="770" class="Symbol">=</a> <a id="772" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="774" href="Data.RecursionSchemes.html#758" class="Bound">F</a> <a id="776" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="778" href="Data.RecursionSchemes.html#766" class="Bound">A</a> <a id="780" href="Data.RecursionSchemes.html#768" class="Bound">R</a> <a id="782" href="Data.Sigma.Base.html#519" class="Function Operator">×</a> <a id="784" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="786" href="Data.RecursionSchemes.html#762" class="Bound">G</a> <a id="788" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="790" href="Data.RecursionSchemes.html#766" class="Bound">A</a> <a id="792" href="Data.RecursionSchemes.html#768" class="Bound">R</a>
  <a id="796" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="798" href="Data.RecursionSchemes.html#798" class="Bound">F</a> <a id="800" href="Data.RecursionSchemes.html#318" class="InductiveConstructor Operator">⊚</a> <a id="802" href="Data.RecursionSchemes.html#802" class="Bound">G</a> <a id="804" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="806" href="Data.RecursionSchemes.html#806" class="Bound">A</a> <a id="808" href="Data.RecursionSchemes.html#808" class="Bound">R</a> <a id="810" class="Symbol">=</a> <a id="812" href="Data.RecursionSchemes.html#836" class="Datatype">μ</a> <a id="814" href="Data.RecursionSchemes.html#798" class="Bound">F</a> <a id="816" class="Symbol">(</a><a id="817" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="819" href="Data.RecursionSchemes.html#802" class="Bound">G</a> <a id="821" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="823" href="Data.RecursionSchemes.html#806" class="Bound">A</a> <a id="825" href="Data.RecursionSchemes.html#808" class="Bound">R</a><a id="826" class="Symbol">)</a>

  <a id="831" class="Keyword">data</a> <a id="μ"></a><a id="836" href="Data.RecursionSchemes.html#836" class="Datatype">μ</a> <a id="838" class="Symbol">(</a><a id="839" href="Data.RecursionSchemes.html#839" class="Bound">F</a> <a id="841" class="Symbol">:</a> <a id="843" href="Data.RecursionSchemes.html#238" class="Datatype">Functor</a><a id="850" class="Symbol">)</a> <a id="852" class="Symbol">(</a><a id="853" href="Data.RecursionSchemes.html#853" class="Bound">A</a> <a id="855" class="Symbol">:</a> <a id="857" href="Level.html#242" class="Function">Type₀</a><a id="862" class="Symbol">)</a> <a id="864" class="Symbol">:</a> <a id="866" href="Level.html#242" class="Function">Type₀</a>  <a id="873" class="Keyword">where</a>
    <a id="μ.⟨_⟩"></a><a id="883" href="Data.RecursionSchemes.html#883" class="InductiveConstructor Operator">⟨_⟩</a> <a id="887" class="Symbol">:</a> <a id="889" href="Data.RecursionSchemes.html#604" class="Function Operator">⟦</a> <a id="891" href="Data.RecursionSchemes.html#839" class="Bound">F</a> <a id="893" href="Data.RecursionSchemes.html#604" class="Function Operator">⟧</a> <a id="895" href="Data.RecursionSchemes.html#853" class="Bound">A</a> <a id="897" class="Symbol">(</a><a id="898" href="Data.RecursionSchemes.html#836" class="Datatype">μ</a> <a id="900" href="Data.RecursionSchemes.html#839" class="Bound">F</a> <a id="902" href="Data.RecursionSchemes.html#853" class="Bound">A</a><a id="903" class="Symbol">)</a> <a id="905" class="Symbol">→</a> <a id="907" href="Data.RecursionSchemes.html#836" class="Datatype">μ</a> <a id="909" href="Data.RecursionSchemes.html#839" class="Bound">F</a> <a id="911" href="Data.RecursionSchemes.html#853" class="Bound">A</a>

<a id="914" class="Keyword">record</a> <a id="Wrap"></a><a id="921" href="Data.RecursionSchemes.html#921" class="Record">Wrap</a> <a id="926" class="Symbol">(</a><a id="927" href="Data.RecursionSchemes.html#927" class="Bound">A</a> <a id="929" class="Symbol">:</a> <a id="931" href="Level.html#242" class="Function">Type₀</a><a id="936" class="Symbol">)</a> <a id="938" class="Symbol">:</a> <a id="940" href="Level.html#242" class="Function">Type₀</a>  <a id="947" class="Keyword">where</a>
  <a id="955" class="Keyword">constructor</a> <a id="wrap"></a><a id="967" href="Data.RecursionSchemes.html#967" class="InductiveConstructor">wrap</a>
  <a id="974" class="Keyword">field</a> <a id="Wrap.unwrap"></a><a id="980" href="Data.RecursionSchemes.html#980" class="Field">unwrap</a> <a id="987" class="Symbol">:</a> <a id="989" href="Data.RecursionSchemes.html#927" class="Bound">A</a>
<a id="991" class="Keyword">open</a> <a id="996" href="Data.RecursionSchemes.html#921" class="Module">Wrap</a>

<a id="1002" class="Comment">-- alg : Functor → Type₀ → Type₀</a>
<a id="1035" class="Comment">-- alg G x = μ G x</a>


<a id="1056" class="Comment">-- comps : Functor → List Functor → Type₀ → Type₀</a>
<a id="1106" class="Comment">-- comps F xs A = foldr alg ( A) xs</a>

<a id="1143" class="Comment">-- go : ∀ G Fs → (A → B) → Wrap (⟦ G ⟧ (comps F Fs A) (comps F Fs (μ F A))) → ⟦ G ⟧ (comps F Fs B) (comps F Fs (μ F B))</a>
<a id="1263" class="Comment">-- go U         Fs f xs = tt</a>
<a id="1292" class="Comment">-- go (G₁ ⊕ G₂) Fs f (wrap (inl x)) = inl (go G₁ Fs f (wrap x))</a>
<a id="1356" class="Comment">-- go (G₁ ⊕ G₂) Fs f (wrap (inr x)) = inr (go G₂ Fs f (wrap x))</a>

<a id="1421" class="Comment">-- go (G₁ ⊗ G₂) Fs f (wrap (x , y)) = go G₁ Fs f (wrap x) , go G₂ Fs f (wrap y)</a>

<a id="1502" class="Comment">-- go P         Fs f        (wrap (param xs))            = {!!} -- param (f xs)</a>
<a id="1582" class="Comment">-- -- go P         (F₂ ∷ Fs) f (wrap (param ⟨ xs ⟩)) =  param  ⟨ go F₂ Fs f (wrap xs) ⟩</a>

<a id="1671" class="Comment">-- go I         Fs       f (wrap (recur xs)) = {!!} -- recur ⟨ go _ [] f (wrap xs) ⟩</a>
<a id="1756" class="Comment">-- -- go I         (F ∷ Fs) f (wrap (recur ⟨ xs ⟩)) = recur ⟨ go _ (F ∷ Fs) f (wrap xs) ⟩</a>

<a id="1847" class="Comment">-- go (G₁ ⊚ G₂) Fs f (wrap ⟨ xs ⟩) =  ⟨ go G₁ {!Fs!} {!f!} (wrap xs) ⟩</a>

<a id="1919" class="Comment">-- -- cata : (⟦ F ⟧ A R → R) → μ F A → R</a>
<a id="1960" class="Comment">-- -- cata alg ⟨ x ⟩ = alg (go _ _ id alg (wrap x))</a>
<a id="2012" class="Comment">-- --   where</a>
<a id="2026" class="Comment">-- --   go : ∀ F G → (A → B) → (⟦ F ⟧ A R → R) → Wrap (⟦ G ⟧ A (μ F A)) → ⟦ G ⟧ B R</a>
<a id="2110" class="Comment">-- --   go F U         g _ xs = tt</a>
<a id="2145" class="Comment">-- --   go F I         g f (wrap (recur xs)) = recur (cata f xs)</a>
<a id="2210" class="Comment">-- --   go F P         g f (wrap (param xs)) = param (g xs)</a>
<a id="2270" class="Comment">-- --   go F (G₁ ⊕ G₂) g f (wrap (inl x)) = inl (go F G₁ g f (wrap x))</a>
<a id="2341" class="Comment">-- --   go F (G₁ ⊕ G₂) g f (wrap (inr x)) = inr (go F G₂ g f (wrap x))</a>
<a id="2412" class="Comment">-- --   go F (G₁ ⊗ G₂) g f (wrap (x , y)) = go F G₁ g f (wrap x) , go F G₂ g f (wrap y)</a>
<a id="2500" class="Comment">-- --   go F (G₁ ⊚ G₂) g f (wrap xs) = {!!} -- mapμ (go F G₂ g f ∘′ wrap) xs</a>
</pre></body></html>