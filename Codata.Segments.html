<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Segments</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a>
<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Algebra.html" class="Module">Algebra</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Algebra.Monus.html" class="Module">Algebra.Monus</a>

<a id="68" class="Keyword">module</a> <a id="75" href="Codata.Segments.html" class="Module">Codata.Segments</a>
  <a id="93" class="Symbol">{</a><a id="94" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="95" class="Symbol">}</a>
  <a id="99" class="Symbol">(</a><a id="100" href="Codata.Segments.html#100" class="Bound">mon</a> <a id="104" class="Symbol">:</a> <a id="106" href="Algebra.Monus.html#9610" class="Record">CTMAPOM</a> <a id="114" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="115" class="Symbol">)</a>
  <a id="119" class="Keyword">where</a>

<a id="126" class="Keyword">open</a> <a id="131" href="Algebra.Monus.html#9610" class="Module">CTMAPOM</a> <a id="139" href="Codata.Segments.html#100" class="Bound">mon</a>

<a id="144" class="Comment">-- This is a type for coinductive lists, with a &quot;sized types&quot; parameter which</a>
<a id="222" class="Comment">-- can be an arbitrary monus.</a>
<a id="252" class="Keyword">infixr</a> <a id="259" class="Number">5</a> <a id="261" href="Codata.Segments.html#327" class="InductiveConstructor Operator">_◃_</a>
<a id="265" class="Keyword">data</a> <a id="Stream′"></a><a id="270" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="278" class="Symbol">{</a><a id="279" href="Codata.Segments.html#279" class="Bound">a</a><a id="280" class="Symbol">}</a> <a id="282" class="Symbol">(</a><a id="283" href="Codata.Segments.html#283" class="Bound">A</a> <a id="285" class="Symbol">:</a> <a id="287" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="292" href="Codata.Segments.html#279" class="Bound">a</a><a id="293" class="Symbol">)</a> <a id="295" class="Symbol">(</a><a id="296" href="Codata.Segments.html#296" class="Bound">i</a> <a id="298" class="Symbol">:</a> <a id="300" href="Algebra.html#1401" class="Function">𝑆</a><a id="301" class="Symbol">)</a> <a id="303" class="Symbol">:</a> <a id="305" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="310" class="Symbol">(</a><a id="311" href="Codata.Segments.html#279" class="Bound">a</a> <a id="313" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="316" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="317" class="Symbol">)</a> <a id="319" class="Keyword">where</a>
  <a id="Stream′._◃_"></a><a id="327" href="Codata.Segments.html#327" class="InductiveConstructor Operator">_◃_</a> <a id="331" class="Symbol">:</a> <a id="333" class="Symbol">∀</a> <a id="335" href="Codata.Segments.html#335" class="Bound">w</a> <a id="337" class="Symbol">→</a> <a id="339" class="Symbol">((</a><a id="341" href="Codata.Segments.html#341" class="Bound">w≺i</a> <a id="345" class="Symbol">:</a> <a id="347" href="Codata.Segments.html#335" class="Bound">w</a> <a id="349" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="351" href="Codata.Segments.html#296" class="Bound">i</a><a id="352" class="Symbol">)</a> <a id="354" class="Symbol">→</a> <a id="356" href="Codata.Segments.html#283" class="Bound">A</a> <a id="358" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="360" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="368" href="Codata.Segments.html#283" class="Bound">A</a> <a id="370" class="Symbol">(</a><a id="371" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="375" href="Codata.Segments.html#341" class="Bound">w≺i</a><a id="378" class="Symbol">))</a> <a id="381" class="Symbol">→</a> <a id="383" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="391" href="Codata.Segments.html#283" class="Bound">A</a> <a id="393" href="Codata.Segments.html#296" class="Bound">i</a>
<a id="395" class="Comment">--              ^^^^^^^^^^^^</a>
<a id="424" class="Comment">--              This is a proposition, by the way.</a>

<a id="476" class="Comment">-- The monus parameter tells you how much you can inspect into the stream.</a>
<a id="551" class="Comment">-- The Stream′ A i type, then, represents a stream that&#39;s defined for a depth</a>
<a id="629" class="Comment">-- of i; this type is a true &quot;stream&quot; (again, actually a colist), which is</a>
<a id="704" class="Comment">-- defined for any depth.</a>
<a id="Stream"></a><a id="730" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="737" class="Symbol">:</a> <a id="739" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="744" href="Level.html#239" class="Generalizable">a</a> <a id="746" class="Symbol">→</a> <a id="748" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="753" class="Symbol">(</a><a id="754" href="Level.html#239" class="Generalizable">a</a> <a id="756" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="759" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="760" class="Symbol">)</a>
<a id="762" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="769" href="Codata.Segments.html#769" class="Bound">A</a> <a id="771" class="Symbol">=</a> <a id="773" class="Symbol">∀</a> <a id="775" class="Symbol">{</a><a id="776" href="Codata.Segments.html#776" class="Bound">i</a><a id="777" class="Symbol">}</a> <a id="779" class="Symbol">→</a> <a id="781" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="789" href="Codata.Segments.html#769" class="Bound">A</a> <a id="791" href="Codata.Segments.html#776" class="Bound">i</a>

<a id="794" class="Keyword">private</a>
  <a id="804" class="Keyword">variable</a>
    <a id="817" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="819" href="Codata.Segments.html#819" class="Generalizable">j</a> <a id="821" class="Symbol">:</a> <a id="823" href="Algebra.html#1401" class="Function">𝑆</a>

<a id="826" class="Comment">--------------------------------------------------------------------------------</a>
<a id="907" class="Comment">-- Finite colists</a>
<a id="925" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1007" class="Comment">-- empty list</a>
<a id="empty"></a><a id="1021" href="Codata.Segments.html#1021" class="Function">empty</a> <a id="1027" class="Symbol">:</a> <a id="1029" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="1036" href="Level.html#255" class="Generalizable">A</a>
<a id="1038" href="Codata.Segments.html#1021" class="Function">empty</a> <a id="1044" class="Symbol">{</a><a id="1045" class="Argument">i</a> <a id="1047" class="Symbol">=</a> <a id="1049" href="Codata.Segments.html#1049" class="Bound">i</a><a id="1050" class="Symbol">}</a> <a id="1052" class="Symbol">=</a> <a id="1054" href="Codata.Segments.html#1049" class="Bound">i</a> <a id="1056" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1058" class="Symbol">λ</a> <a id="1060" href="Codata.Segments.html#1060" class="Bound">i≺i</a> <a id="1064" class="Symbol">→</a> <a id="1066" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="1073" class="Symbol">(</a><a id="1074" href="Algebra.Monus.html#9439" class="Function">≺-irrefl</a> <a id="1083" href="Codata.Segments.html#1060" class="Bound">i≺i</a><a id="1086" class="Symbol">)</a>

<a id="_◃_∷_"></a><a id="1089" href="Codata.Segments.html#1089" class="Function Operator">_◃_∷_</a> <a id="1095" class="Symbol">:</a> <a id="1097" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1099" class="Symbol">→</a> <a id="1101" href="Level.html#255" class="Generalizable">A</a> <a id="1103" class="Symbol">→</a> <a id="1105" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="1112" href="Level.html#255" class="Generalizable">A</a> <a id="1114" class="Symbol">→</a> <a id="1116" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="1123" href="Level.html#255" class="Generalizable">A</a>
<a id="1125" class="Symbol">(</a><a id="1126" href="Codata.Segments.html#1126" class="Bound">w</a> <a id="1128" href="Codata.Segments.html#1089" class="Function Operator">◃</a> <a id="1130" href="Codata.Segments.html#1130" class="Bound">x</a> <a id="1132" href="Codata.Segments.html#1089" class="Function Operator">∷</a> <a id="1134" href="Codata.Segments.html#1134" class="Bound">xs</a><a id="1136" class="Symbol">)</a> <a id="1138" class="Symbol">{</a><a id="1139" href="Codata.Segments.html#1139" class="Bound">i</a><a id="1140" class="Symbol">}</a> <a id="1142" class="Symbol">=</a> <a id="1144" href="Codata.Segments.html#1126" class="Bound">w</a> <a id="1146" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1148" class="Symbol">λ</a> <a id="1150" href="Codata.Segments.html#1150" class="Bound">w≺i</a> <a id="1154" class="Symbol">→</a> <a id="1156" href="Codata.Segments.html#1130" class="Bound">x</a> <a id="1158" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1160" href="Codata.Segments.html#1134" class="Bound">xs</a>

<a id="cons′"></a><a id="1164" href="Codata.Segments.html#1164" class="Function">cons′</a> <a id="1170" class="Symbol">:</a> <a id="1172" class="Symbol">∀</a> <a id="1174" href="Codata.Segments.html#1174" class="Bound">w</a> <a id="1176" class="Symbol">→</a> <a id="1178" href="Level.html#255" class="Generalizable">A</a> <a id="1180" class="Symbol">→</a> <a id="1182" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="1190" href="Level.html#255" class="Generalizable">A</a> <a id="1192" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="1194" class="Symbol">→</a> <a id="1196" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="1204" href="Level.html#255" class="Generalizable">A</a> <a id="1206" class="Symbol">(</a><a id="1207" href="Codata.Segments.html#1174" class="Bound">w</a> <a id="1209" href="Algebra.html#1421" class="Function Operator">∙</a> <a id="1211" href="Codata.Segments.html#817" class="Generalizable">i</a><a id="1212" class="Symbol">)</a>
<a id="1214" href="Codata.Segments.html#1164" class="Function">cons′</a> <a id="1220" href="Codata.Segments.html#1220" class="Bound">w</a> <a id="1222" href="Codata.Segments.html#1222" class="Bound">x</a> <a id="1224" href="Codata.Segments.html#1224" class="Bound">xs</a> <a id="1227" class="Symbol">=</a> <a id="1229" href="Codata.Segments.html#1220" class="Bound">w</a> <a id="1231" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1233" class="Symbol">λ</a> <a id="1235" class="Symbol">{</a> <a id="1237" class="Symbol">(</a><a id="1238" href="Codata.Segments.html#1238" class="Bound">k</a> <a id="1240" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1242" href="Codata.Segments.html#1242" class="Bound">w∙i≡w∙k</a> <a id="1250" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1252" href="Codata.Segments.html#1252" class="Bound">k≢ε</a><a id="1255" class="Symbol">)</a> <a id="1257" class="Symbol">→</a> <a id="1259" href="Codata.Segments.html#1222" class="Bound">x</a> <a id="1261" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1263" href="Cubical.Foundations.Prelude.html#7588" class="Function">subst</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="1278" class="Symbol">_)</a> <a id="1281" class="Symbol">(</a><a id="1282" href="Algebra.Monus.html#6959" class="Function">cancelˡ</a> <a id="1290" href="Codata.Segments.html#1220" class="Bound">w</a> <a id="1292" class="Symbol">_</a> <a id="1294" href="Codata.Segments.html#1238" class="Bound">k</a> <a id="1296" href="Codata.Segments.html#1242" class="Bound">w∙i≡w∙k</a><a id="1303" class="Symbol">)</a> <a id="1305" href="Codata.Segments.html#1224" class="Bound">xs</a> <a id="1308" class="Symbol">}</a>

<a id="1311" class="Comment">-- singleton</a>
<a id="pure"></a><a id="1324" href="Codata.Segments.html#1324" class="Function">pure</a> <a id="1329" class="Symbol">:</a> <a id="1331" href="Level.html#255" class="Generalizable">A</a> <a id="1333" class="Symbol">→</a> <a id="1335" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="1342" href="Level.html#255" class="Generalizable">A</a>
<a id="1344" href="Codata.Segments.html#1324" class="Function">pure</a> <a id="1349" href="Codata.Segments.html#1349" class="Bound">x</a> <a id="1351" class="Symbol">=</a> <a id="1353" href="Algebra.html#1444" class="Function">ε</a> <a id="1355" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1357" class="Symbol">λ</a> <a id="1359" href="Codata.Segments.html#1359" class="Bound">ε≺i</a> <a id="1363" class="Symbol">→</a> <a id="1365" href="Codata.Segments.html#1349" class="Bound">x</a> <a id="1367" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1369" href="Codata.Segments.html#1021" class="Function">empty</a>

<a id="replicate"></a><a id="1376" href="Codata.Segments.html#1376" class="Function">replicate</a> <a id="1386" class="Symbol">:</a> <a id="1388" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1390" class="Symbol">→</a> <a id="1392" href="Level.html#255" class="Generalizable">A</a> <a id="1394" class="Symbol">→</a> <a id="1396" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="1403" href="Level.html#255" class="Generalizable">A</a>
<a id="1405" href="Codata.Segments.html#1376" class="Function">replicate</a> <a id="1415" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1423" href="Codata.Segments.html#1423" class="Bound">x</a> <a id="1425" class="Symbol">=</a> <a id="1427" href="Codata.Segments.html#1021" class="Function">empty</a>
<a id="1433" href="Codata.Segments.html#1376" class="Function">replicate</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1448" href="Codata.Segments.html#1448" class="Bound">n</a><a id="1449" class="Symbol">)</a> <a id="1451" href="Codata.Segments.html#1451" class="Bound">x</a> <a id="1453" class="Symbol">=</a> <a id="1455" href="Algebra.html#1444" class="Function">ε</a> <a id="1457" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1459" class="Symbol">λ</a> <a id="1461" href="Codata.Segments.html#1461" class="Bound">ε≺i</a> <a id="1465" class="Symbol">→</a> <a id="1467" href="Codata.Segments.html#1451" class="Bound">x</a> <a id="1469" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1471" href="Codata.Segments.html#1376" class="Function">replicate</a> <a id="1481" href="Codata.Segments.html#1448" class="Bound">n</a> <a id="1483" href="Codata.Segments.html#1451" class="Bound">x</a>

<a id="1486" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1567" class="Comment">-- Infinite colists</a>
<a id="1587" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1669" class="Keyword">module</a> <a id="1676" href="Codata.Segments.html#1676" class="Module">_</a> <a id="1678" class="Symbol">(</a><a id="1679" href="Codata.Segments.html#1679" class="Bound">fdc</a> <a id="1683" class="Symbol">:</a> <a id="1685" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="1697" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="1700" class="Symbol">)</a> <a id="1702" class="Symbol">(</a><a id="1703" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1705" class="Symbol">:</a> <a id="1707" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1709" class="Symbol">→</a> <a id="1711" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1716" href="Level.html#241" class="Generalizable">b</a><a id="1717" class="Symbol">)</a> <a id="1719" class="Keyword">where</a>
  <a id="1727" class="Keyword">module</a> <a id="1734" href="Codata.Segments.html#1734" class="Module">_</a> <a id="1736" class="Symbol">(</a><a id="1737" href="Codata.Segments.html#1737" class="Bound">ϕ</a> <a id="1739" class="Symbol">:</a> <a id="1741" class="Symbol">∀</a> <a id="1743" class="Symbol">{</a><a id="1744" href="Codata.Segments.html#1744" class="Bound">i</a><a id="1745" class="Symbol">}</a> <a id="1747" class="Symbol">→</a> <a id="1749" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1751" href="Codata.Segments.html#1744" class="Bound">i</a> <a id="1753" class="Symbol">→</a> <a id="1755" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1757" href="Codata.Segments.html#1757" class="Bound">w</a> <a id="1759" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1761" class="Symbol">(</a><a id="1762" href="Codata.Segments.html#1757" class="Bound">w</a> <a id="1764" href="Path.html#524" class="Function Operator">≢</a> <a id="1766" href="Algebra.html#1444" class="Function">ε</a><a id="1767" class="Symbol">)</a> <a id="1769" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1771" class="Symbol">((</a><a id="1773" href="Codata.Segments.html#1773" class="Bound">w≺i</a> <a id="1777" class="Symbol">:</a> <a id="1779" href="Codata.Segments.html#1757" class="Bound">w</a> <a id="1781" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1783" href="Codata.Segments.html#1744" class="Bound">i</a><a id="1784" class="Symbol">)</a> <a id="1786" class="Symbol">→</a> <a id="1788" href="Level.html#255" class="Generalizable">A</a> <a id="1790" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1792" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1794" class="Symbol">(</a><a id="1795" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1799" href="Codata.Segments.html#1773" class="Bound">w≺i</a><a id="1802" class="Symbol">)))</a> <a id="1806" class="Keyword">where</a>
    <a id="1816" href="Codata.Segments.html#1816" class="Function">unfold′</a> <a id="1824" class="Symbol">:</a> <a id="1826" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1830" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1834" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="1836" class="Symbol">→</a> <a id="1838" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1840" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="1842" class="Symbol">→</a> <a id="1844" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="1852" href="Codata.Segments.html#1788" class="Bound">A</a> <a id="1854" href="Codata.Segments.html#817" class="Generalizable">i</a>
    <a id="1860" href="Codata.Segments.html#1860" class="Function">unfold″</a> <a id="1868" class="Symbol">:</a> <a id="1870" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1874" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1878" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="1880" class="Symbol">→</a> <a id="1882" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1884" href="Codata.Segments.html#1884" class="Bound">w</a> <a id="1886" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1888" class="Symbol">(</a><a id="1889" href="Codata.Segments.html#1884" class="Bound">w</a> <a id="1891" href="Path.html#524" class="Function Operator">≢</a> <a id="1893" href="Algebra.html#1444" class="Function">ε</a><a id="1894" class="Symbol">)</a> <a id="1896" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1898" class="Symbol">((</a><a id="1900" href="Codata.Segments.html#1900" class="Bound">w≺i</a> <a id="1904" class="Symbol">:</a> <a id="1906" href="Codata.Segments.html#1884" class="Bound">w</a> <a id="1908" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1910" href="Codata.Segments.html#817" class="Generalizable">i</a><a id="1911" class="Symbol">)</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="Codata.Segments.html#1788" class="Bound">A</a> <a id="1917" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1919" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1921" class="Symbol">(</a><a id="1922" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1926" href="Codata.Segments.html#1900" class="Bound">w≺i</a><a id="1929" class="Symbol">))</a> <a id="1932" class="Symbol">→</a> <a id="1934" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="1942" href="Codata.Segments.html#1788" class="Bound">A</a> <a id="1944" href="Codata.Segments.html#817" class="Generalizable">i</a>
    <a id="1950" href="Codata.Segments.html#1950" class="Function">unfold‴</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1964" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1968" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="1970" class="Symbol">→</a> <a id="1972" class="Symbol">(</a><a id="1973" href="Codata.Segments.html#1973" class="Bound">j≺i</a> <a id="1977" class="Symbol">:</a> <a id="1979" href="Codata.Segments.html#819" class="Generalizable">j</a> <a id="1981" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1983" href="Codata.Segments.html#817" class="Generalizable">i</a><a id="1984" class="Symbol">)</a> <a id="1986" class="Symbol">→</a> <a id="1988" href="Codata.Segments.html#819" class="Generalizable">j</a> <a id="1990" href="Path.html#524" class="Function Operator">≢</a> <a id="1992" href="Algebra.html#1444" class="Function">ε</a> <a id="1994" class="Symbol">→</a> <a id="1996" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="1998" class="Symbol">(</a><a id="1999" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="2003" href="Codata.Segments.html#1973" class="Bound">j≺i</a><a id="2006" class="Symbol">)</a> <a id="2008" class="Symbol">→</a> <a id="2010" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="2018" href="Codata.Segments.html#1788" class="Bound">A</a> <a id="2020" class="Symbol">(</a><a id="2021" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="2025" href="Codata.Segments.html#1973" class="Bound">j≺i</a><a id="2028" class="Symbol">)</a>

    <a id="2035" href="Codata.Segments.html#1950" class="Function">unfold‴</a> <a id="2043" class="Symbol">(</a><a id="2044" href="WellFounded.html#161" class="InductiveConstructor">acc</a> <a id="2048" href="Codata.Segments.html#2048" class="Bound">wf</a><a id="2050" class="Symbol">)</a> <a id="2052" class="Symbol">(</a><a id="2053" href="Codata.Segments.html#2053" class="Bound">k</a> <a id="2055" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2057" href="Codata.Segments.html#2057" class="Bound">i≡j∙k</a> <a id="2063" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2065" href="Codata.Segments.html#2065" class="Bound">k≢ε</a><a id="2068" class="Symbol">)</a> <a id="2070" href="Codata.Segments.html#2070" class="Bound">j≢ε</a> <a id="2074" href="Codata.Segments.html#2074" class="Bound">xs</a> <a id="2077" class="Symbol">=</a> <a id="2079" href="Codata.Segments.html#1816" class="Function">unfold′</a> <a id="2087" class="Symbol">(</a><a id="2088" href="Codata.Segments.html#2048" class="Bound">wf</a> <a id="2091" class="Symbol">_</a> <a id="2093" class="Symbol">((_</a> <a id="2097" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2099" href="Codata.Segments.html#2057" class="Bound">i≡j∙k</a> <a id="2105" href="Cubical.Foundations.Id.html#737" class="Function Operator">;</a> <a id="2107" href="Algebra.html#2901" class="Function">comm</a> <a id="2112" class="Symbol">_</a> <a id="2114" class="Symbol">_</a> <a id="2116" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2118" href="Codata.Segments.html#2070" class="Bound">j≢ε</a><a id="2121" class="Symbol">)))</a> <a id="2125" href="Codata.Segments.html#2074" class="Bound">xs</a>

    <a id="2133" href="Codata.Segments.html#1860" class="Function">unfold″</a> <a id="2141" href="Codata.Segments.html#2141" class="Bound">a</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Codata.Segments.html#2144" class="Bound">w</a> <a id="2146" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2148" href="Codata.Segments.html#2148" class="Bound">w≢ε</a> <a id="2152" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2154" href="Codata.Segments.html#2154" class="Bound">xs′</a><a id="2157" class="Symbol">)</a> <a id="2159" class="Symbol">=</a> <a id="2161" href="Codata.Segments.html#2144" class="Bound">w</a> <a id="2163" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2165" class="Symbol">λ</a> <a id="2167" href="Codata.Segments.html#2167" class="Bound">w≺i</a> <a id="2171" class="Symbol">→</a> <a id="2173" href="Data.Sigma.Base.html#1204" class="Function">map₂</a> <a id="2178" class="Symbol">(</a><a id="2179" href="Codata.Segments.html#1950" class="Function">unfold‴</a> <a id="2187" href="Codata.Segments.html#2141" class="Bound">a</a> <a id="2189" href="Codata.Segments.html#2167" class="Bound">w≺i</a> <a id="2193" href="Codata.Segments.html#2148" class="Bound">w≢ε</a><a id="2196" class="Symbol">)</a> <a id="2198" class="Symbol">(</a><a id="2199" href="Codata.Segments.html#2154" class="Bound">xs′</a> <a id="2203" href="Codata.Segments.html#2167" class="Bound">w≺i</a><a id="2206" class="Symbol">)</a>

    <a id="2213" href="Codata.Segments.html#1816" class="Function">unfold′</a> <a id="2221" href="Codata.Segments.html#2221" class="Bound">a</a> <a id="2223" href="Codata.Segments.html#2223" class="Bound">xs</a> <a id="2226" class="Symbol">=</a> <a id="2228" href="Codata.Segments.html#1860" class="Function">unfold″</a> <a id="2236" href="Codata.Segments.html#2221" class="Bound">a</a> <a id="2238" class="Symbol">(</a><a id="2239" href="Codata.Segments.html#1737" class="Bound">ϕ</a> <a id="2241" href="Codata.Segments.html#2223" class="Bound">xs</a><a id="2243" class="Symbol">)</a>

    <a id="2250" href="Codata.Segments.html#2250" class="Function">unfold</a> <a id="2257" class="Symbol">:</a> <a id="2259" class="Symbol">(∀</a> <a id="2262" class="Symbol">{</a><a id="2263" href="Codata.Segments.html#2263" class="Bound">i</a><a id="2264" class="Symbol">}</a> <a id="2266" class="Symbol">→</a> <a id="2268" href="Codata.Segments.html#1703" class="Bound">B</a> <a id="2270" href="Codata.Segments.html#2263" class="Bound">i</a><a id="2271" class="Symbol">)</a> <a id="2273" class="Symbol">→</a> <a id="2275" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="2282" href="Codata.Segments.html#1788" class="Bound">A</a>
    <a id="2288" href="Codata.Segments.html#2250" class="Function">unfold</a> <a id="2295" href="Codata.Segments.html#2295" class="Bound">xs</a> <a id="2298" class="Symbol">{</a><a id="2299" href="Codata.Segments.html#2299" class="Bound">i</a><a id="2300" class="Symbol">}</a> <a id="2302" class="Symbol">=</a> <a id="2304" href="Codata.Segments.html#1816" class="Function">unfold′</a> <a id="2312" class="Symbol">(</a><a id="2313" href="Codata.Segments.html#1679" class="Bound">fdc</a> <a id="2317" href="Codata.Segments.html#2299" class="Bound">i</a><a id="2318" class="Symbol">)</a> <a id="2320" href="Codata.Segments.html#2295" class="Bound">xs</a>

<a id="2324" class="Comment">-- The definition of the list lets us construct an infinite colist as long as</a>
<a id="2402" class="Comment">-- every entry uses some &quot;fuel&quot;.</a>
<a id="2435" class="Keyword">module</a> <a id="2442" href="Codata.Segments.html#2442" class="Module">_</a> <a id="2444" class="Symbol">(</a><a id="2445" href="Codata.Segments.html#2445" class="Bound">fdc</a> <a id="2449" class="Symbol">:</a> <a id="2451" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="2463" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="2466" class="Symbol">)</a> <a id="2468" class="Symbol">(</a><a id="2469" href="Codata.Segments.html#2469" class="Bound">s</a> <a id="2471" class="Symbol">:</a> <a id="2473" href="Algebra.html#1401" class="Function">𝑆</a><a id="2474" class="Symbol">)</a> <a id="2476" class="Symbol">(</a><a id="2477" href="Codata.Segments.html#2477" class="Bound">s≢ε</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Codata.Segments.html#2469" class="Bound">s</a> <a id="2485" href="Path.html#524" class="Function Operator">≢</a> <a id="2487" href="Algebra.html#1444" class="Function">ε</a><a id="2488" class="Symbol">)</a> <a id="2490" class="Symbol">(</a><a id="2491" href="Codata.Segments.html#2491" class="Bound">x</a> <a id="2493" class="Symbol">:</a> <a id="2495" href="Level.html#255" class="Generalizable">A</a><a id="2496" class="Symbol">)</a> <a id="2498" class="Keyword">where</a>
  <a id="2506" href="Codata.Segments.html#2506" class="Function">repeat</a> <a id="2513" class="Symbol">:</a> <a id="2515" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="2522" href="Codata.Segments.html#2495" class="Bound">A</a>
  <a id="2526" href="Codata.Segments.html#2506" class="Function">repeat</a> <a id="2533" class="Symbol">=</a> <a id="2535" href="Codata.Segments.html#2250" class="Function">unfold</a> <a id="2542" href="Codata.Segments.html#2445" class="Bound">fdc</a> <a id="2546" class="Symbol">(</a><a id="2547" href="Function.html#589" class="Function">const</a> <a id="2553" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="2554" class="Symbol">)</a> <a id="2556" class="Symbol">(λ</a> <a id="2559" href="Codata.Segments.html#2559" class="Bound">_</a> <a id="2561" class="Symbol">→</a> <a id="2563" href="Codata.Segments.html#2469" class="Bound">s</a> <a id="2565" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2567" href="Codata.Segments.html#2477" class="Bound">s≢ε</a> <a id="2571" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2573" href="Function.html#589" class="Function">const</a> <a id="2579" class="Symbol">(</a><a id="2580" href="Codata.Segments.html#2491" class="Bound">x</a> <a id="2582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2584" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2586" class="Symbol">))</a> <a id="2589" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="2593" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2674" class="Comment">-- Manipulating colists</a>
<a id="2698" class="Comment">--------------------------------------------------------------------------------</a>
<a id="map"></a><a id="2779" href="Codata.Segments.html#2779" class="Function">map</a> <a id="2783" class="Symbol">:</a> <a id="2785" class="Symbol">(</a><a id="2786" href="Level.html#255" class="Generalizable">A</a> <a id="2788" class="Symbol">→</a> <a id="2790" href="Level.html#269" class="Generalizable">B</a><a id="2791" class="Symbol">)</a> <a id="2793" class="Symbol">→</a> <a id="2795" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="2803" href="Level.html#255" class="Generalizable">A</a> <a id="2805" href="Codata.Segments.html#817" class="Generalizable">i</a> <a id="2807" class="Symbol">→</a> <a id="2809" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="2817" href="Level.html#269" class="Generalizable">B</a> <a id="2819" href="Codata.Segments.html#817" class="Generalizable">i</a>
<a id="2821" href="Codata.Segments.html#2779" class="Function">map</a> <a id="2825" href="Codata.Segments.html#2825" class="Bound">f</a> <a id="2827" class="Symbol">(</a><a id="2828" href="Codata.Segments.html#2828" class="Bound">w</a> <a id="2830" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2832" href="Codata.Segments.html#2832" class="Bound">xs</a><a id="2834" class="Symbol">)</a> <a id="2836" class="Symbol">=</a> <a id="2838" href="Codata.Segments.html#2828" class="Bound">w</a> <a id="2840" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2842" class="Symbol">λ</a> <a id="2844" href="Codata.Segments.html#2844" class="Bound">w≺i</a> <a id="2848" class="Symbol">→</a> <a id="2850" href="Function.html#1099" class="Function Operator">case</a> <a id="2855" href="Codata.Segments.html#2832" class="Bound">xs</a> <a id="2858" href="Codata.Segments.html#2844" class="Bound">w≺i</a> <a id="2862" href="Function.html#1099" class="Function Operator">of</a> <a id="2865" class="Symbol">λ</a> <a id="2867" class="Symbol">{</a> <a id="2869" class="Symbol">(</a><a id="2870" href="Codata.Segments.html#2870" class="Bound">y</a> <a id="2872" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2874" href="Codata.Segments.html#2874" class="Bound">ys</a><a id="2876" class="Symbol">)</a> <a id="2878" class="Symbol">→</a> <a id="2880" href="Codata.Segments.html#2825" class="Bound">f</a> <a id="2882" href="Codata.Segments.html#2870" class="Bound">y</a> <a id="2884" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2886" href="Codata.Segments.html#2779" class="Function">map</a> <a id="2890" href="Codata.Segments.html#2825" class="Bound">f</a> <a id="2892" href="Codata.Segments.html#2874" class="Bound">ys</a> <a id="2895" class="Symbol">}</a>

<a id="2898" class="Keyword">open</a> <a id="2903" class="Keyword">import</a> <a id="2910" href="Data.List.html" class="Module">Data.List</a> <a id="2920" class="Keyword">using</a> <a id="2926" class="Symbol">(</a><a id="2927" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="2931" class="Symbol">;</a> <a id="2933" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="2936" class="Symbol">;</a> <a id="2938" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2940" class="Symbol">)</a>

<a id="take′"></a><a id="2943" href="Codata.Segments.html#2943" class="Function">take′</a> <a id="2949" class="Symbol">:</a> <a id="2951" class="Symbol">∀</a> <a id="2953" href="Codata.Segments.html#2953" class="Bound">i</a> <a id="2955" class="Symbol">→</a> <a id="2957" href="Codata.Segments.html#270" class="Datatype">Stream′</a> <a id="2965" href="Level.html#255" class="Generalizable">A</a> <a id="2967" href="Codata.Segments.html#2953" class="Bound">i</a> <a id="2969" class="Symbol">→</a> <a id="2971" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2976" href="Level.html#255" class="Generalizable">A</a>
<a id="2978" href="Codata.Segments.html#2943" class="Function">take′</a> <a id="2984" href="Codata.Segments.html#2984" class="Bound">i</a> <a id="2986" class="Symbol">(</a><a id="2987" href="Codata.Segments.html#2987" class="Bound">w</a> <a id="2989" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2991" href="Codata.Segments.html#2991" class="Bound">xs</a><a id="2993" class="Symbol">)</a> <a id="2995" class="Keyword">with</a> <a id="3000" href="Codata.Segments.html#2987" class="Bound">w</a> <a id="3002" href="Relation.Binary.html#2987" class="Function Operator">&lt;?</a> <a id="3005" href="Codata.Segments.html#2984" class="Bound">i</a>
<a id="3007" class="Symbol">...</a> <a id="3011" class="Symbol">|</a> <a id="3013" href="Relation.Nullary.Decidable.html#433" class="InductiveConstructor">no</a> <a id="3016" class="Symbol">_</a> <a id="3018" class="Symbol">=</a> <a id="3020" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="3023" class="Symbol">...</a> <a id="3027" class="Symbol">|</a> <a id="3029" href="Relation.Nullary.Decidable.html#399" class="InductiveConstructor">yes</a> <a id="3033" href="Codata.Segments.html#3033" class="Bound">w&lt;i</a> <a id="3037" class="Keyword">with</a> <a id="3042" class="Bound">xs</a> <a id="3045" class="Symbol">(</a><a id="3046" href="Algebra.Monus.html#4313" class="Function">&lt;⇒≺</a> <a id="3050" class="Symbol">_</a> <a id="3052" class="Symbol">_</a> <a id="3054" href="Codata.Segments.html#3033" class="Bound">w&lt;i</a><a id="3057" class="Symbol">)</a>
<a id="3059" class="Symbol">...</a> <a id="3063" class="Symbol">|</a> <a id="3065" href="Codata.Segments.html#3065" class="Bound">y</a> <a id="3067" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3069" href="Codata.Segments.html#3069" class="Bound">ys</a> <a id="3072" class="Symbol">=</a> <a id="3074" href="Codata.Segments.html#3065" class="Bound">y</a> <a id="3076" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3078" href="Codata.Segments.html#2943" class="Function">take′</a> <a id="3084" class="Symbol">_</a> <a id="3086" href="Codata.Segments.html#3069" class="Bound">ys</a>

<a id="take"></a><a id="3090" href="Codata.Segments.html#3090" class="Function">take</a> <a id="3095" class="Symbol">:</a> <a id="3097" href="Algebra.html#1401" class="Function">𝑆</a> <a id="3099" class="Symbol">→</a> <a id="3101" href="Codata.Segments.html#730" class="Function">Stream</a> <a id="3108" href="Level.html#255" class="Generalizable">A</a> <a id="3110" class="Symbol">→</a> <a id="3112" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3117" href="Level.html#255" class="Generalizable">A</a>
<a id="3119" href="Codata.Segments.html#3090" class="Function">take</a> <a id="3124" href="Codata.Segments.html#3124" class="Bound">x</a> <a id="3126" href="Codata.Segments.html#3126" class="Bound">xs</a> <a id="3129" class="Symbol">=</a> <a id="3131" href="Codata.Segments.html#2943" class="Function">take′</a> <a id="3137" href="Codata.Segments.html#3124" class="Bound">x</a> <a id="3139" href="Codata.Segments.html#3126" class="Bound">xs</a>
</pre></body></html>