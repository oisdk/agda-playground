<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Segments</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a>
<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Algebra.html" class="Module">Algebra</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Algebra.Monus.html" class="Module">Algebra.Monus</a>

<a id="68" class="Keyword">module</a> <a id="75" href="Codata.Segments.html" class="Module">Codata.Segments</a>
  <a id="93" class="Symbol">{</a><a id="94" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="95" class="Symbol">}</a>
  <a id="99" class="Symbol">(</a><a id="100" href="Codata.Segments.html#100" class="Bound">mon</a> <a id="104" class="Symbol">:</a> <a id="106" href="Algebra.Monus.html#9610" class="Record">CTMAPOM</a> <a id="114" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="115" class="Symbol">)</a>
  <a id="119" class="Keyword">where</a>

<a id="126" class="Keyword">open</a> <a id="131" href="Algebra.Monus.html#9610" class="Module">CTMAPOM</a> <a id="139" href="Codata.Segments.html#100" class="Bound">mon</a>

<a id="144" class="Keyword">private</a> <a id="152" class="Keyword">variable</a> <a id="161" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="163" href="Codata.Segments.html#163" class="Generalizable">j</a> <a id="165" class="Symbol">:</a> <a id="167" href="Algebra.html#1401" class="Function">𝑆</a>

<a id="170" class="Comment">-- This is a type which contains some finite and some infinite lists.</a>
<a id="240" class="Comment">-- The idea is that each entry contains a parameter (w) which says</a>
<a id="307" class="Comment">-- how much coinductive &quot;fuel&quot; it uses.</a>
<a id="347" class="Comment">-- The Colist′ A i type represents a colist which is defined down to depth</a>
<a id="422" class="Comment">-- i; the Colist A type represents a &quot;true&quot; colist, i.e. a colist defined for</a>
<a id="500" class="Comment">-- any given depth.</a>
<a id="520" class="Keyword">infixr</a> <a id="527" class="Number">5</a> <a id="529" href="Codata.Segments.html#595" class="InductiveConstructor Operator">_◃_</a>
<a id="533" class="Keyword">data</a> <a id="Colist′"></a><a id="538" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="546" class="Symbol">{</a><a id="547" href="Codata.Segments.html#547" class="Bound">a</a><a id="548" class="Symbol">}</a> <a id="550" class="Symbol">(</a><a id="551" href="Codata.Segments.html#551" class="Bound">A</a> <a id="553" class="Symbol">:</a> <a id="555" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="560" href="Codata.Segments.html#547" class="Bound">a</a><a id="561" class="Symbol">)</a> <a id="563" class="Symbol">(</a><a id="564" href="Codata.Segments.html#564" class="Bound">i</a> <a id="566" class="Symbol">:</a> <a id="568" href="Algebra.html#1401" class="Function">𝑆</a><a id="569" class="Symbol">)</a> <a id="571" class="Symbol">:</a> <a id="573" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="578" class="Symbol">(</a><a id="579" href="Codata.Segments.html#547" class="Bound">a</a> <a id="581" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="584" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="585" class="Symbol">)</a> <a id="587" class="Keyword">where</a>
  <a id="Colist′._◃_"></a><a id="595" href="Codata.Segments.html#595" class="InductiveConstructor Operator">_◃_</a> <a id="599" class="Symbol">:</a> <a id="601" class="Symbol">∀</a> <a id="603" href="Codata.Segments.html#603" class="Bound">w</a> <a id="605" class="Symbol">→</a> <a id="607" class="Symbol">((</a><a id="609" href="Codata.Segments.html#609" class="Bound">w≺i</a> <a id="613" class="Symbol">:</a> <a id="615" href="Codata.Segments.html#603" class="Bound">w</a> <a id="617" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="619" href="Codata.Segments.html#564" class="Bound">i</a><a id="620" class="Symbol">)</a> <a id="622" class="Symbol">→</a> <a id="624" href="Codata.Segments.html#551" class="Bound">A</a> <a id="626" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="628" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="636" href="Codata.Segments.html#551" class="Bound">A</a> <a id="638" class="Symbol">(</a><a id="639" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="643" href="Codata.Segments.html#609" class="Bound">w≺i</a><a id="646" class="Symbol">))</a> <a id="649" class="Symbol">→</a> <a id="651" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="659" href="Codata.Segments.html#551" class="Bound">A</a> <a id="661" href="Codata.Segments.html#564" class="Bound">i</a>
<a id="663" class="Comment">--              ^^^^^^^^^^^^</a>
<a id="692" class="Comment">--              This is a proposition, by the way.</a>

<a id="Colist"></a><a id="744" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="751" class="Symbol">:</a> <a id="753" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="758" href="Level.html#239" class="Generalizable">a</a> <a id="760" class="Symbol">→</a> <a id="762" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="767" class="Symbol">(</a><a id="768" href="Level.html#239" class="Generalizable">a</a> <a id="770" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="773" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="774" class="Symbol">)</a>
<a id="776" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="783" href="Codata.Segments.html#783" class="Bound">A</a> <a id="785" class="Symbol">=</a> <a id="787" class="Symbol">∀</a> <a id="789" class="Symbol">{</a><a id="790" href="Codata.Segments.html#790" class="Bound">i</a><a id="791" class="Symbol">}</a> <a id="793" class="Symbol">→</a> <a id="795" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="803" href="Codata.Segments.html#783" class="Bound">A</a> <a id="805" href="Codata.Segments.html#790" class="Bound">i</a>

<a id="808" class="Comment">--------------------------------------------------------------------------------</a>
<a id="889" class="Comment">-- Finite colists</a>
<a id="907" class="Comment">--------------------------------------------------------------------------------</a>

<a id="989" class="Comment">-- By adding a finite prefix you don&#39;t have to use any of the fuel.</a>

<a id="_∹_"></a><a id="1058" href="Codata.Segments.html#1058" class="Function Operator">_∹_</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="Level.html#255" class="Generalizable">A</a> <a id="1066" class="Symbol">→</a> <a id="1068" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="1075" href="Level.html#255" class="Generalizable">A</a> <a id="1077" class="Symbol">→</a> <a id="1079" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="1086" href="Level.html#255" class="Generalizable">A</a>
<a id="1088" href="Codata.Segments.html#1088" class="Bound">x</a> <a id="1090" href="Codata.Segments.html#1058" class="Function Operator">∹</a> <a id="1092" href="Codata.Segments.html#1092" class="Bound">xs</a> <a id="1095" class="Symbol">=</a> <a id="1097" href="Algebra.html#1444" class="Function">ε</a> <a id="1099" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="1101" class="Symbol">λ</a> <a id="1103" href="Codata.Segments.html#1103" class="Bound">_</a> <a id="1105" class="Symbol">→</a> <a id="1107" href="Codata.Segments.html#1088" class="Bound">x</a> <a id="1109" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1111" href="Codata.Segments.html#1092" class="Bound">xs</a>

<a id="1115" class="Comment">-- To terminate computation you use all the fuel, making an empty list.</a>
<a id="empty"></a><a id="1187" href="Codata.Segments.html#1187" class="Function">empty</a> <a id="1193" class="Symbol">:</a> <a id="1195" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="1202" href="Level.html#255" class="Generalizable">A</a>
<a id="1204" href="Codata.Segments.html#1187" class="Function">empty</a> <a id="1210" class="Symbol">{</a><a id="1211" class="Argument">i</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Codata.Segments.html#1215" class="Bound">i</a><a id="1216" class="Symbol">}</a> <a id="1218" class="Symbol">=</a> <a id="1220" href="Codata.Segments.html#1215" class="Bound">i</a> <a id="1222" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="1224" class="Symbol">λ</a> <a id="1226" href="Codata.Segments.html#1226" class="Bound">i≺i</a> <a id="1230" class="Symbol">→</a> <a id="1232" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="1239" class="Symbol">(</a><a id="1240" href="Algebra.Monus.html#9439" class="Function">≺-irrefl</a> <a id="1249" href="Codata.Segments.html#1226" class="Bound">i≺i</a><a id="1252" class="Symbol">)</a>

<a id="1255" class="Comment">-- singleton</a>
<a id="pure"></a><a id="1268" href="Codata.Segments.html#1268" class="Function">pure</a> <a id="1273" class="Symbol">:</a> <a id="1275" href="Level.html#255" class="Generalizable">A</a> <a id="1277" class="Symbol">→</a> <a id="1279" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="1286" href="Level.html#255" class="Generalizable">A</a>
<a id="1288" href="Codata.Segments.html#1268" class="Function">pure</a> <a id="1293" href="Codata.Segments.html#1293" class="Bound">x</a> <a id="1295" class="Symbol">=</a> <a id="1297" href="Codata.Segments.html#1293" class="Bound">x</a> <a id="1299" href="Codata.Segments.html#1058" class="Function Operator">∹</a> <a id="1301" href="Codata.Segments.html#1187" class="Function">empty</a>

<a id="replicate"></a><a id="1308" href="Codata.Segments.html#1308" class="Function">replicate</a> <a id="1318" class="Symbol">:</a> <a id="1320" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1322" class="Symbol">→</a> <a id="1324" href="Level.html#255" class="Generalizable">A</a> <a id="1326" class="Symbol">→</a> <a id="1328" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="1335" href="Level.html#255" class="Generalizable">A</a>
<a id="1337" href="Codata.Segments.html#1308" class="Function">replicate</a> <a id="1347" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1355" href="Codata.Segments.html#1355" class="Bound">x</a> <a id="1357" class="Symbol">=</a> <a id="1359" href="Codata.Segments.html#1187" class="Function">empty</a>
<a id="1365" href="Codata.Segments.html#1308" class="Function">replicate</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1380" href="Codata.Segments.html#1380" class="Bound">n</a><a id="1381" class="Symbol">)</a> <a id="1383" href="Codata.Segments.html#1383" class="Bound">x</a> <a id="1385" class="Symbol">=</a> <a id="1387" href="Codata.Segments.html#1383" class="Bound">x</a> <a id="1389" href="Codata.Segments.html#1058" class="Function Operator">∹</a> <a id="1391" href="Codata.Segments.html#1308" class="Function">replicate</a> <a id="1401" href="Codata.Segments.html#1380" class="Bound">n</a> <a id="1403" href="Codata.Segments.html#1383" class="Bound">x</a>

<a id="1406" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1487" class="Comment">-- Infinite colists</a>
<a id="1507" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1589" class="Keyword">module</a> <a id="1596" href="Codata.Segments.html#1596" class="Module">_</a> <a id="1598" class="Symbol">(</a><a id="1599" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1601" class="Symbol">:</a> <a id="1603" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1605" class="Symbol">→</a> <a id="1607" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1612" href="Level.html#241" class="Generalizable">b</a><a id="1613" class="Symbol">)</a> <a id="1615" class="Symbol">(</a><a id="1616" href="Codata.Segments.html#1616" class="Bound">ϕ</a> <a id="1618" class="Symbol">:</a> <a id="1620" class="Symbol">∀</a> <a id="1622" class="Symbol">{</a><a id="1623" href="Codata.Segments.html#1623" class="Bound">i</a><a id="1624" class="Symbol">}</a> <a id="1626" class="Symbol">→</a> <a id="1628" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1630" href="Codata.Segments.html#1623" class="Bound">i</a> <a id="1632" class="Symbol">→</a> <a id="1634" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1636" href="Codata.Segments.html#1636" class="Bound">w</a> <a id="1638" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1640" class="Symbol">(</a><a id="1641" href="Codata.Segments.html#1636" class="Bound">w</a> <a id="1643" href="Path.html#524" class="Function Operator">≢</a> <a id="1645" href="Algebra.html#1444" class="Function">ε</a><a id="1646" class="Symbol">)</a> <a id="1648" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1650" class="Symbol">((</a><a id="1652" href="Codata.Segments.html#1652" class="Bound">w≺i</a> <a id="1656" class="Symbol">:</a> <a id="1658" href="Codata.Segments.html#1636" class="Bound">w</a> <a id="1660" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1662" href="Codata.Segments.html#1623" class="Bound">i</a><a id="1663" class="Symbol">)</a> <a id="1665" class="Symbol">→</a> <a id="1667" href="Level.html#255" class="Generalizable">A</a> <a id="1669" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1671" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1673" class="Symbol">(</a><a id="1674" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1678" href="Codata.Segments.html#1652" class="Bound">w≺i</a><a id="1681" class="Symbol">)))</a> <a id="1685" class="Keyword">where</a>
    <a id="1695" href="Codata.Segments.html#1695" class="Function">unfold′</a> <a id="1703" class="Symbol">:</a> <a id="1705" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1709" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1713" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="1715" class="Symbol">→</a> <a id="1717" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1719" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="1721" class="Symbol">→</a> <a id="1723" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="1731" href="Codata.Segments.html#1667" class="Bound">A</a> <a id="1733" href="Codata.Segments.html#161" class="Generalizable">i</a>
    <a id="1739" href="Codata.Segments.html#1739" class="Function">unfold″</a> <a id="1747" class="Symbol">:</a> <a id="1749" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1753" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1757" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="1759" class="Symbol">→</a> <a id="1761" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1763" href="Codata.Segments.html#1763" class="Bound">w</a> <a id="1765" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1767" class="Symbol">(</a><a id="1768" href="Codata.Segments.html#1763" class="Bound">w</a> <a id="1770" href="Path.html#524" class="Function Operator">≢</a> <a id="1772" href="Algebra.html#1444" class="Function">ε</a><a id="1773" class="Symbol">)</a> <a id="1775" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1777" class="Symbol">((</a><a id="1779" href="Codata.Segments.html#1779" class="Bound">w≺i</a> <a id="1783" class="Symbol">:</a> <a id="1785" href="Codata.Segments.html#1763" class="Bound">w</a> <a id="1787" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1789" href="Codata.Segments.html#161" class="Generalizable">i</a><a id="1790" class="Symbol">)</a> <a id="1792" class="Symbol">→</a> <a id="1794" href="Codata.Segments.html#1667" class="Bound">A</a> <a id="1796" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1798" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1800" class="Symbol">(</a><a id="1801" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1805" href="Codata.Segments.html#1779" class="Bound">w≺i</a><a id="1808" class="Symbol">))</a> <a id="1811" class="Symbol">→</a> <a id="1813" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="1821" href="Codata.Segments.html#1667" class="Bound">A</a> <a id="1823" href="Codata.Segments.html#161" class="Generalizable">i</a>
    <a id="1829" href="Codata.Segments.html#1829" class="Function">unfold‴</a> <a id="1837" class="Symbol">:</a> <a id="1839" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1843" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1847" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="1849" class="Symbol">→</a> <a id="1851" class="Symbol">(</a><a id="1852" href="Codata.Segments.html#1852" class="Bound">j≺i</a> <a id="1856" class="Symbol">:</a> <a id="1858" href="Codata.Segments.html#163" class="Generalizable">j</a> <a id="1860" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1862" href="Codata.Segments.html#161" class="Generalizable">i</a><a id="1863" class="Symbol">)</a> <a id="1865" class="Symbol">→</a> <a id="1867" href="Codata.Segments.html#163" class="Generalizable">j</a> <a id="1869" href="Path.html#524" class="Function Operator">≢</a> <a id="1871" href="Algebra.html#1444" class="Function">ε</a> <a id="1873" class="Symbol">→</a> <a id="1875" href="Codata.Segments.html#1599" class="Bound">B</a> <a id="1877" class="Symbol">(</a><a id="1878" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1882" href="Codata.Segments.html#1852" class="Bound">j≺i</a><a id="1885" class="Symbol">)</a> <a id="1887" class="Symbol">→</a> <a id="1889" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="1897" href="Codata.Segments.html#1667" class="Bound">A</a> <a id="1899" class="Symbol">(</a><a id="1900" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1904" href="Codata.Segments.html#1852" class="Bound">j≺i</a><a id="1907" class="Symbol">)</a>

    <a id="1914" href="Codata.Segments.html#1829" class="Function">unfold‴</a> <a id="1922" class="Symbol">(</a><a id="1923" href="WellFounded.html#161" class="InductiveConstructor">acc</a> <a id="1927" href="Codata.Segments.html#1927" class="Bound">wf</a><a id="1929" class="Symbol">)</a> <a id="1931" class="Symbol">(</a><a id="1932" href="Codata.Segments.html#1932" class="Bound">k</a> <a id="1934" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1936" href="Codata.Segments.html#1936" class="Bound">i≡j∙k</a> <a id="1942" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1944" href="Codata.Segments.html#1944" class="Bound">k≢ε</a><a id="1947" class="Symbol">)</a> <a id="1949" href="Codata.Segments.html#1949" class="Bound">j≢ε</a> <a id="1953" href="Codata.Segments.html#1953" class="Bound">xs</a> <a id="1956" class="Symbol">=</a> <a id="1958" href="Codata.Segments.html#1695" class="Function">unfold′</a> <a id="1966" class="Symbol">(</a><a id="1967" href="Codata.Segments.html#1927" class="Bound">wf</a> <a id="1970" class="Symbol">_</a> <a id="1972" class="Symbol">((_</a> <a id="1976" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1978" href="Codata.Segments.html#1936" class="Bound">i≡j∙k</a> <a id="1984" href="Cubical.Foundations.Id.html#737" class="Function Operator">;</a> <a id="1986" href="Algebra.html#2901" class="Function">comm</a> <a id="1991" class="Symbol">_</a> <a id="1993" class="Symbol">_</a> <a id="1995" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1997" href="Codata.Segments.html#1949" class="Bound">j≢ε</a><a id="2000" class="Symbol">)))</a> <a id="2004" href="Codata.Segments.html#1953" class="Bound">xs</a>

    <a id="2012" href="Codata.Segments.html#1739" class="Function">unfold″</a> <a id="2020" href="Codata.Segments.html#2020" class="Bound">a</a> <a id="2022" class="Symbol">(</a><a id="2023" href="Codata.Segments.html#2023" class="Bound">w</a> <a id="2025" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2027" href="Codata.Segments.html#2027" class="Bound">w≢ε</a> <a id="2031" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2033" href="Codata.Segments.html#2033" class="Bound">xs′</a><a id="2036" class="Symbol">)</a> <a id="2038" class="Symbol">=</a> <a id="2040" href="Codata.Segments.html#2023" class="Bound">w</a> <a id="2042" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="2044" class="Symbol">λ</a> <a id="2046" href="Codata.Segments.html#2046" class="Bound">w≺i</a> <a id="2050" class="Symbol">→</a> <a id="2052" href="Data.Sigma.Base.html#1309" class="Function">map₂</a> <a id="2057" class="Symbol">(</a><a id="2058" href="Codata.Segments.html#1829" class="Function">unfold‴</a> <a id="2066" href="Codata.Segments.html#2020" class="Bound">a</a> <a id="2068" href="Codata.Segments.html#2046" class="Bound">w≺i</a> <a id="2072" href="Codata.Segments.html#2027" class="Bound">w≢ε</a><a id="2075" class="Symbol">)</a> <a id="2077" class="Symbol">(</a><a id="2078" href="Codata.Segments.html#2033" class="Bound">xs′</a> <a id="2082" href="Codata.Segments.html#2046" class="Bound">w≺i</a><a id="2085" class="Symbol">)</a>

    <a id="2092" href="Codata.Segments.html#1695" class="Function">unfold′</a> <a id="2100" href="Codata.Segments.html#2100" class="Bound">a</a> <a id="2102" href="Codata.Segments.html#2102" class="Bound">xs</a> <a id="2105" class="Symbol">=</a> <a id="2107" href="Codata.Segments.html#1739" class="Function">unfold″</a> <a id="2115" href="Codata.Segments.html#2100" class="Bound">a</a> <a id="2117" class="Symbol">(</a><a id="2118" href="Codata.Segments.html#1616" class="Bound">ϕ</a> <a id="2120" href="Codata.Segments.html#2102" class="Bound">xs</a><a id="2122" class="Symbol">)</a>

<a id="unfold"></a><a id="2125" href="Codata.Segments.html#2125" class="Function">unfold</a> <a id="2132" class="Symbol">:</a> <a id="2134" class="Symbol">(</a><a id="2135" href="Codata.Segments.html#2135" class="Bound">fdc</a> <a id="2139" class="Symbol">:</a> <a id="2141" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="2153" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="2156" class="Symbol">)</a> <a id="2158" class="Symbol">(</a><a id="2159" href="Codata.Segments.html#2159" class="Bound">B</a> <a id="2161" class="Symbol">:</a> <a id="2163" href="Algebra.html#1401" class="Function">𝑆</a> <a id="2165" class="Symbol">→</a> <a id="2167" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="2172" href="Level.html#241" class="Generalizable">b</a><a id="2173" class="Symbol">)</a> <a id="2175" class="Symbol">(</a><a id="2176" href="Codata.Segments.html#2176" class="Bound">ϕ</a> <a id="2178" class="Symbol">:</a> <a id="2180" class="Symbol">∀</a> <a id="2182" class="Symbol">{</a><a id="2183" href="Codata.Segments.html#2183" class="Bound">i</a><a id="2184" class="Symbol">}</a> <a id="2186" class="Symbol">→</a> <a id="2188" href="Codata.Segments.html#2159" class="Bound">B</a> <a id="2190" href="Codata.Segments.html#2183" class="Bound">i</a> <a id="2192" class="Symbol">→</a> <a id="2194" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="2196" href="Codata.Segments.html#2196" class="Bound">w</a> <a id="2198" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="2200" class="Symbol">(</a><a id="2201" href="Codata.Segments.html#2196" class="Bound">w</a> <a id="2203" href="Path.html#524" class="Function Operator">≢</a> <a id="2205" href="Algebra.html#1444" class="Function">ε</a><a id="2206" class="Symbol">)</a> <a id="2208" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="2210" class="Symbol">((</a><a id="2212" href="Codata.Segments.html#2212" class="Bound">w≺i</a> <a id="2216" class="Symbol">:</a> <a id="2218" href="Codata.Segments.html#2196" class="Bound">w</a> <a id="2220" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="2222" href="Codata.Segments.html#2183" class="Bound">i</a><a id="2223" class="Symbol">)</a> <a id="2225" class="Symbol">→</a> <a id="2227" href="Level.html#255" class="Generalizable">A</a> <a id="2229" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="2231" href="Codata.Segments.html#2159" class="Bound">B</a> <a id="2233" class="Symbol">(</a><a id="2234" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="2238" href="Codata.Segments.html#2212" class="Bound">w≺i</a><a id="2241" class="Symbol">)))</a> <a id="2245" class="Symbol">→</a> <a id="2247" class="Symbol">(∀</a> <a id="2250" class="Symbol">{</a><a id="2251" href="Codata.Segments.html#2251" class="Bound">i</a><a id="2252" class="Symbol">}</a> <a id="2254" class="Symbol">→</a> <a id="2256" href="Codata.Segments.html#2159" class="Bound">B</a> <a id="2258" href="Codata.Segments.html#2251" class="Bound">i</a><a id="2259" class="Symbol">)</a> <a id="2261" class="Symbol">→</a> <a id="2263" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="2270" href="Level.html#255" class="Generalizable">A</a>
<a id="2272" href="Codata.Segments.html#2125" class="Function">unfold</a> <a id="2279" href="Codata.Segments.html#2279" class="Bound">fdc</a> <a id="2283" href="Codata.Segments.html#2283" class="Bound">B</a> <a id="2285" href="Codata.Segments.html#2285" class="Bound">ϕ</a> <a id="2287" href="Codata.Segments.html#2287" class="Bound">xs</a> <a id="2290" class="Symbol">{</a><a id="2291" href="Codata.Segments.html#2291" class="Bound">i</a><a id="2292" class="Symbol">}</a> <a id="2294" class="Symbol">=</a> <a id="2296" href="Codata.Segments.html#1695" class="Function">unfold′</a> <a id="2304" href="Codata.Segments.html#2283" class="Bound">B</a> <a id="2306" href="Codata.Segments.html#2285" class="Bound">ϕ</a> <a id="2308" class="Symbol">(</a><a id="2309" href="Codata.Segments.html#2279" class="Bound">fdc</a> <a id="2313" href="Codata.Segments.html#2291" class="Bound">i</a><a id="2314" class="Symbol">)</a> <a id="2316" href="Codata.Segments.html#2287" class="Bound">xs</a>

<a id="2320" class="Comment">-- The definition of the list lets us construct an infinite colist as long as</a>
<a id="2398" class="Comment">-- every entry uses some &quot;fuel&quot;.</a>
<a id="repeat"></a><a id="2431" href="Codata.Segments.html#2431" class="Function">repeat</a> <a id="2438" class="Symbol">:</a> <a id="2440" class="Symbol">(</a><a id="2441" href="Codata.Segments.html#2441" class="Bound">fdc</a> <a id="2445" class="Symbol">:</a> <a id="2447" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="2459" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="2462" class="Symbol">)</a> <a id="2464" class="Symbol">(</a><a id="2465" href="Codata.Segments.html#2465" class="Bound">s</a> <a id="2467" class="Symbol">:</a> <a id="2469" href="Algebra.html#1401" class="Function">𝑆</a><a id="2470" class="Symbol">)</a> <a id="2472" class="Symbol">(</a><a id="2473" href="Codata.Segments.html#2473" class="Bound">s≢ε</a> <a id="2477" class="Symbol">:</a> <a id="2479" href="Codata.Segments.html#2465" class="Bound">s</a> <a id="2481" href="Path.html#524" class="Function Operator">≢</a> <a id="2483" href="Algebra.html#1444" class="Function">ε</a><a id="2484" class="Symbol">)</a> <a id="2486" class="Symbol">(</a><a id="2487" href="Codata.Segments.html#2487" class="Bound">x</a> <a id="2489" class="Symbol">:</a> <a id="2491" href="Level.html#255" class="Generalizable">A</a><a id="2492" class="Symbol">)</a> <a id="2494" class="Symbol">→</a> <a id="2496" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="2503" href="Level.html#255" class="Generalizable">A</a>
<a id="2505" href="Codata.Segments.html#2431" class="Function">repeat</a> <a id="2512" href="Codata.Segments.html#2512" class="Bound">fdc</a> <a id="2516" href="Codata.Segments.html#2516" class="Bound">s</a> <a id="2518" href="Codata.Segments.html#2518" class="Bound">s≢ε</a> <a id="2522" href="Codata.Segments.html#2522" class="Bound">x</a> <a id="2524" class="Symbol">=</a> <a id="2526" href="Codata.Segments.html#2125" class="Function">unfold</a> <a id="2533" href="Codata.Segments.html#2512" class="Bound">fdc</a> <a id="2537" class="Symbol">(</a><a id="2538" href="Function.html#589" class="Function">const</a> <a id="2544" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="2545" class="Symbol">)</a> <a id="2547" class="Symbol">(λ</a> <a id="2550" href="Codata.Segments.html#2550" class="Bound">_</a> <a id="2552" class="Symbol">→</a> <a id="2554" href="Codata.Segments.html#2516" class="Bound">s</a> <a id="2556" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2558" href="Codata.Segments.html#2518" class="Bound">s≢ε</a> <a id="2562" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2564" href="Function.html#589" class="Function">const</a> <a id="2570" class="Symbol">(</a><a id="2571" href="Codata.Segments.html#2522" class="Bound">x</a> <a id="2573" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2575" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2577" class="Symbol">))</a> <a id="2580" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="2584" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2665" class="Comment">-- Manipulating colists</a>
<a id="2689" class="Comment">--------------------------------------------------------------------------------</a>
<a id="map"></a><a id="2770" href="Codata.Segments.html#2770" class="Function">map</a> <a id="2774" class="Symbol">:</a> <a id="2776" class="Symbol">(</a><a id="2777" href="Level.html#255" class="Generalizable">A</a> <a id="2779" class="Symbol">→</a> <a id="2781" href="Level.html#269" class="Generalizable">B</a><a id="2782" class="Symbol">)</a> <a id="2784" class="Symbol">→</a> <a id="2786" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="2794" href="Level.html#255" class="Generalizable">A</a> <a id="2796" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="2798" class="Symbol">→</a> <a id="2800" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="2808" href="Level.html#269" class="Generalizable">B</a> <a id="2810" href="Codata.Segments.html#161" class="Generalizable">i</a>
<a id="2812" href="Codata.Segments.html#2770" class="Function">map</a> <a id="2816" href="Codata.Segments.html#2816" class="Bound">f</a> <a id="2818" class="Symbol">(</a><a id="2819" href="Codata.Segments.html#2819" class="Bound">w</a> <a id="2821" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="2823" href="Codata.Segments.html#2823" class="Bound">xs</a><a id="2825" class="Symbol">)</a> <a id="2827" class="Symbol">=</a> <a id="2829" href="Codata.Segments.html#2819" class="Bound">w</a> <a id="2831" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="2833" class="Symbol">λ</a> <a id="2835" href="Codata.Segments.html#2835" class="Bound">w≺i</a> <a id="2839" class="Symbol">→</a> <a id="2841" href="Function.html#1099" class="Function Operator">case</a> <a id="2846" href="Codata.Segments.html#2823" class="Bound">xs</a> <a id="2849" href="Codata.Segments.html#2835" class="Bound">w≺i</a> <a id="2853" href="Function.html#1099" class="Function Operator">of</a> <a id="2856" class="Symbol">λ</a> <a id="2858" class="Symbol">{</a> <a id="2860" class="Symbol">(</a><a id="2861" href="Codata.Segments.html#2861" class="Bound">y</a> <a id="2863" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2865" href="Codata.Segments.html#2865" class="Bound">ys</a><a id="2867" class="Symbol">)</a> <a id="2869" class="Symbol">→</a> <a id="2871" href="Codata.Segments.html#2816" class="Bound">f</a> <a id="2873" href="Codata.Segments.html#2861" class="Bound">y</a> <a id="2875" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2877" href="Codata.Segments.html#2770" class="Function">map</a> <a id="2881" href="Codata.Segments.html#2816" class="Bound">f</a> <a id="2883" href="Codata.Segments.html#2865" class="Bound">ys</a> <a id="2886" class="Symbol">}</a>

<a id="2889" class="Keyword">open</a> <a id="2894" class="Keyword">import</a> <a id="2901" href="Data.List.html" class="Module">Data.List</a> <a id="2911" class="Keyword">using</a> <a id="2917" class="Symbol">(</a><a id="2918" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="2922" class="Symbol">;</a> <a id="2924" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="2927" class="Symbol">;</a> <a id="2929" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2931" class="Symbol">)</a>

<a id="take′"></a><a id="2934" href="Codata.Segments.html#2934" class="Function">take′</a> <a id="2940" class="Symbol">:</a> <a id="2942" class="Symbol">∀</a> <a id="2944" href="Codata.Segments.html#2944" class="Bound">i</a> <a id="2946" class="Symbol">→</a> <a id="2948" href="Codata.Segments.html#538" class="Datatype">Colist′</a> <a id="2956" href="Level.html#255" class="Generalizable">A</a> <a id="2958" href="Codata.Segments.html#2944" class="Bound">i</a> <a id="2960" class="Symbol">→</a> <a id="2962" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2967" href="Level.html#255" class="Generalizable">A</a>
<a id="2969" href="Codata.Segments.html#2934" class="Function">take′</a> <a id="2975" href="Codata.Segments.html#2975" class="Bound">i</a> <a id="2977" class="Symbol">(</a><a id="2978" href="Codata.Segments.html#2978" class="Bound">w</a> <a id="2980" href="Codata.Segments.html#595" class="InductiveConstructor Operator">◃</a> <a id="2982" href="Codata.Segments.html#2982" class="Bound">xs</a><a id="2984" class="Symbol">)</a> <a id="2986" class="Keyword">with</a> <a id="2991" href="Codata.Segments.html#2978" class="Bound">w</a> <a id="2993" href="Relation.Binary.html#2987" class="Function Operator">&lt;?</a> <a id="2996" href="Codata.Segments.html#2975" class="Bound">i</a>
<a id="2998" class="Symbol">...</a> <a id="3002" class="Symbol">|</a> <a id="3004" href="Relation.Nullary.Decidable.html#433" class="InductiveConstructor">no</a> <a id="3007" class="Symbol">_</a> <a id="3009" class="Symbol">=</a> <a id="3011" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="3014" class="Symbol">...</a> <a id="3018" class="Symbol">|</a> <a id="3020" href="Relation.Nullary.Decidable.html#399" class="InductiveConstructor">yes</a> <a id="3024" href="Codata.Segments.html#3024" class="Bound">w&lt;i</a> <a id="3028" class="Keyword">with</a> <a id="3033" class="Bound">xs</a> <a id="3036" class="Symbol">(</a><a id="3037" href="Algebra.Monus.html#4313" class="Function">&lt;⇒≺</a> <a id="3041" class="Symbol">_</a> <a id="3043" class="Symbol">_</a> <a id="3045" href="Codata.Segments.html#3024" class="Bound">w&lt;i</a><a id="3048" class="Symbol">)</a>
<a id="3050" class="Symbol">...</a> <a id="3054" class="Symbol">|</a> <a id="3056" href="Codata.Segments.html#3056" class="Bound">y</a> <a id="3058" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3060" href="Codata.Segments.html#3060" class="Bound">ys</a> <a id="3063" class="Symbol">=</a> <a id="3065" href="Codata.Segments.html#3056" class="Bound">y</a> <a id="3067" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3069" href="Codata.Segments.html#2934" class="Function">take′</a> <a id="3075" class="Symbol">_</a> <a id="3077" href="Codata.Segments.html#3060" class="Bound">ys</a>

<a id="take"></a><a id="3081" href="Codata.Segments.html#3081" class="Function">take</a> <a id="3086" class="Symbol">:</a> <a id="3088" href="Algebra.html#1401" class="Function">𝑆</a> <a id="3090" class="Symbol">→</a> <a id="3092" href="Codata.Segments.html#744" class="Function">Colist</a> <a id="3099" href="Level.html#255" class="Generalizable">A</a> <a id="3101" class="Symbol">→</a> <a id="3103" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3108" href="Level.html#255" class="Generalizable">A</a>
<a id="3110" href="Codata.Segments.html#3081" class="Function">take</a> <a id="3115" href="Codata.Segments.html#3115" class="Bound">x</a> <a id="3117" href="Codata.Segments.html#3117" class="Bound">xs</a> <a id="3120" class="Symbol">=</a> <a id="3122" href="Codata.Segments.html#2934" class="Function">take′</a> <a id="3128" href="Codata.Segments.html#3115" class="Bound">x</a> <a id="3130" href="Codata.Segments.html#3117" class="Bound">xs</a>
</pre></body></html>