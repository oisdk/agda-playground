<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Segments</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a>
<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Algebra.html" class="Module">Algebra</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Algebra.Monus.html" class="Module">Algebra.Monus</a>

<a id="68" class="Keyword">module</a> <a id="75" href="Codata.Segments.html" class="Module">Codata.Segments</a>
  <a id="93" class="Symbol">{</a><a id="94" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="95" class="Symbol">}</a>
  <a id="99" class="Symbol">(</a><a id="100" href="Codata.Segments.html#100" class="Bound">mon</a> <a id="104" class="Symbol">:</a> <a id="106" href="Algebra.Monus.html#9610" class="Record">CTMAPOM</a> <a id="114" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="115" class="Symbol">)</a>
  <a id="119" class="Keyword">where</a>

<a id="126" class="Keyword">open</a> <a id="131" href="Algebra.Monus.html#9610" class="Module">CTMAPOM</a> <a id="139" href="Codata.Segments.html#100" class="Bound">mon</a>

<a id="144" class="Comment">-- This is a type for coinductive lists, with a &quot;sized types&quot; parameter which</a>
<a id="222" class="Comment">-- can be an arbitrary monus.</a>
<a id="252" class="Keyword">infixr</a> <a id="259" class="Number">5</a> <a id="261" href="Codata.Segments.html#327" class="InductiveConstructor Operator">_◃_</a>
<a id="265" class="Keyword">data</a> <a id="Colist′"></a><a id="270" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="278" class="Symbol">{</a><a id="279" href="Codata.Segments.html#279" class="Bound">a</a><a id="280" class="Symbol">}</a> <a id="282" class="Symbol">(</a><a id="283" href="Codata.Segments.html#283" class="Bound">A</a> <a id="285" class="Symbol">:</a> <a id="287" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="292" href="Codata.Segments.html#279" class="Bound">a</a><a id="293" class="Symbol">)</a> <a id="295" class="Symbol">(</a><a id="296" href="Codata.Segments.html#296" class="Bound">i</a> <a id="298" class="Symbol">:</a> <a id="300" href="Algebra.html#1401" class="Function">𝑆</a><a id="301" class="Symbol">)</a> <a id="303" class="Symbol">:</a> <a id="305" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="310" class="Symbol">(</a><a id="311" href="Codata.Segments.html#279" class="Bound">a</a> <a id="313" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="316" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="317" class="Symbol">)</a> <a id="319" class="Keyword">where</a>
  <a id="Colist′._◃_"></a><a id="327" href="Codata.Segments.html#327" class="InductiveConstructor Operator">_◃_</a> <a id="331" class="Symbol">:</a> <a id="333" class="Symbol">∀</a> <a id="335" href="Codata.Segments.html#335" class="Bound">w</a> <a id="337" class="Symbol">→</a> <a id="339" class="Symbol">((</a><a id="341" href="Codata.Segments.html#341" class="Bound">w≺i</a> <a id="345" class="Symbol">:</a> <a id="347" href="Codata.Segments.html#335" class="Bound">w</a> <a id="349" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="351" href="Codata.Segments.html#296" class="Bound">i</a><a id="352" class="Symbol">)</a> <a id="354" class="Symbol">→</a> <a id="356" href="Codata.Segments.html#283" class="Bound">A</a> <a id="358" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="360" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="368" href="Codata.Segments.html#283" class="Bound">A</a> <a id="370" class="Symbol">(</a><a id="371" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="375" href="Codata.Segments.html#341" class="Bound">w≺i</a><a id="378" class="Symbol">))</a> <a id="381" class="Symbol">→</a> <a id="383" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="391" href="Codata.Segments.html#283" class="Bound">A</a> <a id="393" href="Codata.Segments.html#296" class="Bound">i</a>
<a id="395" class="Comment">--              ^^^^^^^^^^^^</a>
<a id="424" class="Comment">--              This is a proposition, by the way.</a>

<a id="476" class="Comment">-- The monus parameter tells you how much you can inspect into the list.</a>
<a id="Colist"></a><a id="549" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="556" class="Symbol">:</a> <a id="558" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="563" href="Level.html#239" class="Generalizable">a</a> <a id="565" class="Symbol">→</a> <a id="567" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="572" class="Symbol">(</a><a id="573" href="Level.html#239" class="Generalizable">a</a> <a id="575" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="578" href="Codata.Segments.html#94" class="Bound">ℓ</a><a id="579" class="Symbol">)</a>
<a id="581" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="588" href="Codata.Segments.html#588" class="Bound">A</a> <a id="590" class="Symbol">=</a> <a id="592" class="Symbol">∀</a> <a id="594" class="Symbol">{</a><a id="595" href="Codata.Segments.html#595" class="Bound">i</a><a id="596" class="Symbol">}</a> <a id="598" class="Symbol">→</a> <a id="600" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="608" href="Codata.Segments.html#588" class="Bound">A</a> <a id="610" href="Codata.Segments.html#595" class="Bound">i</a>

<a id="613" class="Keyword">private</a>
  <a id="623" class="Keyword">variable</a>
    <a id="636" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="638" href="Codata.Segments.html#638" class="Generalizable">j</a> <a id="640" class="Symbol">:</a> <a id="642" href="Algebra.html#1401" class="Function">𝑆</a>

<a id="645" class="Comment">--------------------------------------------------------------------------------</a>
<a id="726" class="Comment">-- Finite colists</a>
<a id="744" class="Comment">--------------------------------------------------------------------------------</a>

<a id="826" class="Comment">-- empty list</a>
<a id="empty"></a><a id="840" href="Codata.Segments.html#840" class="Function">empty</a> <a id="846" class="Symbol">:</a> <a id="848" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="855" href="Level.html#255" class="Generalizable">A</a>
<a id="857" href="Codata.Segments.html#840" class="Function">empty</a> <a id="863" class="Symbol">{</a><a id="864" class="Argument">i</a> <a id="866" class="Symbol">=</a> <a id="868" href="Codata.Segments.html#868" class="Bound">i</a><a id="869" class="Symbol">}</a> <a id="871" class="Symbol">=</a> <a id="873" href="Codata.Segments.html#868" class="Bound">i</a> <a id="875" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="877" class="Symbol">λ</a> <a id="879" href="Codata.Segments.html#879" class="Bound">i≺i</a> <a id="883" class="Symbol">→</a> <a id="885" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="892" class="Symbol">(</a><a id="893" href="Algebra.Monus.html#9439" class="Function">≺-irrefl</a> <a id="902" href="Codata.Segments.html#879" class="Bound">i≺i</a><a id="905" class="Symbol">)</a>

<a id="_◃_∷_"></a><a id="908" href="Codata.Segments.html#908" class="Function Operator">_◃_∷_</a> <a id="914" class="Symbol">:</a> <a id="916" href="Algebra.html#1401" class="Function">𝑆</a> <a id="918" class="Symbol">→</a> <a id="920" href="Level.html#255" class="Generalizable">A</a> <a id="922" class="Symbol">→</a> <a id="924" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="931" href="Level.html#255" class="Generalizable">A</a> <a id="933" class="Symbol">→</a> <a id="935" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="942" href="Level.html#255" class="Generalizable">A</a>
<a id="944" class="Symbol">(</a><a id="945" href="Codata.Segments.html#945" class="Bound">w</a> <a id="947" href="Codata.Segments.html#908" class="Function Operator">◃</a> <a id="949" href="Codata.Segments.html#949" class="Bound">x</a> <a id="951" href="Codata.Segments.html#908" class="Function Operator">∷</a> <a id="953" href="Codata.Segments.html#953" class="Bound">xs</a><a id="955" class="Symbol">)</a> <a id="957" class="Symbol">{</a><a id="958" href="Codata.Segments.html#958" class="Bound">i</a><a id="959" class="Symbol">}</a> <a id="961" class="Symbol">=</a> <a id="963" href="Codata.Segments.html#945" class="Bound">w</a> <a id="965" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="967" class="Symbol">λ</a> <a id="969" href="Codata.Segments.html#969" class="Bound">w≺i</a> <a id="973" class="Symbol">→</a> <a id="975" href="Codata.Segments.html#949" class="Bound">x</a> <a id="977" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="979" href="Codata.Segments.html#953" class="Bound">xs</a>

<a id="cons′"></a><a id="983" href="Codata.Segments.html#983" class="Function">cons′</a> <a id="989" class="Symbol">:</a> <a id="991" class="Symbol">∀</a> <a id="993" href="Codata.Segments.html#993" class="Bound">w</a> <a id="995" class="Symbol">→</a> <a id="997" href="Level.html#255" class="Generalizable">A</a> <a id="999" class="Symbol">→</a> <a id="1001" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1009" href="Level.html#255" class="Generalizable">A</a> <a id="1011" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1023" href="Level.html#255" class="Generalizable">A</a> <a id="1025" class="Symbol">(</a><a id="1026" href="Codata.Segments.html#993" class="Bound">w</a> <a id="1028" href="Algebra.html#1421" class="Function Operator">∙</a> <a id="1030" href="Codata.Segments.html#636" class="Generalizable">i</a><a id="1031" class="Symbol">)</a>
<a id="1033" href="Codata.Segments.html#983" class="Function">cons′</a> <a id="1039" href="Codata.Segments.html#1039" class="Bound">w</a> <a id="1041" href="Codata.Segments.html#1041" class="Bound">x</a> <a id="1043" href="Codata.Segments.html#1043" class="Bound">xs</a> <a id="1046" class="Symbol">=</a> <a id="1048" href="Codata.Segments.html#1039" class="Bound">w</a> <a id="1050" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1052" class="Symbol">λ</a> <a id="1054" class="Symbol">{</a> <a id="1056" class="Symbol">(</a><a id="1057" href="Codata.Segments.html#1057" class="Bound">k</a> <a id="1059" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1061" href="Codata.Segments.html#1061" class="Bound">w∙i≡w∙k</a> <a id="1069" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1071" href="Codata.Segments.html#1071" class="Bound">k≢ε</a><a id="1074" class="Symbol">)</a> <a id="1076" class="Symbol">→</a> <a id="1078" href="Codata.Segments.html#1041" class="Bound">x</a> <a id="1080" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1082" href="Cubical.Foundations.Prelude.html#7588" class="Function">subst</a> <a id="1088" class="Symbol">(</a><a id="1089" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1097" class="Symbol">_)</a> <a id="1100" class="Symbol">(</a><a id="1101" href="Algebra.Monus.html#6959" class="Function">cancelˡ</a> <a id="1109" href="Codata.Segments.html#1039" class="Bound">w</a> <a id="1111" class="Symbol">_</a> <a id="1113" href="Codata.Segments.html#1057" class="Bound">k</a> <a id="1115" href="Codata.Segments.html#1061" class="Bound">w∙i≡w∙k</a><a id="1122" class="Symbol">)</a> <a id="1124" href="Codata.Segments.html#1043" class="Bound">xs</a> <a id="1127" class="Symbol">}</a>

<a id="1130" class="Comment">-- singleton</a>
<a id="pure"></a><a id="1143" href="Codata.Segments.html#1143" class="Function">pure</a> <a id="1148" class="Symbol">:</a> <a id="1150" href="Level.html#255" class="Generalizable">A</a> <a id="1152" class="Symbol">→</a> <a id="1154" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="1161" href="Level.html#255" class="Generalizable">A</a>
<a id="1163" href="Codata.Segments.html#1143" class="Function">pure</a> <a id="1168" href="Codata.Segments.html#1168" class="Bound">x</a> <a id="1170" class="Symbol">=</a> <a id="1172" href="Algebra.html#1444" class="Function">ε</a> <a id="1174" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1176" class="Symbol">λ</a> <a id="1178" href="Codata.Segments.html#1178" class="Bound">ε≺i</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="Codata.Segments.html#1168" class="Bound">x</a> <a id="1186" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1188" href="Codata.Segments.html#840" class="Function">empty</a>

<a id="replicate"></a><a id="1195" href="Codata.Segments.html#1195" class="Function">replicate</a> <a id="1205" class="Symbol">:</a> <a id="1207" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="Level.html#255" class="Generalizable">A</a> <a id="1213" class="Symbol">→</a> <a id="1215" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="1222" href="Level.html#255" class="Generalizable">A</a>
<a id="1224" href="Codata.Segments.html#1195" class="Function">replicate</a> <a id="1234" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1242" href="Codata.Segments.html#1242" class="Bound">x</a> <a id="1244" class="Symbol">=</a> <a id="1246" href="Codata.Segments.html#840" class="Function">empty</a>
<a id="1252" href="Codata.Segments.html#1195" class="Function">replicate</a> <a id="1262" class="Symbol">(</a><a id="1263" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1267" href="Codata.Segments.html#1267" class="Bound">n</a><a id="1268" class="Symbol">)</a> <a id="1270" href="Codata.Segments.html#1270" class="Bound">x</a> <a id="1272" class="Symbol">=</a> <a id="1274" href="Algebra.html#1444" class="Function">ε</a> <a id="1276" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1278" class="Symbol">λ</a> <a id="1280" href="Codata.Segments.html#1280" class="Bound">ε≺i</a> <a id="1284" class="Symbol">→</a> <a id="1286" href="Codata.Segments.html#1270" class="Bound">x</a> <a id="1288" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1290" href="Codata.Segments.html#1195" class="Function">replicate</a> <a id="1300" href="Codata.Segments.html#1267" class="Bound">n</a> <a id="1302" href="Codata.Segments.html#1270" class="Bound">x</a>

<a id="1305" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1386" class="Comment">-- Infinite colists</a>
<a id="1406" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1488" class="Keyword">module</a> <a id="1495" href="Codata.Segments.html#1495" class="Module">_</a> <a id="1497" class="Symbol">(</a><a id="1498" href="Codata.Segments.html#1498" class="Bound">fdc</a> <a id="1502" class="Symbol">:</a> <a id="1504" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="1516" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="1519" class="Symbol">)</a> <a id="1521" class="Symbol">(</a><a id="1522" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1524" class="Symbol">:</a> <a id="1526" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1528" class="Symbol">→</a> <a id="1530" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1535" href="Level.html#241" class="Generalizable">b</a><a id="1536" class="Symbol">)</a> <a id="1538" class="Keyword">where</a>
  <a id="1546" class="Keyword">module</a> <a id="1553" href="Codata.Segments.html#1553" class="Module">_</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Codata.Segments.html#1556" class="Bound">ϕ</a> <a id="1558" class="Symbol">:</a> <a id="1560" class="Symbol">∀</a> <a id="1562" class="Symbol">{</a><a id="1563" href="Codata.Segments.html#1563" class="Bound">i</a><a id="1564" class="Symbol">}</a> <a id="1566" class="Symbol">→</a> <a id="1568" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1570" href="Codata.Segments.html#1563" class="Bound">i</a> <a id="1572" class="Symbol">→</a> <a id="1574" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1576" href="Codata.Segments.html#1576" class="Bound">w</a> <a id="1578" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1580" class="Symbol">(</a><a id="1581" href="Codata.Segments.html#1576" class="Bound">w</a> <a id="1583" href="Path.html#524" class="Function Operator">≢</a> <a id="1585" href="Algebra.html#1444" class="Function">ε</a><a id="1586" class="Symbol">)</a> <a id="1588" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1590" class="Symbol">((</a><a id="1592" href="Codata.Segments.html#1592" class="Bound">w≺i</a> <a id="1596" class="Symbol">:</a> <a id="1598" href="Codata.Segments.html#1576" class="Bound">w</a> <a id="1600" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1602" href="Codata.Segments.html#1563" class="Bound">i</a><a id="1603" class="Symbol">)</a> <a id="1605" class="Symbol">→</a> <a id="1607" href="Level.html#255" class="Generalizable">A</a> <a id="1609" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1611" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1618" href="Codata.Segments.html#1592" class="Bound">w≺i</a><a id="1621" class="Symbol">)))</a> <a id="1625" class="Keyword">where</a>
    <a id="1635" href="Codata.Segments.html#1635" class="Function">unfold′</a> <a id="1643" class="Symbol">:</a> <a id="1645" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1649" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1653" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="1655" class="Symbol">→</a> <a id="1657" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1659" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="1661" class="Symbol">→</a> <a id="1663" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1671" href="Codata.Segments.html#1607" class="Bound">A</a> <a id="1673" href="Codata.Segments.html#636" class="Generalizable">i</a>
    <a id="1679" href="Codata.Segments.html#1679" class="Function">unfold″</a> <a id="1687" class="Symbol">:</a> <a id="1689" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1693" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1697" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="1699" class="Symbol">→</a> <a id="1701" href="Data.Sigma.Base.html#173" class="Function">∃</a> <a id="1703" href="Codata.Segments.html#1703" class="Bound">w</a> <a id="1705" href="Data.Sigma.Base.html#173" class="Function">×</a> <a id="1707" class="Symbol">(</a><a id="1708" href="Codata.Segments.html#1703" class="Bound">w</a> <a id="1710" href="Path.html#524" class="Function Operator">≢</a> <a id="1712" href="Algebra.html#1444" class="Function">ε</a><a id="1713" class="Symbol">)</a> <a id="1715" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1717" class="Symbol">((</a><a id="1719" href="Codata.Segments.html#1719" class="Bound">w≺i</a> <a id="1723" class="Symbol">:</a> <a id="1725" href="Codata.Segments.html#1703" class="Bound">w</a> <a id="1727" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1729" href="Codata.Segments.html#636" class="Generalizable">i</a><a id="1730" class="Symbol">)</a> <a id="1732" class="Symbol">→</a> <a id="1734" href="Codata.Segments.html#1607" class="Bound">A</a> <a id="1736" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="1738" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1740" class="Symbol">(</a><a id="1741" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1745" href="Codata.Segments.html#1719" class="Bound">w≺i</a><a id="1748" class="Symbol">))</a> <a id="1751" class="Symbol">→</a> <a id="1753" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1761" href="Codata.Segments.html#1607" class="Bound">A</a> <a id="1763" href="Codata.Segments.html#636" class="Generalizable">i</a>
    <a id="1769" href="Codata.Segments.html#1769" class="Function">unfold‴</a> <a id="1777" class="Symbol">:</a> <a id="1779" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1783" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a> <a id="1787" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="1789" class="Symbol">→</a> <a id="1791" class="Symbol">(</a><a id="1792" href="Codata.Segments.html#1792" class="Bound">j≺i</a> <a id="1796" class="Symbol">:</a> <a id="1798" href="Codata.Segments.html#638" class="Generalizable">j</a> <a id="1800" href="Algebra.Monus.html#2462" class="Function Operator">≺</a> <a id="1802" href="Codata.Segments.html#636" class="Generalizable">i</a><a id="1803" class="Symbol">)</a> <a id="1805" class="Symbol">→</a> <a id="1807" href="Codata.Segments.html#638" class="Generalizable">j</a> <a id="1809" href="Path.html#524" class="Function Operator">≢</a> <a id="1811" href="Algebra.html#1444" class="Function">ε</a> <a id="1813" class="Symbol">→</a> <a id="1815" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="1817" class="Symbol">(</a><a id="1818" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1822" href="Codata.Segments.html#1792" class="Bound">j≺i</a><a id="1825" class="Symbol">)</a> <a id="1827" class="Symbol">→</a> <a id="1829" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="1837" href="Codata.Segments.html#1607" class="Bound">A</a> <a id="1839" class="Symbol">(</a><a id="1840" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1844" href="Codata.Segments.html#1792" class="Bound">j≺i</a><a id="1847" class="Symbol">)</a>

    <a id="1854" href="Codata.Segments.html#1769" class="Function">unfold‴</a> <a id="1862" class="Symbol">(</a><a id="1863" href="WellFounded.html#161" class="InductiveConstructor">acc</a> <a id="1867" href="Codata.Segments.html#1867" class="Bound">wf</a><a id="1869" class="Symbol">)</a> <a id="1871" class="Symbol">(</a><a id="1872" href="Codata.Segments.html#1872" class="Bound">k</a> <a id="1874" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1876" href="Codata.Segments.html#1876" class="Bound">i≡j∙k</a> <a id="1882" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1884" href="Codata.Segments.html#1884" class="Bound">k≢ε</a><a id="1887" class="Symbol">)</a> <a id="1889" href="Codata.Segments.html#1889" class="Bound">j≢ε</a> <a id="1893" href="Codata.Segments.html#1893" class="Bound">xs</a> <a id="1896" class="Symbol">=</a> <a id="1898" href="Codata.Segments.html#1635" class="Function">unfold′</a> <a id="1906" class="Symbol">(</a><a id="1907" href="Codata.Segments.html#1867" class="Bound">wf</a> <a id="1910" class="Symbol">_</a> <a id="1912" class="Symbol">((_</a> <a id="1916" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1918" href="Codata.Segments.html#1876" class="Bound">i≡j∙k</a> <a id="1924" href="Cubical.Foundations.Id.html#737" class="Function Operator">;</a> <a id="1926" href="Algebra.html#2901" class="Function">comm</a> <a id="1931" class="Symbol">_</a> <a id="1933" class="Symbol">_</a> <a id="1935" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1937" href="Codata.Segments.html#1889" class="Bound">j≢ε</a><a id="1940" class="Symbol">)))</a> <a id="1944" href="Codata.Segments.html#1893" class="Bound">xs</a>

    <a id="1952" href="Codata.Segments.html#1679" class="Function">unfold″</a> <a id="1960" href="Codata.Segments.html#1960" class="Bound">a</a> <a id="1962" class="Symbol">(</a><a id="1963" href="Codata.Segments.html#1963" class="Bound">w</a> <a id="1965" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1967" href="Codata.Segments.html#1967" class="Bound">w≢ε</a> <a id="1971" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1973" href="Codata.Segments.html#1973" class="Bound">xs′</a><a id="1976" class="Symbol">)</a> <a id="1978" class="Symbol">=</a> <a id="1980" href="Codata.Segments.html#1963" class="Bound">w</a> <a id="1982" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="1984" class="Symbol">λ</a> <a id="1986" href="Codata.Segments.html#1986" class="Bound">w≺i</a> <a id="1990" class="Symbol">→</a> <a id="1992" href="Data.Sigma.Base.html#1204" class="Function">map₂</a> <a id="1997" class="Symbol">(</a><a id="1998" href="Codata.Segments.html#1769" class="Function">unfold‴</a> <a id="2006" href="Codata.Segments.html#1960" class="Bound">a</a> <a id="2008" href="Codata.Segments.html#1986" class="Bound">w≺i</a> <a id="2012" href="Codata.Segments.html#1967" class="Bound">w≢ε</a><a id="2015" class="Symbol">)</a> <a id="2017" class="Symbol">(</a><a id="2018" href="Codata.Segments.html#1973" class="Bound">xs′</a> <a id="2022" href="Codata.Segments.html#1986" class="Bound">w≺i</a><a id="2025" class="Symbol">)</a>

    <a id="2032" href="Codata.Segments.html#1635" class="Function">unfold′</a> <a id="2040" href="Codata.Segments.html#2040" class="Bound">a</a> <a id="2042" href="Codata.Segments.html#2042" class="Bound">xs</a> <a id="2045" class="Symbol">=</a> <a id="2047" href="Codata.Segments.html#1679" class="Function">unfold″</a> <a id="2055" href="Codata.Segments.html#2040" class="Bound">a</a> <a id="2057" class="Symbol">(</a><a id="2058" href="Codata.Segments.html#1556" class="Bound">ϕ</a> <a id="2060" href="Codata.Segments.html#2042" class="Bound">xs</a><a id="2062" class="Symbol">)</a>

    <a id="2069" href="Codata.Segments.html#2069" class="Function">unfold</a> <a id="2076" class="Symbol">:</a> <a id="2078" class="Symbol">(∀</a> <a id="2081" class="Symbol">{</a><a id="2082" href="Codata.Segments.html#2082" class="Bound">i</a><a id="2083" class="Symbol">}</a> <a id="2085" class="Symbol">→</a> <a id="2087" href="Codata.Segments.html#1522" class="Bound">B</a> <a id="2089" href="Codata.Segments.html#2082" class="Bound">i</a><a id="2090" class="Symbol">)</a> <a id="2092" class="Symbol">→</a> <a id="2094" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="2101" href="Codata.Segments.html#1607" class="Bound">A</a>
    <a id="2107" href="Codata.Segments.html#2069" class="Function">unfold</a> <a id="2114" href="Codata.Segments.html#2114" class="Bound">xs</a> <a id="2117" class="Symbol">{</a><a id="2118" href="Codata.Segments.html#2118" class="Bound">i</a><a id="2119" class="Symbol">}</a> <a id="2121" class="Symbol">=</a> <a id="2123" href="Codata.Segments.html#1635" class="Function">unfold′</a> <a id="2131" class="Symbol">(</a><a id="2132" href="Codata.Segments.html#1498" class="Bound">fdc</a> <a id="2136" href="Codata.Segments.html#2118" class="Bound">i</a><a id="2137" class="Symbol">)</a> <a id="2139" href="Codata.Segments.html#2114" class="Bound">xs</a>

<a id="2143" class="Comment">-- The definition of the list lets us construct an infinite colist as long as</a>
<a id="2221" class="Comment">-- every entry uses some &quot;fuel&quot;.</a>
<a id="2254" class="Keyword">module</a> <a id="2261" href="Codata.Segments.html#2261" class="Module">_</a> <a id="2263" class="Symbol">(</a><a id="2264" href="Codata.Segments.html#2264" class="Bound">fdc</a> <a id="2268" class="Symbol">:</a> <a id="2270" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="2282" href="Algebra.Monus.html#2462" class="Function Operator">_≺_</a><a id="2285" class="Symbol">)</a> <a id="2287" class="Symbol">(</a><a id="2288" href="Codata.Segments.html#2288" class="Bound">s</a> <a id="2290" class="Symbol">:</a> <a id="2292" href="Algebra.html#1401" class="Function">𝑆</a><a id="2293" class="Symbol">)</a> <a id="2295" class="Symbol">(</a><a id="2296" href="Codata.Segments.html#2296" class="Bound">s≢ε</a> <a id="2300" class="Symbol">:</a> <a id="2302" href="Codata.Segments.html#2288" class="Bound">s</a> <a id="2304" href="Path.html#524" class="Function Operator">≢</a> <a id="2306" href="Algebra.html#1444" class="Function">ε</a><a id="2307" class="Symbol">)</a> <a id="2309" class="Symbol">(</a><a id="2310" href="Codata.Segments.html#2310" class="Bound">x</a> <a id="2312" class="Symbol">:</a> <a id="2314" href="Level.html#255" class="Generalizable">A</a><a id="2315" class="Symbol">)</a> <a id="2317" class="Keyword">where</a>
  <a id="2325" href="Codata.Segments.html#2325" class="Function">repeat</a> <a id="2332" class="Symbol">:</a> <a id="2334" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="2341" href="Codata.Segments.html#2314" class="Bound">A</a>
  <a id="2345" href="Codata.Segments.html#2325" class="Function">repeat</a> <a id="2352" class="Symbol">=</a> <a id="2354" href="Codata.Segments.html#2069" class="Function">unfold</a> <a id="2361" href="Codata.Segments.html#2264" class="Bound">fdc</a> <a id="2365" class="Symbol">(</a><a id="2366" href="Function.html#589" class="Function">const</a> <a id="2372" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="2373" class="Symbol">)</a> <a id="2375" class="Symbol">(λ</a> <a id="2378" href="Codata.Segments.html#2378" class="Bound">_</a> <a id="2380" class="Symbol">→</a> <a id="2382" href="Codata.Segments.html#2288" class="Bound">s</a> <a id="2384" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2386" href="Codata.Segments.html#2296" class="Bound">s≢ε</a> <a id="2390" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2392" href="Function.html#589" class="Function">const</a> <a id="2398" class="Symbol">(</a><a id="2399" href="Codata.Segments.html#2310" class="Bound">x</a> <a id="2401" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2403" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2405" class="Symbol">))</a> <a id="2408" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="2412" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2493" class="Comment">-- Manipulating colists</a>
<a id="2517" class="Comment">--------------------------------------------------------------------------------</a>
<a id="map"></a><a id="2598" href="Codata.Segments.html#2598" class="Function">map</a> <a id="2602" class="Symbol">:</a> <a id="2604" class="Symbol">(</a><a id="2605" href="Level.html#255" class="Generalizable">A</a> <a id="2607" class="Symbol">→</a> <a id="2609" href="Level.html#269" class="Generalizable">B</a><a id="2610" class="Symbol">)</a> <a id="2612" class="Symbol">→</a> <a id="2614" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="2622" href="Level.html#255" class="Generalizable">A</a> <a id="2624" href="Codata.Segments.html#636" class="Generalizable">i</a> <a id="2626" class="Symbol">→</a> <a id="2628" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="2636" href="Level.html#269" class="Generalizable">B</a> <a id="2638" href="Codata.Segments.html#636" class="Generalizable">i</a>
<a id="2640" href="Codata.Segments.html#2598" class="Function">map</a> <a id="2644" href="Codata.Segments.html#2644" class="Bound">f</a> <a id="2646" class="Symbol">(</a><a id="2647" href="Codata.Segments.html#2647" class="Bound">w</a> <a id="2649" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2651" href="Codata.Segments.html#2651" class="Bound">xs</a><a id="2653" class="Symbol">)</a> <a id="2655" class="Symbol">=</a> <a id="2657" href="Codata.Segments.html#2647" class="Bound">w</a> <a id="2659" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2661" class="Symbol">λ</a> <a id="2663" href="Codata.Segments.html#2663" class="Bound">w≺i</a> <a id="2667" class="Symbol">→</a> <a id="2669" href="Function.html#1099" class="Function Operator">case</a> <a id="2674" href="Codata.Segments.html#2651" class="Bound">xs</a> <a id="2677" href="Codata.Segments.html#2663" class="Bound">w≺i</a> <a id="2681" href="Function.html#1099" class="Function Operator">of</a> <a id="2684" class="Symbol">λ</a> <a id="2686" class="Symbol">{</a> <a id="2688" class="Symbol">(</a><a id="2689" href="Codata.Segments.html#2689" class="Bound">y</a> <a id="2691" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2693" href="Codata.Segments.html#2693" class="Bound">ys</a><a id="2695" class="Symbol">)</a> <a id="2697" class="Symbol">→</a> <a id="2699" href="Codata.Segments.html#2644" class="Bound">f</a> <a id="2701" href="Codata.Segments.html#2689" class="Bound">y</a> <a id="2703" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2705" href="Codata.Segments.html#2598" class="Function">map</a> <a id="2709" href="Codata.Segments.html#2644" class="Bound">f</a> <a id="2711" href="Codata.Segments.html#2693" class="Bound">ys</a> <a id="2714" class="Symbol">}</a>

<a id="2717" class="Keyword">open</a> <a id="2722" class="Keyword">import</a> <a id="2729" href="Data.List.html" class="Module">Data.List</a> <a id="2739" class="Keyword">using</a> <a id="2745" class="Symbol">(</a><a id="2746" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="2750" class="Symbol">;</a> <a id="2752" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="2755" class="Symbol">;</a> <a id="2757" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2759" class="Symbol">)</a>

<a id="take′"></a><a id="2762" href="Codata.Segments.html#2762" class="Function">take′</a> <a id="2768" class="Symbol">:</a> <a id="2770" class="Symbol">∀</a> <a id="2772" href="Codata.Segments.html#2772" class="Bound">i</a> <a id="2774" class="Symbol">→</a> <a id="2776" href="Codata.Segments.html#270" class="Datatype">Colist′</a> <a id="2784" href="Level.html#255" class="Generalizable">A</a> <a id="2786" href="Codata.Segments.html#2772" class="Bound">i</a> <a id="2788" class="Symbol">→</a> <a id="2790" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2795" href="Level.html#255" class="Generalizable">A</a>
<a id="2797" href="Codata.Segments.html#2762" class="Function">take′</a> <a id="2803" href="Codata.Segments.html#2803" class="Bound">i</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Codata.Segments.html#2806" class="Bound">w</a> <a id="2808" href="Codata.Segments.html#327" class="InductiveConstructor Operator">◃</a> <a id="2810" href="Codata.Segments.html#2810" class="Bound">xs</a><a id="2812" class="Symbol">)</a> <a id="2814" class="Keyword">with</a> <a id="2819" href="Codata.Segments.html#2806" class="Bound">w</a> <a id="2821" href="Relation.Binary.html#2987" class="Function Operator">&lt;?</a> <a id="2824" href="Codata.Segments.html#2803" class="Bound">i</a>
<a id="2826" class="Symbol">...</a> <a id="2830" class="Symbol">|</a> <a id="2832" href="Relation.Nullary.Decidable.html#433" class="InductiveConstructor">no</a> <a id="2835" class="Symbol">_</a> <a id="2837" class="Symbol">=</a> <a id="2839" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="2842" class="Symbol">...</a> <a id="2846" class="Symbol">|</a> <a id="2848" href="Relation.Nullary.Decidable.html#399" class="InductiveConstructor">yes</a> <a id="2852" href="Codata.Segments.html#2852" class="Bound">w&lt;i</a> <a id="2856" class="Keyword">with</a> <a id="2861" class="Bound">xs</a> <a id="2864" class="Symbol">(</a><a id="2865" href="Algebra.Monus.html#4313" class="Function">&lt;⇒≺</a> <a id="2869" class="Symbol">_</a> <a id="2871" class="Symbol">_</a> <a id="2873" href="Codata.Segments.html#2852" class="Bound">w&lt;i</a><a id="2876" class="Symbol">)</a>
<a id="2878" class="Symbol">...</a> <a id="2882" class="Symbol">|</a> <a id="2884" href="Codata.Segments.html#2884" class="Bound">y</a> <a id="2886" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2888" href="Codata.Segments.html#2888" class="Bound">ys</a> <a id="2891" class="Symbol">=</a> <a id="2893" href="Codata.Segments.html#2884" class="Bound">y</a> <a id="2895" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="2897" href="Codata.Segments.html#2762" class="Function">take′</a> <a id="2903" class="Symbol">_</a> <a id="2905" href="Codata.Segments.html#2888" class="Bound">ys</a>

<a id="take"></a><a id="2909" href="Codata.Segments.html#2909" class="Function">take</a> <a id="2914" class="Symbol">:</a> <a id="2916" href="Algebra.html#1401" class="Function">𝑆</a> <a id="2918" class="Symbol">→</a> <a id="2920" href="Codata.Segments.html#549" class="Function">Colist</a> <a id="2927" href="Level.html#255" class="Generalizable">A</a> <a id="2929" class="Symbol">→</a> <a id="2931" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2936" href="Level.html#255" class="Generalizable">A</a>
<a id="2938" href="Codata.Segments.html#2909" class="Function">take</a> <a id="2943" href="Codata.Segments.html#2943" class="Bound">x</a> <a id="2945" href="Codata.Segments.html#2945" class="Bound">xs</a> <a id="2948" class="Symbol">=</a> <a id="2950" href="Codata.Segments.html#2762" class="Function">take′</a> <a id="2956" href="Codata.Segments.html#2943" class="Bound">x</a> <a id="2958" href="Codata.Segments.html#2945" class="Bound">xs</a>
</pre></body></html>