<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Segments</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a>
<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Algebra.html" class="Module">Algebra</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Algebra.Monus.html" class="Module">Algebra.Monus</a>

<a id="68" class="Keyword">module</a> <a id="75" href="Codata.Segments.html" class="Module">Codata.Segments</a>
  <a id="93" class="Symbol">{</a><a id="94" href="Codata.Segments.html#94" class="Bound">‚Ñì</a><a id="95" class="Symbol">}</a>
  <a id="99" class="Symbol">(</a><a id="100" href="Codata.Segments.html#100" class="Bound">mon</a> <a id="104" class="Symbol">:</a> <a id="106" href="Algebra.Monus.html#10165" class="Record">CTMAPOM</a> <a id="114" href="Codata.Segments.html#94" class="Bound">‚Ñì</a><a id="115" class="Symbol">)</a>
  <a id="119" class="Keyword">where</a>

<a id="126" class="Keyword">open</a> <a id="131" href="Algebra.Monus.html#10165" class="Module">CTMAPOM</a> <a id="139" href="Codata.Segments.html#100" class="Bound">mon</a>

<a id="144" class="Keyword">private</a> <a id="152" class="Keyword">variable</a> <a id="161" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="163" href="Codata.Segments.html#163" class="Generalizable">j</a> <a id="165" class="Symbol">:</a> <a id="167" href="Algebra.html#1401" class="Function">ùëÜ</a>

<a id="170" class="Comment">-- This is a type which contains some finite and some infinite lists.</a>
<a id="240" class="Comment">-- The idea is that each entry contains a parameter (w) which says</a>
<a id="307" class="Comment">-- how much coinductive &quot;fuel&quot; it uses.</a>
<a id="347" class="Comment">-- The Colist‚Ä≤ A i type represents a colist which is defined down to depth</a>
<a id="422" class="Comment">-- i; the Colist A type represents a &quot;true&quot; colist, i.e. a colist defined for</a>
<a id="500" class="Comment">-- any given depth.</a>
<a id="520" class="Keyword">infixr</a> <a id="527" class="Number">5</a> <a id="529" href="Codata.Segments.html#595" class="InductiveConstructor Operator">_‚óÉ_</a>
<a id="533" class="Keyword">data</a> <a id="Colist‚Ä≤"></a><a id="538" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="546" class="Symbol">{</a><a id="547" href="Codata.Segments.html#547" class="Bound">a</a><a id="548" class="Symbol">}</a> <a id="550" class="Symbol">(</a><a id="551" href="Codata.Segments.html#551" class="Bound">A</a> <a id="553" class="Symbol">:</a> <a id="555" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="560" href="Codata.Segments.html#547" class="Bound">a</a><a id="561" class="Symbol">)</a> <a id="563" class="Symbol">(</a><a id="564" href="Codata.Segments.html#564" class="Bound">i</a> <a id="566" class="Symbol">:</a> <a id="568" href="Algebra.html#1401" class="Function">ùëÜ</a><a id="569" class="Symbol">)</a> <a id="571" class="Symbol">:</a> <a id="573" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="578" class="Symbol">(</a><a id="579" href="Codata.Segments.html#547" class="Bound">a</a> <a id="581" href="Agda.Primitive.html#810" class="Primitive Operator">‚Ñì‚äî</a> <a id="584" href="Codata.Segments.html#94" class="Bound">‚Ñì</a><a id="585" class="Symbol">)</a> <a id="587" class="Keyword">where</a>
  <a id="Colist‚Ä≤._‚óÉ_"></a><a id="595" href="Codata.Segments.html#595" class="InductiveConstructor Operator">_‚óÉ_</a> <a id="599" class="Symbol">:</a> <a id="601" class="Symbol">‚àÄ</a> <a id="603" href="Codata.Segments.html#603" class="Bound">w</a> <a id="605" class="Symbol">‚Üí</a> <a id="607" class="Comment">-- Segment size</a>
          <a id="633" class="Symbol">(</a>  <a id="636" class="Symbol">(</a><a id="637" href="Codata.Segments.html#637" class="Bound">w&lt;i</a> <a id="641" class="Symbol">:</a> <a id="643" href="Codata.Segments.html#603" class="Bound">w</a> <a id="645" href="Relation.Binary.html#1847" class="Function Operator">&lt;</a> <a id="647" href="Codata.Segments.html#564" class="Bound">i</a><a id="648" class="Symbol">)</a> <a id="650" class="Symbol">‚Üí</a> <a id="652" class="Comment">-- If there is enough fuel left (i is the fuel)</a>
                             <a id="729" class="Comment">-- (also the _&lt;_ type is a proposition)</a>
             <a id="782" href="Codata.Segments.html#551" class="Bound">A</a> <a id="784" href="Data.Sigma.Base.html#455" class="Function Operator">√ó</a> <a id="786" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="794" href="Codata.Segments.html#551" class="Bound">A</a> <a id="796" class="Symbol">(</a><a id="797" href="Codata.Segments.html#564" class="Bound">i</a> <a id="799" href="Algebra.Monus.html#4570" class="Function Operator">‚à∏</a> <a id="801" href="Codata.Segments.html#603" class="Bound">w</a><a id="802" class="Symbol">)</a> <a id="804" class="Comment">-- Produce an element followed by the rest of</a>
                                   <a id="885" class="Comment">-- the list, with w taken out of the fuel.</a>
             <a id="941" class="Symbol">)</a> <a id="943" class="Symbol">‚Üí</a>
          <a id="955" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="963" href="Codata.Segments.html#551" class="Bound">A</a> <a id="965" href="Codata.Segments.html#564" class="Bound">i</a>

<a id="Colist"></a><a id="968" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="975" class="Symbol">:</a> <a id="977" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="982" href="Level.html#239" class="Generalizable">a</a> <a id="984" class="Symbol">‚Üí</a> <a id="986" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="991" class="Symbol">(</a><a id="992" href="Level.html#239" class="Generalizable">a</a> <a id="994" href="Agda.Primitive.html#810" class="Primitive Operator">‚Ñì‚äî</a> <a id="997" href="Codata.Segments.html#94" class="Bound">‚Ñì</a><a id="998" class="Symbol">)</a>
<a id="1000" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="1007" href="Codata.Segments.html#1007" class="Bound">A</a> <a id="1009" class="Symbol">=</a> <a id="1011" class="Symbol">‚àÄ</a> <a id="1013" class="Symbol">{</a><a id="1014" href="Codata.Segments.html#1014" class="Bound">i</a><a id="1015" class="Symbol">}</a> <a id="1017" class="Symbol">‚Üí</a> <a id="1019" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="1027" href="Codata.Segments.html#1007" class="Bound">A</a> <a id="1029" href="Codata.Segments.html#1014" class="Bound">i</a>

<a id="1032" class="Comment">-- The main interesting things tyhis type can do are the following:</a>
<a id="1100" class="Comment">-- * Infinite lists.</a>
<a id="1121" class="Comment">-- * The &quot;fuel&quot; parameter can be an arbitrary monoid, not just ‚Ñï</a>
<a id="1186" class="Comment">-- * Finite lists can also be specified, and the way we say something is</a>
<a id="1259" class="Comment">--   finite is by taking no fuel.</a>
<a id="1293" class="Comment">-- * Everything seems to correspond correctly to the monus axioms.</a>

<a id="1361" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1442" class="Comment">-- Finite colists</a>
<a id="1460" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1542" class="Comment">-- By adding a finite prefix you don&#39;t have to use any of the fuel.</a>

<a id="_‚àπ_"></a><a id="1611" href="Codata.Segments.html#1611" class="Function Operator">_‚àπ_</a> <a id="1615" class="Symbol">:</a> <a id="1617" href="Level.html#255" class="Generalizable">A</a> <a id="1619" class="Symbol">‚Üí</a> <a id="1621" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="1628" href="Level.html#255" class="Generalizable">A</a> <a id="1630" class="Symbol">‚Üí</a> <a id="1632" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="1639" href="Level.html#255" class="Generalizable">A</a>
<a id="1641" href="Codata.Segments.html#1641" class="Bound">x</a> <a id="1643" href="Codata.Segments.html#1611" class="Function Operator">‚àπ</a> <a id="1645" href="Codata.Segments.html#1645" class="Bound">xs</a> <a id="1648" class="Symbol">=</a> <a id="1650" href="Algebra.html#1444" class="Function">Œµ</a> <a id="1652" href="Codata.Segments.html#595" class="InductiveConstructor Operator">‚óÉ</a> <a id="1654" class="Symbol">Œª</a> <a id="1656" href="Codata.Segments.html#1656" class="Bound">_</a> <a id="1658" class="Symbol">‚Üí</a> <a id="1660" href="Codata.Segments.html#1641" class="Bound">x</a> <a id="1662" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1664" href="Codata.Segments.html#1645" class="Bound">xs</a>

<a id="1668" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1749" class="Comment">-- Empty colists</a>
<a id="1766" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1848" class="Comment">-- To terminate computation you use all the fuel, making an empty list.</a>
<a id="1920" class="Comment">-- (I&#39;m not sure how principled this is: semantically I don&#39;t know if I like</a>
<a id="1997" class="Comment">-- that the size of a segment can depend on the supplied size parameter).</a>
<a id="empty"></a><a id="2071" href="Codata.Segments.html#2071" class="Function">empty</a> <a id="2077" class="Symbol">:</a> <a id="2079" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="2086" href="Level.html#255" class="Generalizable">A</a>
<a id="2088" href="Codata.Segments.html#2071" class="Function">empty</a> <a id="2094" class="Symbol">{</a><a id="2095" class="Argument">i</a> <a id="2097" class="Symbol">=</a> <a id="2099" href="Codata.Segments.html#2099" class="Bound">i</a><a id="2100" class="Symbol">}</a> <a id="2102" class="Symbol">=</a> <a id="2104" href="Codata.Segments.html#2099" class="Bound">i</a> <a id="2106" href="Codata.Segments.html#595" class="InductiveConstructor Operator">‚óÉ</a> <a id="2108" class="Symbol">Œª</a> <a id="2110" href="Codata.Segments.html#2110" class="Bound">i&lt;i</a> <a id="2114" class="Symbol">‚Üí</a> <a id="2116" href="Data.Empty.Base.html#154" class="Function">‚ä•-elim</a> <a id="2123" class="Symbol">(</a><a id="2124" href="Relation.Binary.html#1900" class="Function">irrefl</a> <a id="2131" href="Codata.Segments.html#2110" class="Bound">i&lt;i</a><a id="2134" class="Symbol">)</a>

<a id="2137" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2218" class="Comment">-- Finite derived colists</a>
<a id="2244" class="Comment">--------------------------------------------------------------------------------</a>

<a id="2326" class="Comment">-- singleton</a>
<a id="pure"></a><a id="2339" href="Codata.Segments.html#2339" class="Function">pure</a> <a id="2344" class="Symbol">:</a> <a id="2346" href="Level.html#255" class="Generalizable">A</a> <a id="2348" class="Symbol">‚Üí</a> <a id="2350" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="2357" href="Level.html#255" class="Generalizable">A</a>
<a id="2359" href="Codata.Segments.html#2339" class="Function">pure</a> <a id="2364" href="Codata.Segments.html#2364" class="Bound">x</a> <a id="2366" class="Symbol">=</a> <a id="2368" href="Codata.Segments.html#2364" class="Bound">x</a> <a id="2370" href="Codata.Segments.html#1611" class="Function Operator">‚àπ</a> <a id="2372" href="Codata.Segments.html#2071" class="Function">empty</a>

<a id="replicate"></a><a id="2379" href="Codata.Segments.html#2379" class="Function">replicate</a> <a id="2389" class="Symbol">:</a> <a id="2391" href="Agda.Builtin.Nat.html#192" class="Datatype">‚Ñï</a> <a id="2393" class="Symbol">‚Üí</a> <a id="2395" href="Level.html#255" class="Generalizable">A</a> <a id="2397" class="Symbol">‚Üí</a> <a id="2399" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="2406" href="Level.html#255" class="Generalizable">A</a>
<a id="2408" href="Codata.Segments.html#2379" class="Function">replicate</a> <a id="2418" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="2426" href="Codata.Segments.html#2426" class="Bound">x</a> <a id="2428" class="Symbol">=</a> <a id="2430" href="Codata.Segments.html#2071" class="Function">empty</a>
<a id="2436" href="Codata.Segments.html#2379" class="Function">replicate</a> <a id="2446" class="Symbol">(</a><a id="2447" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2451" href="Codata.Segments.html#2451" class="Bound">n</a><a id="2452" class="Symbol">)</a> <a id="2454" href="Codata.Segments.html#2454" class="Bound">x</a> <a id="2456" class="Symbol">=</a> <a id="2458" href="Codata.Segments.html#2454" class="Bound">x</a> <a id="2460" href="Codata.Segments.html#1611" class="Function Operator">‚àπ</a> <a id="2462" href="Codata.Segments.html#2379" class="Function">replicate</a> <a id="2472" href="Codata.Segments.html#2451" class="Bound">n</a> <a id="2474" href="Codata.Segments.html#2454" class="Bound">x</a>

<a id="2477" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2558" class="Comment">-- Infinite colists</a>
<a id="2578" class="Comment">--------------------------------------------------------------------------------</a>

<a id="2660" class="Comment">-- This unfold function produces an infinite list; it needs every size segment</a>
<a id="2739" class="Comment">-- be non empty so that each step uses some fuel. This is what provides the</a>
<a id="2815" class="Comment">-- termination argument.</a>

<a id="2841" class="Keyword">module</a> <a id="2848" href="Codata.Segments.html#2848" class="Module">_</a>
    <a id="2854" class="Symbol">(</a><a id="2855" href="Codata.Segments.html#2855" class="Bound">B</a> <a id="2857" class="Symbol">:</a> <a id="2859" href="Algebra.html#1401" class="Function">ùëÜ</a> <a id="2861" class="Symbol">‚Üí</a> <a id="2863" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="2868" href="Level.html#241" class="Generalizable">b</a><a id="2869" class="Symbol">)</a> <a id="2871" class="Comment">-- The seed type</a>
    <a id="2892" class="Symbol">(</a><a id="2893" href="Codata.Segments.html#2893" class="Bound">œï</a> <a id="2895" class="Symbol">:</a> <a id="2897" class="Symbol">‚àÄ</a> <a id="2899" class="Symbol">{</a><a id="2900" href="Codata.Segments.html#2900" class="Bound">i</a><a id="2901" class="Symbol">}</a> <a id="2903" class="Symbol">‚Üí</a> <a id="2905" class="Comment">-- At depth i</a>
           <a id="2930" href="Codata.Segments.html#2855" class="Bound">B</a> <a id="2932" href="Codata.Segments.html#2900" class="Bound">i</a> <a id="2934" class="Symbol">‚Üí</a> <a id="2936" class="Comment">-- With this seed</a>
           <a id="2965" href="Data.Sigma.Base.html#173" class="Function">‚àÉ</a> <a id="2967" href="Codata.Segments.html#2967" class="Bound">w</a> <a id="2969" href="Data.Sigma.Base.html#173" class="Function">√ó</a> <a id="2971" class="Comment">-- Produce a segment of size w</a>
           <a id="3013" class="Symbol">(</a><a id="3014" href="Codata.Segments.html#2967" class="Bound">w</a> <a id="3016" href="Path.html#524" class="Function Operator">‚â¢</a> <a id="3018" href="Algebra.html#1444" class="Function">Œµ</a><a id="3019" class="Symbol">)</a> <a id="3021" href="Data.Sigma.Base.html#455" class="Function Operator">√ó</a> <a id="3023" class="Comment">-- w can&#39;t be Œµ, so that we use some of the fuel to prove</a>
                     <a id="3102" class="Comment">-- termination</a>
           <a id="3128" class="Symbol">((</a><a id="3130" href="Codata.Segments.html#3130" class="Bound">w&lt;i</a> <a id="3134" class="Symbol">:</a> <a id="3136" href="Codata.Segments.html#2967" class="Bound">w</a> <a id="3138" href="Relation.Binary.html#1847" class="Function Operator">&lt;</a> <a id="3140" href="Codata.Segments.html#2900" class="Bound">i</a><a id="3141" class="Symbol">)</a> <a id="3143" class="Symbol">‚Üí</a> <a id="3145" href="Level.html#255" class="Generalizable">A</a> <a id="3147" href="Data.Sigma.Base.html#455" class="Function Operator">√ó</a> <a id="3149" href="Codata.Segments.html#2855" class="Bound">B</a> <a id="3151" class="Symbol">(</a><a id="3152" href="Codata.Segments.html#2900" class="Bound">i</a> <a id="3154" href="Algebra.Monus.html#4570" class="Function Operator">‚à∏</a> <a id="3156" href="Codata.Segments.html#2967" class="Bound">w</a><a id="3157" class="Symbol">))</a> <a id="3160" class="Comment">-- And produce the cons constructor.</a>
           <a id="3208" class="Symbol">)</a>
    <a id="3214" class="Comment">-- ^ The step function</a>
    <a id="3241" class="Keyword">where</a>
    <a id="3251" href="Codata.Segments.html#3251" class="Function">unfold‚Ä≤</a> <a id="3259" class="Symbol">:</a> <a id="3261" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="3265" href="Relation.Binary.html#1847" class="Function Operator">_&lt;_</a> <a id="3269" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="3271" class="Symbol">‚Üí</a> <a id="3273" href="Codata.Segments.html#2855" class="Bound">B</a> <a id="3275" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="3277" class="Symbol">‚Üí</a> <a id="3279" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="3287" href="Codata.Segments.html#3145" class="Bound">A</a> <a id="3289" href="Codata.Segments.html#161" class="Generalizable">i</a>
    <a id="3295" href="Codata.Segments.html#3251" class="Function">unfold‚Ä≤</a> <a id="3303" href="Codata.Segments.html#3303" class="Bound">a</a> <a id="3305" class="Symbol">=</a> <a id="3307" href="Data.Sigma.Base.html#711" class="Function">uncurry</a> <a id="3315" href="Codata.Segments.html#595" class="InductiveConstructor Operator">_‚óÉ_</a>
              <a id="3333" href="Function.html#97" class="Function Operator">‚àò</a> <a id="3335" href="Data.Sigma.Base.html#1309" class="Function">map‚ÇÇ</a>
                <a id="3356" class="Symbol">(Œª</a> <a id="3359" class="Symbol">{</a> <a id="3361" class="Symbol">(</a><a id="3362" href="Codata.Segments.html#3362" class="Bound">w‚â¢Œµ</a> <a id="3366" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3368" href="Codata.Segments.html#3368" class="Bound">xs‚Ä≤</a><a id="3371" class="Symbol">)</a> <a id="3373" href="Codata.Segments.html#3373" class="Bound">w&lt;i</a> <a id="3377" class="Symbol">‚Üí</a>
                       <a id="3402" href="Data.Sigma.Base.html#1309" class="Function">map‚ÇÇ</a> <a id="3407" class="Symbol">(</a><a id="3408" href="Function.html#1099" class="Function Operator">case</a> <a id="3413" href="Codata.Segments.html#3303" class="Bound">a</a> <a id="3415" href="Function.html#1099" class="Function Operator">of</a> <a id="3418" class="Symbol">Œª</a> <a id="3420" class="Symbol">{</a> <a id="3422" class="Symbol">(</a><a id="3423" href="WellFounded.html#161" class="InductiveConstructor">acc</a> <a id="3427" href="Codata.Segments.html#3427" class="Bound">wf</a><a id="3429" class="Symbol">)</a> <a id="3431" class="Symbol">‚Üí</a> <a id="3433" href="Codata.Segments.html#3251" class="Function">unfold‚Ä≤</a> <a id="3441" class="Symbol">(</a><a id="3442" href="Codata.Segments.html#3427" class="Bound">wf</a> <a id="3445" class="Symbol">_</a> <a id="3447" class="Symbol">(</a><a id="3448" href="Algebra.Monus.html#12973" class="Function">‚à∏‚Äø&lt;-&lt;</a> <a id="3454" class="Symbol">_</a> <a id="3456" class="Symbol">_</a> <a id="3458" href="Codata.Segments.html#3373" class="Bound">w&lt;i</a> <a id="3462" href="Codata.Segments.html#3362" class="Bound">w‚â¢Œµ</a><a id="3465" class="Symbol">))</a> <a id="3468" class="Symbol">})</a>
                            <a id="3499" class="Symbol">(</a><a id="3500" href="Codata.Segments.html#3368" class="Bound">xs‚Ä≤</a> <a id="3504" href="Codata.Segments.html#3373" class="Bound">w&lt;i</a><a id="3507" class="Symbol">)</a> <a id="3509" class="Symbol">})</a>
              <a id="3526" href="Function.html#97" class="Function Operator">‚àò</a> <a id="3528" href="Codata.Segments.html#2893" class="Bound">œï</a>

<a id="unfold"></a><a id="3531" href="Codata.Segments.html#3531" class="Function">unfold</a> <a id="3538" class="Symbol">:</a> <a id="3540" class="Symbol">(</a><a id="3541" href="Codata.Segments.html#3541" class="Bound">fdc</a> <a id="3545" class="Symbol">:</a> <a id="3547" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="3559" href="Relation.Binary.html#1847" class="Function Operator">_&lt;_</a><a id="3562" class="Symbol">)</a>
         <a id="3573" class="Symbol">(</a><a id="3574" href="Codata.Segments.html#3574" class="Bound">B</a> <a id="3576" class="Symbol">:</a> <a id="3578" href="Algebra.html#1401" class="Function">ùëÜ</a> <a id="3580" class="Symbol">‚Üí</a> <a id="3582" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="3587" href="Level.html#241" class="Generalizable">b</a><a id="3588" class="Symbol">)</a>
         <a id="3599" class="Symbol">(</a><a id="3600" href="Codata.Segments.html#3600" class="Bound">œï</a> <a id="3602" class="Symbol">:</a> <a id="3604" class="Symbol">‚àÄ</a> <a id="3606" class="Symbol">{</a><a id="3607" href="Codata.Segments.html#3607" class="Bound">i</a><a id="3608" class="Symbol">}</a> <a id="3610" class="Symbol">‚Üí</a> <a id="3612" href="Codata.Segments.html#3574" class="Bound">B</a> <a id="3614" href="Codata.Segments.html#3607" class="Bound">i</a> <a id="3616" class="Symbol">‚Üí</a> <a id="3618" href="Data.Sigma.Base.html#173" class="Function">‚àÉ</a> <a id="3620" href="Codata.Segments.html#3620" class="Bound">w</a> <a id="3622" href="Data.Sigma.Base.html#173" class="Function">√ó</a> <a id="3624" class="Symbol">(</a><a id="3625" href="Codata.Segments.html#3620" class="Bound">w</a> <a id="3627" href="Path.html#524" class="Function Operator">‚â¢</a> <a id="3629" href="Algebra.html#1444" class="Function">Œµ</a><a id="3630" class="Symbol">)</a> <a id="3632" href="Data.Sigma.Base.html#455" class="Function Operator">√ó</a> <a id="3634" class="Symbol">((</a><a id="3636" href="Codata.Segments.html#3636" class="Bound">w&lt;i</a> <a id="3640" class="Symbol">:</a> <a id="3642" href="Codata.Segments.html#3620" class="Bound">w</a> <a id="3644" href="Relation.Binary.html#1847" class="Function Operator">&lt;</a> <a id="3646" href="Codata.Segments.html#3607" class="Bound">i</a><a id="3647" class="Symbol">)</a> <a id="3649" class="Symbol">‚Üí</a> <a id="3651" href="Level.html#255" class="Generalizable">A</a> <a id="3653" href="Data.Sigma.Base.html#455" class="Function Operator">√ó</a> <a id="3655" href="Codata.Segments.html#3574" class="Bound">B</a> <a id="3657" class="Symbol">(</a><a id="3658" href="Codata.Segments.html#3607" class="Bound">i</a> <a id="3660" href="Algebra.Monus.html#4570" class="Function Operator">‚à∏</a> <a id="3662" href="Codata.Segments.html#3620" class="Bound">w</a><a id="3663" class="Symbol">)))</a> <a id="3667" class="Symbol">‚Üí</a>
         <a id="3678" class="Symbol">(‚àÄ</a> <a id="3681" class="Symbol">{</a><a id="3682" href="Codata.Segments.html#3682" class="Bound">i</a><a id="3683" class="Symbol">}</a> <a id="3685" class="Symbol">‚Üí</a> <a id="3687" href="Codata.Segments.html#3574" class="Bound">B</a> <a id="3689" href="Codata.Segments.html#3682" class="Bound">i</a><a id="3690" class="Symbol">)</a> <a id="3692" class="Symbol">‚Üí</a> <a id="3694" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="3701" href="Level.html#255" class="Generalizable">A</a>
<a id="3703" href="Codata.Segments.html#3531" class="Function">unfold</a> <a id="3710" href="Codata.Segments.html#3710" class="Bound">fdc</a> <a id="3714" href="Codata.Segments.html#3714" class="Bound">B</a> <a id="3716" href="Codata.Segments.html#3716" class="Bound">œï</a> <a id="3718" href="Codata.Segments.html#3718" class="Bound">xs</a> <a id="3721" class="Symbol">{</a><a id="3722" href="Codata.Segments.html#3722" class="Bound">i</a><a id="3723" class="Symbol">}</a> <a id="3725" class="Symbol">=</a> <a id="3727" href="Codata.Segments.html#3251" class="Function">unfold‚Ä≤</a> <a id="3735" href="Codata.Segments.html#3714" class="Bound">B</a> <a id="3737" href="Codata.Segments.html#3716" class="Bound">œï</a> <a id="3739" class="Symbol">(</a><a id="3740" href="Codata.Segments.html#3710" class="Bound">fdc</a> <a id="3744" href="Codata.Segments.html#3722" class="Bound">i</a><a id="3745" class="Symbol">)</a> <a id="3747" href="Codata.Segments.html#3718" class="Bound">xs</a>

<a id="3751" class="Comment">-- Here&#39;s a simple example using the unfold function: this produces infinitely</a>
<a id="3830" class="Comment">-- repeated values, with segment size s.</a>
<a id="repeat"></a><a id="3871" href="Codata.Segments.html#3871" class="Function">repeat</a> <a id="3878" class="Symbol">:</a> <a id="3880" class="Symbol">(</a><a id="3881" href="Codata.Segments.html#3881" class="Bound">fdc</a> <a id="3885" class="Symbol">:</a> <a id="3887" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="3899" href="Relation.Binary.html#1847" class="Function Operator">_&lt;_</a><a id="3902" class="Symbol">)</a> <a id="3904" class="Symbol">(</a><a id="3905" href="Codata.Segments.html#3905" class="Bound">s</a> <a id="3907" class="Symbol">:</a> <a id="3909" href="Algebra.html#1401" class="Function">ùëÜ</a><a id="3910" class="Symbol">)</a> <a id="3912" class="Symbol">(</a><a id="3913" href="Codata.Segments.html#3913" class="Bound">s‚â¢Œµ</a> <a id="3917" class="Symbol">:</a> <a id="3919" href="Codata.Segments.html#3905" class="Bound">s</a> <a id="3921" href="Path.html#524" class="Function Operator">‚â¢</a> <a id="3923" href="Algebra.html#1444" class="Function">Œµ</a><a id="3924" class="Symbol">)</a> <a id="3926" class="Symbol">(</a><a id="3927" href="Codata.Segments.html#3927" class="Bound">x</a> <a id="3929" class="Symbol">:</a> <a id="3931" href="Level.html#255" class="Generalizable">A</a><a id="3932" class="Symbol">)</a> <a id="3934" class="Symbol">‚Üí</a> <a id="3936" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="3943" href="Level.html#255" class="Generalizable">A</a>
<a id="3945" href="Codata.Segments.html#3871" class="Function">repeat</a> <a id="3952" href="Codata.Segments.html#3952" class="Bound">fdc</a> <a id="3956" href="Codata.Segments.html#3956" class="Bound">s</a> <a id="3958" href="Codata.Segments.html#3958" class="Bound">s‚â¢Œµ</a> <a id="3962" href="Codata.Segments.html#3962" class="Bound">x</a> <a id="3964" class="Symbol">=</a> <a id="3966" href="Codata.Segments.html#3531" class="Function">unfold</a> <a id="3973" href="Codata.Segments.html#3952" class="Bound">fdc</a> <a id="3977" class="Symbol">(</a><a id="3978" href="Function.html#589" class="Function">const</a> <a id="3984" href="Agda.Builtin.Unit.html#164" class="Record">‚ä§</a><a id="3985" class="Symbol">)</a> <a id="3987" class="Symbol">(Œª</a> <a id="3990" href="Codata.Segments.html#3990" class="Bound">_</a> <a id="3992" class="Symbol">‚Üí</a> <a id="3994" href="Codata.Segments.html#3956" class="Bound">s</a> <a id="3996" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3998" href="Codata.Segments.html#3958" class="Bound">s‚â¢Œµ</a> <a id="4002" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4004" href="Function.html#589" class="Function">const</a> <a id="4010" class="Symbol">(</a><a id="4011" href="Codata.Segments.html#3962" class="Bound">x</a> <a id="4013" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4015" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="4017" class="Symbol">))</a> <a id="4020" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="4024" class="Comment">--------------------------------------------------------------------------------</a>
<a id="4105" class="Comment">-- Manipulating colists</a>
<a id="4129" class="Comment">--------------------------------------------------------------------------------</a>

<a id="4211" class="Comment">-- One important thing to note about the Colist type: it is inductive!</a>
<a id="4282" class="Comment">-- Although it does technically represent &quot;coinduction&quot;, the constructors and</a>
<a id="4360" class="Comment">-- type itself are inductive as far as Agda can see. For that reason functions</a>
<a id="4439" class="Comment">-- like map pass the termination checker with no extra ceremony.</a>
<a id="map"></a><a id="4504" href="Codata.Segments.html#4504" class="Function">map</a> <a id="4508" class="Symbol">:</a> <a id="4510" class="Symbol">(</a><a id="4511" href="Level.html#255" class="Generalizable">A</a> <a id="4513" class="Symbol">‚Üí</a> <a id="4515" href="Level.html#269" class="Generalizable">B</a><a id="4516" class="Symbol">)</a> <a id="4518" class="Symbol">‚Üí</a> <a id="4520" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="4528" href="Level.html#255" class="Generalizable">A</a> <a id="4530" href="Codata.Segments.html#161" class="Generalizable">i</a> <a id="4532" class="Symbol">‚Üí</a> <a id="4534" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="4542" href="Level.html#269" class="Generalizable">B</a> <a id="4544" href="Codata.Segments.html#161" class="Generalizable">i</a>
<a id="4546" href="Codata.Segments.html#4504" class="Function">map</a> <a id="4550" href="Codata.Segments.html#4550" class="Bound">f</a> <a id="4552" class="Symbol">(</a><a id="4553" href="Codata.Segments.html#4553" class="Bound">w</a> <a id="4555" href="Codata.Segments.html#595" class="InductiveConstructor Operator">‚óÉ</a> <a id="4557" href="Codata.Segments.html#4557" class="Bound">xs</a><a id="4559" class="Symbol">)</a> <a id="4561" class="Symbol">=</a> <a id="4563" href="Codata.Segments.html#4553" class="Bound">w</a> <a id="4565" href="Codata.Segments.html#595" class="InductiveConstructor Operator">‚óÉ</a> <a id="4567" class="Symbol">Œª</a> <a id="4569" href="Codata.Segments.html#4569" class="Bound">w&lt;i</a> <a id="4573" class="Symbol">‚Üí</a> <a id="4575" href="Function.html#1099" class="Function Operator">case</a> <a id="4580" href="Codata.Segments.html#4557" class="Bound">xs</a> <a id="4583" href="Codata.Segments.html#4569" class="Bound">w&lt;i</a> <a id="4587" href="Function.html#1099" class="Function Operator">of</a> <a id="4590" class="Symbol">Œª</a> <a id="4592" class="Symbol">{</a> <a id="4594" class="Symbol">(</a><a id="4595" href="Codata.Segments.html#4595" class="Bound">y</a> <a id="4597" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4599" href="Codata.Segments.html#4599" class="Bound">ys</a><a id="4601" class="Symbol">)</a> <a id="4603" class="Symbol">‚Üí</a> <a id="4605" href="Codata.Segments.html#4550" class="Bound">f</a> <a id="4607" href="Codata.Segments.html#4595" class="Bound">y</a> <a id="4609" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4611" href="Codata.Segments.html#4504" class="Function">map</a> <a id="4615" href="Codata.Segments.html#4550" class="Bound">f</a> <a id="4617" href="Codata.Segments.html#4599" class="Bound">ys</a> <a id="4620" class="Symbol">}</a>

<a id="4623" class="Comment">-- You can extract a finite prefix of the colist.</a>
<a id="4673" class="Keyword">open</a> <a id="4678" class="Keyword">import</a> <a id="4685" href="Data.List.html" class="Module">Data.List</a> <a id="4695" class="Keyword">using</a> <a id="4701" class="Symbol">(</a><a id="4702" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="4706" class="Symbol">;</a> <a id="4708" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_‚à∑_</a><a id="4711" class="Symbol">;</a> <a id="4713" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="4715" class="Symbol">)</a>

<a id="take‚Ä≤"></a><a id="4718" href="Codata.Segments.html#4718" class="Function">take‚Ä≤</a> <a id="4724" class="Symbol">:</a> <a id="4726" class="Symbol">‚àÄ</a> <a id="4728" href="Codata.Segments.html#4728" class="Bound">i</a> <a id="4730" class="Symbol">‚Üí</a> <a id="4732" href="Codata.Segments.html#538" class="Datatype">Colist‚Ä≤</a> <a id="4740" href="Level.html#255" class="Generalizable">A</a> <a id="4742" href="Codata.Segments.html#4728" class="Bound">i</a> <a id="4744" class="Symbol">‚Üí</a> <a id="4746" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4751" href="Level.html#255" class="Generalizable">A</a>
<a id="4753" href="Codata.Segments.html#4718" class="Function">take‚Ä≤</a> <a id="4759" href="Codata.Segments.html#4759" class="Bound">i</a> <a id="4761" class="Symbol">(</a><a id="4762" href="Codata.Segments.html#4762" class="Bound">w</a> <a id="4764" href="Codata.Segments.html#595" class="InductiveConstructor Operator">‚óÉ</a> <a id="4766" href="Codata.Segments.html#4766" class="Bound">xs</a><a id="4768" class="Symbol">)</a> <a id="4770" class="Keyword">with</a> <a id="4775" href="Codata.Segments.html#4762" class="Bound">w</a> <a id="4777" href="Relation.Binary.html#2987" class="Function Operator">&lt;?</a> <a id="4780" href="Codata.Segments.html#4759" class="Bound">i</a>
<a id="4782" class="Symbol">...</a> <a id="4786" class="Symbol">|</a> <a id="4788" href="Relation.Nullary.Decidable.html#433" class="InductiveConstructor">no</a> <a id="4791" class="Symbol">_</a> <a id="4793" class="Symbol">=</a> <a id="4795" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="4798" class="Symbol">...</a> <a id="4802" class="Symbol">|</a> <a id="4804" href="Relation.Nullary.Decidable.html#399" class="InductiveConstructor">yes</a> <a id="4808" href="Codata.Segments.html#4808" class="Bound">w&lt;i</a> <a id="4812" class="Keyword">with</a> <a id="4817" class="Bound">xs</a> <a id="4820" href="Codata.Segments.html#4808" class="Bound">w&lt;i</a>
<a id="4824" class="Symbol">...</a> <a id="4828" class="Symbol">|</a> <a id="4830" href="Codata.Segments.html#4830" class="Bound">y</a> <a id="4832" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4834" href="Codata.Segments.html#4834" class="Bound">ys</a> <a id="4837" class="Symbol">=</a> <a id="4839" href="Codata.Segments.html#4830" class="Bound">y</a> <a id="4841" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">‚à∑</a> <a id="4843" href="Codata.Segments.html#4718" class="Function">take‚Ä≤</a> <a id="4849" class="Symbol">_</a> <a id="4851" href="Codata.Segments.html#4834" class="Bound">ys</a>

<a id="take"></a><a id="4855" href="Codata.Segments.html#4855" class="Function">take</a> <a id="4860" class="Symbol">:</a> <a id="4862" href="Algebra.html#1401" class="Function">ùëÜ</a> <a id="4864" class="Symbol">‚Üí</a> <a id="4866" href="Codata.Segments.html#968" class="Function">Colist</a> <a id="4873" href="Level.html#255" class="Generalizable">A</a> <a id="4875" class="Symbol">‚Üí</a> <a id="4877" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4882" href="Level.html#255" class="Generalizable">A</a>
<a id="4884" href="Codata.Segments.html#4855" class="Function">take</a> <a id="4889" href="Codata.Segments.html#4889" class="Bound">x</a> <a id="4891" href="Codata.Segments.html#4891" class="Bound">xs</a> <a id="4894" class="Symbol">=</a> <a id="4896" href="Codata.Segments.html#4718" class="Function">take‚Ä≤</a> <a id="4902" href="Codata.Segments.html#4889" class="Bound">x</a> <a id="4904" href="Codata.Segments.html#4891" class="Bound">xs</a>
</pre></body></html>