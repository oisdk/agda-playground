<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Codata.Stream.Segmented</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Prelude.html" class="Module">Prelude</a>
<a id="21" class="Keyword">open</a> <a id="26" class="Keyword">import</a> <a id="33" href="Algebra.html" class="Module">Algebra</a>
<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Algebra.Monus.html" class="Module">Algebra.Monus</a>

<a id="68" class="Keyword">module</a> <a id="75" href="Codata.Stream.Segmented.html" class="Module">Codata.Stream.Segmented</a>
  <a id="101" class="Symbol">{</a><a id="102" href="Codata.Stream.Segmented.html#102" class="Bound">ℓ</a><a id="103" class="Symbol">}</a>
  <a id="107" class="Symbol">(</a><a id="108" href="Codata.Stream.Segmented.html#108" class="Bound">mon</a> <a id="112" class="Symbol">:</a> <a id="114" href="Algebra.Monus.html#9619" class="Record">CTMAPOM</a> <a id="122" href="Codata.Stream.Segmented.html#102" class="Bound">ℓ</a><a id="123" class="Symbol">)</a>
  
  <a id="130" class="Keyword">where</a>

<a id="137" class="Keyword">open</a> <a id="142" href="Algebra.Monus.html#9619" class="Module">CTMAPOM</a> <a id="150" href="Codata.Stream.Segmented.html#108" class="Bound">mon</a>

<a id="155" class="Comment">-- This is a type for coinductive lists, with a &quot;sized types&quot; parameter which</a>
<a id="233" class="Comment">-- can be an arbitrary monus.</a>
<a id="263" class="Keyword">infixr</a> <a id="270" class="Number">5</a> <a id="272" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">_◃_</a>
<a id="276" class="Keyword">data</a> <a id="Stream′"></a><a id="281" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="289" class="Symbol">{</a><a id="290" href="Codata.Stream.Segmented.html#290" class="Bound">a</a><a id="291" class="Symbol">}</a> <a id="293" class="Symbol">(</a><a id="294" href="Codata.Stream.Segmented.html#294" class="Bound">A</a> <a id="296" class="Symbol">:</a> <a id="298" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="303" href="Codata.Stream.Segmented.html#290" class="Bound">a</a><a id="304" class="Symbol">)</a> <a id="306" class="Symbol">(</a><a id="307" href="Codata.Stream.Segmented.html#307" class="Bound">i</a> <a id="309" class="Symbol">:</a> <a id="311" href="Algebra.html#1401" class="Function">𝑆</a><a id="312" class="Symbol">)</a> <a id="314" class="Symbol">:</a> <a id="316" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="321" class="Symbol">(</a><a id="322" href="Codata.Stream.Segmented.html#290" class="Bound">a</a> <a id="324" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="327" href="Codata.Stream.Segmented.html#102" class="Bound">ℓ</a><a id="328" class="Symbol">)</a> <a id="330" class="Keyword">where</a>
  <a id="Stream′._◃_"></a><a id="338" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">_◃_</a> <a id="342" class="Symbol">:</a> <a id="344" class="Symbol">∀</a> <a id="346" href="Codata.Stream.Segmented.html#346" class="Bound">w</a> <a id="348" class="Symbol">→</a> <a id="350" class="Symbol">((</a><a id="352" href="Codata.Stream.Segmented.html#352" class="Bound">w≺i</a> <a id="356" class="Symbol">:</a> <a id="358" href="Codata.Stream.Segmented.html#346" class="Bound">w</a> <a id="360" href="Algebra.Monus.html#2465" class="Function Operator">≺</a> <a id="362" href="Codata.Stream.Segmented.html#307" class="Bound">i</a><a id="363" class="Symbol">)</a> <a id="365" class="Symbol">→</a> <a id="367" href="Codata.Stream.Segmented.html#294" class="Bound">A</a> <a id="369" href="Data.Sigma.Base.html#523" class="Function Operator">×</a> <a id="371" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="379" href="Codata.Stream.Segmented.html#294" class="Bound">A</a> <a id="381" class="Symbol">(</a><a id="382" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="386" href="Codata.Stream.Segmented.html#352" class="Bound">w≺i</a><a id="389" class="Symbol">))</a> <a id="392" class="Symbol">→</a> <a id="394" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="402" href="Codata.Stream.Segmented.html#294" class="Bound">A</a> <a id="404" href="Codata.Stream.Segmented.html#307" class="Bound">i</a>
<a id="406" class="Comment">--              ^^^^^^^^^^^^</a>
<a id="435" class="Comment">--              This is a proposition, by the way.</a>

<a id="487" class="Comment">-- The monus parameter tells you how much you can inspect into the stream.</a>
<a id="562" class="Comment">-- The Stream′ A i type, then, represents a stream that&#39;s defined for a depth</a>
<a id="640" class="Comment">-- of i; this type is a true &quot;stream&quot; (again, actually a colist), which is</a>
<a id="715" class="Comment">-- defined for any depth.</a>
<a id="Stream"></a><a id="741" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="748" class="Symbol">:</a> <a id="750" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="755" href="Level.html#239" class="Generalizable">a</a> <a id="757" class="Symbol">→</a> <a id="759" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="764" class="Symbol">(</a><a id="765" href="Level.html#239" class="Generalizable">a</a> <a id="767" href="Agda.Primitive.html#810" class="Primitive Operator">ℓ⊔</a> <a id="770" href="Codata.Stream.Segmented.html#102" class="Bound">ℓ</a><a id="771" class="Symbol">)</a>
<a id="773" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="780" href="Codata.Stream.Segmented.html#780" class="Bound">A</a> <a id="782" class="Symbol">=</a> <a id="784" class="Symbol">∀</a> <a id="786" class="Symbol">{</a><a id="787" href="Codata.Stream.Segmented.html#787" class="Bound">i</a><a id="788" class="Symbol">}</a> <a id="790" class="Symbol">→</a> <a id="792" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="800" href="Codata.Stream.Segmented.html#780" class="Bound">A</a> <a id="802" href="Codata.Stream.Segmented.html#787" class="Bound">i</a>

<a id="805" class="Keyword">private</a>
  <a id="815" class="Keyword">variable</a>
    <a id="828" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="830" href="Codata.Stream.Segmented.html#830" class="Generalizable">j</a> <a id="832" class="Symbol">:</a> <a id="834" href="Algebra.html#1401" class="Function">𝑆</a>

<a id="837" class="Comment">--------------------------------------------------------------------------------</a>
<a id="918" class="Comment">-- Finite colists</a>
<a id="936" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1018" class="Comment">-- empty list</a>
<a id="empty"></a><a id="1032" href="Codata.Stream.Segmented.html#1032" class="Function">empty</a> <a id="1038" class="Symbol">:</a> <a id="1040" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="1047" href="Level.html#255" class="Generalizable">A</a>
<a id="1049" href="Codata.Stream.Segmented.html#1032" class="Function">empty</a> <a id="1055" class="Symbol">{</a><a id="1056" class="Argument">i</a> <a id="1058" class="Symbol">=</a> <a id="1060" href="Codata.Stream.Segmented.html#1060" class="Bound">i</a><a id="1061" class="Symbol">}</a> <a id="1063" class="Symbol">=</a> <a id="1065" href="Codata.Stream.Segmented.html#1060" class="Bound">i</a> <a id="1067" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="1069" class="Symbol">λ</a> <a id="1071" href="Codata.Stream.Segmented.html#1071" class="Bound">i≺i</a> <a id="1075" class="Symbol">→</a> <a id="1077" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="1084" class="Symbol">(</a><a id="1085" href="Algebra.Monus.html#9448" class="Function">≺-irrefl</a> <a id="1094" href="Codata.Stream.Segmented.html#1071" class="Bound">i≺i</a><a id="1097" class="Symbol">)</a>

<a id="_◃_∷_"></a><a id="1100" href="Codata.Stream.Segmented.html#1100" class="Function Operator">_◃_∷_</a> <a id="1106" class="Symbol">:</a> <a id="1108" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1110" class="Symbol">→</a> <a id="1112" href="Level.html#255" class="Generalizable">A</a> <a id="1114" class="Symbol">→</a> <a id="1116" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="1123" href="Level.html#255" class="Generalizable">A</a> <a id="1125" class="Symbol">→</a> <a id="1127" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="1134" href="Level.html#255" class="Generalizable">A</a>
<a id="1136" class="Symbol">(</a><a id="1137" href="Codata.Stream.Segmented.html#1137" class="Bound">w</a> <a id="1139" href="Codata.Stream.Segmented.html#1100" class="Function Operator">◃</a> <a id="1141" href="Codata.Stream.Segmented.html#1141" class="Bound">x</a> <a id="1143" href="Codata.Stream.Segmented.html#1100" class="Function Operator">∷</a> <a id="1145" href="Codata.Stream.Segmented.html#1145" class="Bound">xs</a><a id="1147" class="Symbol">)</a> <a id="1149" class="Symbol">{</a><a id="1150" href="Codata.Stream.Segmented.html#1150" class="Bound">i</a><a id="1151" class="Symbol">}</a> <a id="1153" class="Symbol">=</a> <a id="1155" href="Codata.Stream.Segmented.html#1137" class="Bound">w</a> <a id="1157" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="1159" class="Symbol">λ</a> <a id="1161" href="Codata.Stream.Segmented.html#1161" class="Bound">w≺i</a> <a id="1165" class="Symbol">→</a> <a id="1167" href="Codata.Stream.Segmented.html#1141" class="Bound">x</a> <a id="1169" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1171" href="Codata.Stream.Segmented.html#1145" class="Bound">xs</a>

<a id="cons′"></a><a id="1175" href="Codata.Stream.Segmented.html#1175" class="Function">cons′</a> <a id="1181" class="Symbol">:</a> <a id="1183" class="Symbol">∀</a> <a id="1185" href="Codata.Stream.Segmented.html#1185" class="Bound">w</a> <a id="1187" class="Symbol">→</a> <a id="1189" href="Level.html#255" class="Generalizable">A</a> <a id="1191" class="Symbol">→</a> <a id="1193" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="1201" href="Level.html#255" class="Generalizable">A</a> <a id="1203" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="1205" class="Symbol">→</a> <a id="1207" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="1215" href="Level.html#255" class="Generalizable">A</a> <a id="1217" class="Symbol">(</a><a id="1218" href="Codata.Stream.Segmented.html#1185" class="Bound">w</a> <a id="1220" href="Algebra.html#1421" class="Function Operator">∙</a> <a id="1222" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a><a id="1223" class="Symbol">)</a>
<a id="1225" href="Codata.Stream.Segmented.html#1175" class="Function">cons′</a> <a id="1231" href="Codata.Stream.Segmented.html#1231" class="Bound">w</a> <a id="1233" href="Codata.Stream.Segmented.html#1233" class="Bound">x</a> <a id="1235" href="Codata.Stream.Segmented.html#1235" class="Bound">xs</a> <a id="1238" class="Symbol">=</a> <a id="1240" href="Codata.Stream.Segmented.html#1231" class="Bound">w</a> <a id="1242" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="1244" class="Symbol">λ</a> <a id="1246" class="Symbol">{</a> <a id="1248" class="Symbol">(</a><a id="1249" href="Codata.Stream.Segmented.html#1249" class="Bound">k</a> <a id="1251" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1253" href="Codata.Stream.Segmented.html#1253" class="Bound">w∙i≡w∙k</a> <a id="1261" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1263" href="Codata.Stream.Segmented.html#1263" class="Bound">k≢ε</a><a id="1266" class="Symbol">)</a> <a id="1268" class="Symbol">→</a> <a id="1270" href="Codata.Stream.Segmented.html#1233" class="Bound">x</a> <a id="1272" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1274" href="Cubical.Foundations.Prelude.html#7588" class="Function">subst</a> <a id="1280" class="Symbol">(</a><a id="1281" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="1289" class="Symbol">_)</a> <a id="1292" class="Symbol">(</a><a id="1293" href="Algebra.Monus.html#6968" class="Function">cancelˡ</a> <a id="1301" href="Codata.Stream.Segmented.html#1231" class="Bound">w</a> <a id="1303" class="Symbol">_</a> <a id="1305" href="Codata.Stream.Segmented.html#1249" class="Bound">k</a> <a id="1307" href="Codata.Stream.Segmented.html#1253" class="Bound">w∙i≡w∙k</a><a id="1314" class="Symbol">)</a> <a id="1316" href="Codata.Stream.Segmented.html#1235" class="Bound">xs</a> <a id="1319" class="Symbol">}</a>

<a id="1322" class="Comment">-- singleton</a>
<a id="pure"></a><a id="1335" href="Codata.Stream.Segmented.html#1335" class="Function">pure</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="Level.html#255" class="Generalizable">A</a> <a id="1344" class="Symbol">→</a> <a id="1346" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="1353" href="Level.html#255" class="Generalizable">A</a>
<a id="1355" href="Codata.Stream.Segmented.html#1335" class="Function">pure</a> <a id="1360" href="Codata.Stream.Segmented.html#1360" class="Bound">x</a> <a id="1362" class="Symbol">=</a> <a id="1364" href="Algebra.html#1444" class="Function">ε</a> <a id="1366" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="1368" class="Symbol">λ</a> <a id="1370" href="Codata.Stream.Segmented.html#1370" class="Bound">ε≺i</a> <a id="1374" class="Symbol">→</a> <a id="1376" href="Codata.Stream.Segmented.html#1360" class="Bound">x</a> <a id="1378" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1380" href="Codata.Stream.Segmented.html#1032" class="Function">empty</a>

<a id="replicate"></a><a id="1387" href="Codata.Stream.Segmented.html#1387" class="Function">replicate</a> <a id="1397" class="Symbol">:</a> <a id="1399" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1401" class="Symbol">→</a> <a id="1403" href="Level.html#255" class="Generalizable">A</a> <a id="1405" class="Symbol">→</a> <a id="1407" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="1414" href="Level.html#255" class="Generalizable">A</a>
<a id="1416" href="Codata.Stream.Segmented.html#1387" class="Function">replicate</a> <a id="1426" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>    <a id="1434" href="Codata.Stream.Segmented.html#1434" class="Bound">x</a> <a id="1436" class="Symbol">=</a> <a id="1438" href="Codata.Stream.Segmented.html#1032" class="Function">empty</a>
<a id="1444" href="Codata.Stream.Segmented.html#1387" class="Function">replicate</a> <a id="1454" class="Symbol">(</a><a id="1455" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="1459" href="Codata.Stream.Segmented.html#1459" class="Bound">n</a><a id="1460" class="Symbol">)</a> <a id="1462" href="Codata.Stream.Segmented.html#1462" class="Bound">x</a> <a id="1464" class="Symbol">=</a> <a id="1466" href="Algebra.html#1444" class="Function">ε</a> <a id="1468" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="1470" class="Symbol">λ</a> <a id="1472" href="Codata.Stream.Segmented.html#1472" class="Bound">ε≺i</a> <a id="1476" class="Symbol">→</a> <a id="1478" href="Codata.Stream.Segmented.html#1462" class="Bound">x</a> <a id="1480" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1482" href="Codata.Stream.Segmented.html#1387" class="Function">replicate</a> <a id="1492" href="Codata.Stream.Segmented.html#1459" class="Bound">n</a> <a id="1494" href="Codata.Stream.Segmented.html#1462" class="Bound">x</a>

<a id="1497" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1578" class="Comment">-- Infinite colists</a>
<a id="1598" class="Comment">--------------------------------------------------------------------------------</a>

<a id="1680" class="Keyword">module</a> <a id="1687" href="Codata.Stream.Segmented.html#1687" class="Module">_</a> <a id="1689" class="Symbol">(</a><a id="1690" href="Codata.Stream.Segmented.html#1690" class="Bound">fdc</a> <a id="1694" class="Symbol">:</a> <a id="1696" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="1708" href="Algebra.Monus.html#2465" class="Function Operator">_≺_</a><a id="1711" class="Symbol">)</a> <a id="1713" class="Symbol">(</a><a id="1714" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="1716" class="Symbol">:</a> <a id="1718" href="Algebra.html#1401" class="Function">𝑆</a> <a id="1720" class="Symbol">→</a> <a id="1722" href="Agda.Primitive.html#326" class="Primitive">Type</a> <a id="1727" href="Level.html#241" class="Generalizable">b</a><a id="1728" class="Symbol">)</a> <a id="1730" class="Keyword">where</a>
  <a id="1738" class="Keyword">module</a> <a id="1745" href="Codata.Stream.Segmented.html#1745" class="Module">_</a> <a id="1747" class="Symbol">(</a><a id="1748" href="Codata.Stream.Segmented.html#1748" class="Bound">ϕ</a> <a id="1750" class="Symbol">:</a> <a id="1752" class="Symbol">∀</a> <a id="1754" class="Symbol">{</a><a id="1755" href="Codata.Stream.Segmented.html#1755" class="Bound">i</a><a id="1756" class="Symbol">}</a> <a id="1758" class="Symbol">→</a> <a id="1760" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="1762" href="Codata.Stream.Segmented.html#1755" class="Bound">i</a> <a id="1764" class="Symbol">→</a> <a id="1766" href="Data.Sigma.Base.html#248" class="Function">∃[</a> <a id="1769" href="Codata.Stream.Segmented.html#1769" class="Bound">w</a> <a id="1771" href="Data.Sigma.Base.html#248" class="Function">]</a> <a id="1773" href="Data.Sigma.Base.html#248" class="Function">×</a> <a id="1775" class="Symbol">(</a><a id="1776" href="Codata.Stream.Segmented.html#1769" class="Bound">w</a> <a id="1778" href="Path.html#524" class="Function Operator">≢</a> <a id="1780" href="Algebra.html#1444" class="Function">ε</a><a id="1781" class="Symbol">)</a> <a id="1783" href="Data.Sigma.Base.html#523" class="Function Operator">×</a> <a id="1785" class="Symbol">((</a><a id="1787" href="Codata.Stream.Segmented.html#1787" class="Bound">w≺i</a> <a id="1791" class="Symbol">:</a> <a id="1793" href="Codata.Stream.Segmented.html#1769" class="Bound">w</a> <a id="1795" href="Algebra.Monus.html#2465" class="Function Operator">≺</a> <a id="1797" href="Codata.Stream.Segmented.html#1755" class="Bound">i</a><a id="1798" class="Symbol">)</a> <a id="1800" class="Symbol">→</a> <a id="1802" href="Level.html#255" class="Generalizable">A</a> <a id="1804" href="Data.Sigma.Base.html#523" class="Function Operator">×</a> <a id="1806" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="1808" class="Symbol">(</a><a id="1809" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1813" href="Codata.Stream.Segmented.html#1787" class="Bound">w≺i</a><a id="1816" class="Symbol">)))</a> <a id="1820" class="Keyword">where</a>
    <a id="1830" href="Codata.Stream.Segmented.html#1830" class="Function">unfold′</a> <a id="1838" class="Symbol">:</a> <a id="1840" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1844" href="Algebra.Monus.html#2465" class="Function Operator">_≺_</a> <a id="1848" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="1850" class="Symbol">→</a> <a id="1852" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="1854" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="1856" class="Symbol">→</a> <a id="1858" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="1866" href="Codata.Stream.Segmented.html#1802" class="Bound">A</a> <a id="1868" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a>
    <a id="1874" href="Codata.Stream.Segmented.html#1874" class="Function">unfold″</a> <a id="1882" class="Symbol">:</a> <a id="1884" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1888" href="Algebra.Monus.html#2465" class="Function Operator">_≺_</a> <a id="1892" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="1894" class="Symbol">→</a> <a id="1896" href="Data.Sigma.Base.html#248" class="Function">∃[</a> <a id="1899" href="Codata.Stream.Segmented.html#1899" class="Bound">w</a> <a id="1901" href="Data.Sigma.Base.html#248" class="Function">]</a> <a id="1903" href="Data.Sigma.Base.html#248" class="Function">×</a> <a id="1905" class="Symbol">(</a><a id="1906" href="Codata.Stream.Segmented.html#1899" class="Bound">w</a> <a id="1908" href="Path.html#524" class="Function Operator">≢</a> <a id="1910" href="Algebra.html#1444" class="Function">ε</a><a id="1911" class="Symbol">)</a> <a id="1913" href="Data.Sigma.Base.html#523" class="Function Operator">×</a> <a id="1915" class="Symbol">((</a><a id="1917" href="Codata.Stream.Segmented.html#1917" class="Bound">w≺i</a> <a id="1921" class="Symbol">:</a> <a id="1923" href="Codata.Stream.Segmented.html#1899" class="Bound">w</a> <a id="1925" href="Algebra.Monus.html#2465" class="Function Operator">≺</a> <a id="1927" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a><a id="1928" class="Symbol">)</a> <a id="1930" class="Symbol">→</a> <a id="1932" href="Codata.Stream.Segmented.html#1802" class="Bound">A</a> <a id="1934" href="Data.Sigma.Base.html#523" class="Function Operator">×</a> <a id="1936" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="1938" class="Symbol">(</a><a id="1939" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1943" href="Codata.Stream.Segmented.html#1917" class="Bound">w≺i</a><a id="1946" class="Symbol">))</a> <a id="1949" class="Symbol">→</a> <a id="1951" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="1959" href="Codata.Stream.Segmented.html#1802" class="Bound">A</a> <a id="1961" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a>
    <a id="1967" href="Codata.Stream.Segmented.html#1967" class="Function">unfold‴</a> <a id="1975" class="Symbol">:</a> <a id="1977" href="WellFounded.html#85" class="Datatype">Acc</a> <a id="1981" href="Algebra.Monus.html#2465" class="Function Operator">_≺_</a> <a id="1985" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="1987" class="Symbol">→</a> <a id="1989" class="Symbol">(</a><a id="1990" href="Codata.Stream.Segmented.html#1990" class="Bound">j≺i</a> <a id="1994" class="Symbol">:</a> <a id="1996" href="Codata.Stream.Segmented.html#830" class="Generalizable">j</a> <a id="1998" href="Algebra.Monus.html#2465" class="Function Operator">≺</a> <a id="2000" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a><a id="2001" class="Symbol">)</a> <a id="2003" class="Symbol">→</a> <a id="2005" href="Codata.Stream.Segmented.html#830" class="Generalizable">j</a> <a id="2007" href="Path.html#524" class="Function Operator">≢</a> <a id="2009" href="Algebra.html#1444" class="Function">ε</a> <a id="2011" class="Symbol">→</a> <a id="2013" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="2015" class="Symbol">(</a><a id="2016" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="2020" href="Codata.Stream.Segmented.html#1990" class="Bound">j≺i</a><a id="2023" class="Symbol">)</a> <a id="2025" class="Symbol">→</a> <a id="2027" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="2035" href="Codata.Stream.Segmented.html#1802" class="Bound">A</a> <a id="2037" class="Symbol">(</a><a id="2038" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="2042" href="Codata.Stream.Segmented.html#1990" class="Bound">j≺i</a><a id="2045" class="Symbol">)</a>

    <a id="2052" href="Codata.Stream.Segmented.html#1967" class="Function">unfold‴</a> <a id="2060" class="Symbol">(</a><a id="2061" href="WellFounded.html#161" class="InductiveConstructor">acc</a> <a id="2065" href="Codata.Stream.Segmented.html#2065" class="Bound">wf</a><a id="2067" class="Symbol">)</a> <a id="2069" class="Symbol">(</a><a id="2070" href="Codata.Stream.Segmented.html#2070" class="Bound">k</a> <a id="2072" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2074" href="Codata.Stream.Segmented.html#2074" class="Bound">i≡j∙k</a> <a id="2080" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2082" href="Codata.Stream.Segmented.html#2082" class="Bound">k≢ε</a><a id="2085" class="Symbol">)</a> <a id="2087" href="Codata.Stream.Segmented.html#2087" class="Bound">j≢ε</a> <a id="2091" href="Codata.Stream.Segmented.html#2091" class="Bound">xs</a> <a id="2094" class="Symbol">=</a> <a id="2096" href="Codata.Stream.Segmented.html#1830" class="Function">unfold′</a> <a id="2104" class="Symbol">(</a><a id="2105" href="Codata.Stream.Segmented.html#2065" class="Bound">wf</a> <a id="2108" class="Symbol">_</a> <a id="2110" class="Symbol">((_</a> <a id="2114" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2116" href="Codata.Stream.Segmented.html#2074" class="Bound">i≡j∙k</a> <a id="2122" href="Cubical.Foundations.Id.html#737" class="Function Operator">;</a> <a id="2124" href="Algebra.html#2901" class="Function">comm</a> <a id="2129" class="Symbol">_</a> <a id="2131" class="Symbol">_</a> <a id="2133" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2135" href="Codata.Stream.Segmented.html#2087" class="Bound">j≢ε</a><a id="2138" class="Symbol">)))</a> <a id="2142" href="Codata.Stream.Segmented.html#2091" class="Bound">xs</a>

    <a id="2150" href="Codata.Stream.Segmented.html#1874" class="Function">unfold″</a> <a id="2158" href="Codata.Stream.Segmented.html#2158" class="Bound">a</a> <a id="2160" class="Symbol">(</a><a id="2161" href="Codata.Stream.Segmented.html#2161" class="Bound">w</a> <a id="2163" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2165" href="Codata.Stream.Segmented.html#2165" class="Bound">w≢ε</a> <a id="2169" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2171" href="Codata.Stream.Segmented.html#2171" class="Bound">xs′</a><a id="2174" class="Symbol">)</a> <a id="2176" class="Symbol">=</a> <a id="2178" href="Codata.Stream.Segmented.html#2161" class="Bound">w</a> <a id="2180" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="2182" class="Symbol">λ</a> <a id="2184" href="Codata.Stream.Segmented.html#2184" class="Bound">w≺i</a> <a id="2188" class="Symbol">→</a> <a id="2190" href="Data.Sigma.Base.html#1272" class="Function">map₂</a> <a id="2195" class="Symbol">(</a><a id="2196" href="Codata.Stream.Segmented.html#1967" class="Function">unfold‴</a> <a id="2204" href="Codata.Stream.Segmented.html#2158" class="Bound">a</a> <a id="2206" href="Codata.Stream.Segmented.html#2184" class="Bound">w≺i</a> <a id="2210" href="Codata.Stream.Segmented.html#2165" class="Bound">w≢ε</a><a id="2213" class="Symbol">)</a> <a id="2215" class="Symbol">(</a><a id="2216" href="Codata.Stream.Segmented.html#2171" class="Bound">xs′</a> <a id="2220" href="Codata.Stream.Segmented.html#2184" class="Bound">w≺i</a><a id="2223" class="Symbol">)</a>

    <a id="2230" href="Codata.Stream.Segmented.html#1830" class="Function">unfold′</a> <a id="2238" href="Codata.Stream.Segmented.html#2238" class="Bound">a</a> <a id="2240" href="Codata.Stream.Segmented.html#2240" class="Bound">xs</a> <a id="2243" class="Symbol">=</a> <a id="2245" href="Codata.Stream.Segmented.html#1874" class="Function">unfold″</a> <a id="2253" href="Codata.Stream.Segmented.html#2238" class="Bound">a</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Codata.Stream.Segmented.html#1748" class="Bound">ϕ</a> <a id="2258" href="Codata.Stream.Segmented.html#2240" class="Bound">xs</a><a id="2260" class="Symbol">)</a>

    <a id="2267" href="Codata.Stream.Segmented.html#2267" class="Function">unfold</a> <a id="2274" class="Symbol">:</a> <a id="2276" class="Symbol">(∀</a> <a id="2279" class="Symbol">{</a><a id="2280" href="Codata.Stream.Segmented.html#2280" class="Bound">i</a><a id="2281" class="Symbol">}</a> <a id="2283" class="Symbol">→</a> <a id="2285" href="Codata.Stream.Segmented.html#1714" class="Bound">B</a> <a id="2287" href="Codata.Stream.Segmented.html#2280" class="Bound">i</a><a id="2288" class="Symbol">)</a> <a id="2290" class="Symbol">→</a> <a id="2292" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="2299" href="Codata.Stream.Segmented.html#1802" class="Bound">A</a>
    <a id="2305" href="Codata.Stream.Segmented.html#2267" class="Function">unfold</a> <a id="2312" href="Codata.Stream.Segmented.html#2312" class="Bound">xs</a> <a id="2315" class="Symbol">{</a><a id="2316" href="Codata.Stream.Segmented.html#2316" class="Bound">i</a><a id="2317" class="Symbol">}</a> <a id="2319" class="Symbol">=</a> <a id="2321" href="Codata.Stream.Segmented.html#1830" class="Function">unfold′</a> <a id="2329" class="Symbol">(</a><a id="2330" href="Codata.Stream.Segmented.html#1690" class="Bound">fdc</a> <a id="2334" href="Codata.Stream.Segmented.html#2316" class="Bound">i</a><a id="2335" class="Symbol">)</a> <a id="2337" href="Codata.Stream.Segmented.html#2312" class="Bound">xs</a>

<a id="2341" class="Comment">-- The definition of the list lets us construct an infinite colist as long as</a>
<a id="2419" class="Comment">-- every entry uses some &quot;fuel&quot;.</a>
<a id="2452" class="Keyword">module</a> <a id="2459" href="Codata.Stream.Segmented.html#2459" class="Module">_</a> <a id="2461" class="Symbol">(</a><a id="2462" href="Codata.Stream.Segmented.html#2462" class="Bound">fdc</a> <a id="2466" class="Symbol">:</a> <a id="2468" href="WellFounded.html#383" class="Function">WellFounded</a> <a id="2480" href="Algebra.Monus.html#2465" class="Function Operator">_≺_</a><a id="2483" class="Symbol">)</a> <a id="2485" class="Symbol">(</a><a id="2486" href="Codata.Stream.Segmented.html#2486" class="Bound">s</a> <a id="2488" class="Symbol">:</a> <a id="2490" href="Algebra.html#1401" class="Function">𝑆</a><a id="2491" class="Symbol">)</a> <a id="2493" class="Symbol">(</a><a id="2494" href="Codata.Stream.Segmented.html#2494" class="Bound">s≢ε</a> <a id="2498" class="Symbol">:</a> <a id="2500" href="Codata.Stream.Segmented.html#2486" class="Bound">s</a> <a id="2502" href="Path.html#524" class="Function Operator">≢</a> <a id="2504" href="Algebra.html#1444" class="Function">ε</a><a id="2505" class="Symbol">)</a> <a id="2507" class="Symbol">(</a><a id="2508" href="Codata.Stream.Segmented.html#2508" class="Bound">x</a> <a id="2510" class="Symbol">:</a> <a id="2512" href="Level.html#255" class="Generalizable">A</a><a id="2513" class="Symbol">)</a> <a id="2515" class="Keyword">where</a>
  <a id="2523" href="Codata.Stream.Segmented.html#2523" class="Function">repeat</a> <a id="2530" class="Symbol">:</a> <a id="2532" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="2539" href="Codata.Stream.Segmented.html#2512" class="Bound">A</a>
  <a id="2543" href="Codata.Stream.Segmented.html#2523" class="Function">repeat</a> <a id="2550" class="Symbol">=</a> <a id="2552" href="Codata.Stream.Segmented.html#2267" class="Function">unfold</a> <a id="2559" href="Codata.Stream.Segmented.html#2462" class="Bound">fdc</a> <a id="2563" class="Symbol">(</a><a id="2564" href="Function.html#589" class="Function">const</a> <a id="2570" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a><a id="2571" class="Symbol">)</a> <a id="2573" class="Symbol">(λ</a> <a id="2576" href="Codata.Stream.Segmented.html#2576" class="Bound">_</a> <a id="2578" class="Symbol">→</a> <a id="2580" href="Codata.Stream.Segmented.html#2486" class="Bound">s</a> <a id="2582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2584" href="Codata.Stream.Segmented.html#2494" class="Bound">s≢ε</a> <a id="2588" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2590" href="Function.html#589" class="Function">const</a> <a id="2596" class="Symbol">(</a><a id="2597" href="Codata.Stream.Segmented.html#2508" class="Bound">x</a> <a id="2599" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2601" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="2603" class="Symbol">))</a> <a id="2606" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a>

<a id="2610" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2691" class="Comment">-- Manipulating colists</a>
<a id="2715" class="Comment">--------------------------------------------------------------------------------</a>
<a id="map"></a><a id="2796" href="Codata.Stream.Segmented.html#2796" class="Function">map</a> <a id="2800" class="Symbol">:</a> <a id="2802" class="Symbol">(</a><a id="2803" href="Level.html#255" class="Generalizable">A</a> <a id="2805" class="Symbol">→</a> <a id="2807" href="Level.html#269" class="Generalizable">B</a><a id="2808" class="Symbol">)</a> <a id="2810" class="Symbol">→</a> <a id="2812" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="2820" href="Level.html#255" class="Generalizable">A</a> <a id="2822" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a> <a id="2824" class="Symbol">→</a> <a id="2826" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="2834" href="Level.html#269" class="Generalizable">B</a> <a id="2836" href="Codata.Stream.Segmented.html#828" class="Generalizable">i</a>
<a id="2838" href="Codata.Stream.Segmented.html#2796" class="Function">map</a> <a id="2842" href="Codata.Stream.Segmented.html#2842" class="Bound">f</a> <a id="2844" class="Symbol">(</a><a id="2845" href="Codata.Stream.Segmented.html#2845" class="Bound">w</a> <a id="2847" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="2849" href="Codata.Stream.Segmented.html#2849" class="Bound">xs</a><a id="2851" class="Symbol">)</a> <a id="2853" class="Symbol">=</a> <a id="2855" href="Codata.Stream.Segmented.html#2845" class="Bound">w</a> <a id="2857" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="2859" class="Symbol">λ</a> <a id="2861" href="Codata.Stream.Segmented.html#2861" class="Bound">w≺i</a> <a id="2865" class="Symbol">→</a> <a id="2867" href="Function.html#1099" class="Function Operator">case</a> <a id="2872" href="Codata.Stream.Segmented.html#2849" class="Bound">xs</a> <a id="2875" href="Codata.Stream.Segmented.html#2861" class="Bound">w≺i</a> <a id="2879" href="Function.html#1099" class="Function Operator">of</a> <a id="2882" class="Symbol">λ</a> <a id="2884" class="Symbol">{</a> <a id="2886" class="Symbol">(</a><a id="2887" href="Codata.Stream.Segmented.html#2887" class="Bound">y</a> <a id="2889" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2891" href="Codata.Stream.Segmented.html#2891" class="Bound">ys</a><a id="2893" class="Symbol">)</a> <a id="2895" class="Symbol">→</a> <a id="2897" href="Codata.Stream.Segmented.html#2842" class="Bound">f</a> <a id="2899" href="Codata.Stream.Segmented.html#2887" class="Bound">y</a> <a id="2901" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2903" href="Codata.Stream.Segmented.html#2796" class="Function">map</a> <a id="2907" href="Codata.Stream.Segmented.html#2842" class="Bound">f</a> <a id="2909" href="Codata.Stream.Segmented.html#2891" class="Bound">ys</a> <a id="2912" class="Symbol">}</a>

<a id="2915" class="Keyword">open</a> <a id="2920" class="Keyword">import</a> <a id="2927" href="Data.List.html" class="Module">Data.List</a> <a id="2937" class="Keyword">using</a> <a id="2943" class="Symbol">(</a><a id="2944" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="2948" class="Symbol">;</a> <a id="2950" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="2953" class="Symbol">;</a> <a id="2955" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="2957" class="Symbol">)</a>

<a id="take′"></a><a id="2960" href="Codata.Stream.Segmented.html#2960" class="Function">take′</a> <a id="2966" class="Symbol">:</a> <a id="2968" class="Symbol">∀</a> <a id="2970" href="Codata.Stream.Segmented.html#2970" class="Bound">i</a> <a id="2972" class="Symbol">→</a> <a id="2974" href="Codata.Stream.Segmented.html#281" class="Datatype">Stream′</a> <a id="2982" href="Level.html#255" class="Generalizable">A</a> <a id="2984" href="Codata.Stream.Segmented.html#2970" class="Bound">i</a> <a id="2986" class="Symbol">→</a> <a id="2988" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2993" href="Level.html#255" class="Generalizable">A</a>
<a id="2995" href="Codata.Stream.Segmented.html#2960" class="Function">take′</a> <a id="3001" href="Codata.Stream.Segmented.html#3001" class="Bound">i</a> <a id="3003" class="Symbol">(</a><a id="3004" href="Codata.Stream.Segmented.html#3004" class="Bound">w</a> <a id="3006" href="Codata.Stream.Segmented.html#338" class="InductiveConstructor Operator">◃</a> <a id="3008" href="Codata.Stream.Segmented.html#3008" class="Bound">xs</a><a id="3010" class="Symbol">)</a> <a id="3012" class="Keyword">with</a> <a id="3017" href="Codata.Stream.Segmented.html#3004" class="Bound">w</a> <a id="3019" href="Relation.Binary.html#2987" class="Function Operator">&lt;?</a> <a id="3022" href="Codata.Stream.Segmented.html#3001" class="Bound">i</a>
<a id="3024" class="Symbol">...</a> <a id="3028" class="Symbol">|</a> <a id="3030" href="Relation.Nullary.Decidable.html#433" class="InductiveConstructor">no</a> <a id="3033" class="Symbol">_</a> <a id="3035" class="Symbol">=</a> <a id="3037" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>
<a id="3040" class="Symbol">...</a> <a id="3044" class="Symbol">|</a> <a id="3046" href="Relation.Nullary.Decidable.html#399" class="InductiveConstructor">yes</a> <a id="3050" href="Codata.Stream.Segmented.html#3050" class="Bound">w&lt;i</a> <a id="3054" class="Keyword">with</a> <a id="3059" class="Bound">xs</a> <a id="3062" class="Symbol">(</a><a id="3063" href="Algebra.Monus.html#4322" class="Function">&lt;⇒≺</a> <a id="3067" class="Symbol">_</a> <a id="3069" class="Symbol">_</a> <a id="3071" href="Codata.Stream.Segmented.html#3050" class="Bound">w&lt;i</a><a id="3074" class="Symbol">)</a>
<a id="3076" class="Symbol">...</a> <a id="3080" class="Symbol">|</a> <a id="3082" href="Codata.Stream.Segmented.html#3082" class="Bound">y</a> <a id="3084" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3086" href="Codata.Stream.Segmented.html#3086" class="Bound">ys</a> <a id="3089" class="Symbol">=</a> <a id="3091" href="Codata.Stream.Segmented.html#3082" class="Bound">y</a> <a id="3093" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3095" href="Codata.Stream.Segmented.html#2960" class="Function">take′</a> <a id="3101" class="Symbol">_</a> <a id="3103" href="Codata.Stream.Segmented.html#3086" class="Bound">ys</a>

<a id="take"></a><a id="3107" href="Codata.Stream.Segmented.html#3107" class="Function">take</a> <a id="3112" class="Symbol">:</a> <a id="3114" href="Algebra.html#1401" class="Function">𝑆</a> <a id="3116" class="Symbol">→</a> <a id="3118" href="Codata.Stream.Segmented.html#741" class="Function">Stream</a> <a id="3125" href="Level.html#255" class="Generalizable">A</a> <a id="3127" class="Symbol">→</a> <a id="3129" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3134" href="Level.html#255" class="Generalizable">A</a>
<a id="3136" href="Codata.Stream.Segmented.html#3107" class="Function">take</a> <a id="3141" href="Codata.Stream.Segmented.html#3141" class="Bound">x</a> <a id="3143" href="Codata.Stream.Segmented.html#3143" class="Bound">xs</a> <a id="3146" class="Symbol">=</a> <a id="3148" href="Codata.Stream.Segmented.html#2960" class="Function">take′</a> <a id="3154" href="Codata.Stream.Segmented.html#3141" class="Bound">x</a> <a id="3156" href="Codata.Stream.Segmented.html#3143" class="Bound">xs</a>
</pre></body></html>