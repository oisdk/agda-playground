<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Binary.Conversion.Fast</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Data.Binary.Conversion.Fast.html" class="Module">Data.Binary.Conversion.Fast</a> <a id="36" class="Keyword">where</a>

<a id="43" class="Comment">-- This module provides a conversion function from</a>
<a id="94" class="Comment">-- nats which uses built-in functions.</a>
<a id="133" class="Comment">-- It is dramatically faster than the normal conversion</a>
<a id="189" class="Comment">-- even at smaller numbers.</a>

<a id="218" class="Keyword">open</a> <a id="223" class="Keyword">import</a> <a id="230" href="Data.Binary.Definition.html" class="Module">Data.Binary.Definition</a>
<a id="253" class="Keyword">open</a> <a id="258" class="Keyword">import</a> <a id="265" href="Data.Binary.Helpers.html" class="Module">Data.Binary.Helpers</a>

<a id="⟦_⇑⟧⟨_⟩"></a><a id="286" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦_⇑⟧⟨_⟩</a> <a id="294" class="Symbol">:</a> <a id="296" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="298" class="Symbol">→</a> <a id="300" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="302" class="Symbol">→</a> <a id="304" href="Data.Binary.Definition.html#60" class="Datatype">𝔹</a>
<a id="306" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="308" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="312" href="Data.Binary.Conversion.Fast.html#312" class="Bound">n</a> <a id="314" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="318" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="322" href="Data.Binary.Conversion.Fast.html#322" class="Bound">w</a> <a id="324" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a> <a id="326" class="Symbol">=</a>
  <a id="330" href="Data.Binary.Helpers.html#449" class="Function Operator">if</a> <a id="333" href="Data.Binary.Helpers.html#328" class="Function">even</a> <a id="338" href="Data.Binary.Conversion.Fast.html#312" class="Bound">n</a>
    <a id="344" href="Data.Binary.Helpers.html#449" class="Function Operator">then</a> <a id="349" href="Data.Binary.Definition.html#85" class="InductiveConstructor Operator">1ᵇ</a> <a id="352" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="354" href="Data.Binary.Helpers.html#382" class="Function">div2</a> <a id="359" href="Data.Binary.Conversion.Fast.html#312" class="Bound">n</a> <a id="361" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="365" href="Data.Binary.Conversion.Fast.html#322" class="Bound">w</a> <a id="367" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a>
    <a id="373" href="Data.Binary.Helpers.html#449" class="Function Operator">else</a> <a id="378" href="Data.Binary.Definition.html#89" class="InductiveConstructor Operator">2ᵇ</a> <a id="381" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="383" href="Data.Binary.Helpers.html#382" class="Function">div2</a> <a id="388" href="Data.Binary.Conversion.Fast.html#312" class="Bound">n</a> <a id="390" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="394" href="Data.Binary.Conversion.Fast.html#322" class="Bound">w</a> <a id="396" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a>
<a id="398" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="400" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a>  <a id="406" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="410" class="Symbol">_</a>    <a id="415" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a> <a id="417" class="Symbol">=</a> <a id="419" href="Data.Binary.Definition.html#76" class="InductiveConstructor">0ᵇ</a>
<a id="422" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="424" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="428" class="Symbol">_</a> <a id="430" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="434" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a> <a id="439" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a> <a id="441" class="Symbol">=</a> <a id="443" href="Data.Binary.Definition.html#76" class="InductiveConstructor">0ᵇ</a> <a id="446" class="Comment">-- will not happen</a>

<a id="466" class="Comment">-- We build the output by repeatedly halving the input,</a>
<a id="522" class="Comment">-- but we also pass in the number to reduce as we go so that</a>
<a id="583" class="Comment">-- we satisfy the termination checker.</a>
<a id="⟦_⇑⟧"></a><a id="622" href="Data.Binary.Conversion.Fast.html#622" class="Function Operator">⟦_⇑⟧</a> <a id="627" class="Symbol">:</a> <a id="629" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="631" class="Symbol">→</a> <a id="633" href="Data.Binary.Definition.html#60" class="Datatype">𝔹</a>
<a id="635" href="Data.Binary.Conversion.Fast.html#622" class="Function Operator">⟦</a> <a id="637" href="Data.Binary.Conversion.Fast.html#637" class="Bound">n</a> <a id="639" href="Data.Binary.Conversion.Fast.html#622" class="Function Operator">⇑⟧</a> <a id="642" class="Symbol">=</a> <a id="644" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟦</a> <a id="646" href="Data.Binary.Conversion.Fast.html#637" class="Bound">n</a> <a id="648" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⇑⟧⟨</a> <a id="652" href="Data.Binary.Conversion.Fast.html#637" class="Bound">n</a> <a id="654" href="Data.Binary.Conversion.Fast.html#286" class="Function Operator">⟩</a>
<a id="656" class="Symbol">{-#</a> <a id="660" class="Keyword">INLINE</a> <a id="667" href="Data.Binary.Conversion.Fast.html#622" class="Function Operator">⟦_⇑⟧</a> <a id="672" class="Symbol">#-}</a>
</pre></body></html>