<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Permutation</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Data.Permutation.html" class="Module">Data.Permutation</a> <a id="25" class="Keyword">where</a>

<a id="32" class="Keyword">open</a> <a id="37" class="Keyword">import</a> <a id="44" href="Prelude.html" class="Module">Prelude</a>
<a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Data.List.html" class="Module">Data.List</a>
<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="106" class="Keyword">renaming</a> <a id="115" class="Symbol">(</a><a id="116" href="Data.Nat.Properties.html#931" class="Function">discreteℕ</a> <a id="126" class="Symbol">to</a> <a id="129" class="Function">_≟_</a><a id="132" class="Symbol">)</a>

<a id="Swaps"></a><a id="135" href="Data.Permutation.html#135" class="Function">Swaps</a> <a id="141" class="Symbol">:</a> <a id="143" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="148" href="Data.Permutation.html#135" class="Function">Swaps</a> <a id="154" class="Symbol">=</a> <a id="156" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="161" class="Symbol">(</a><a id="162" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="164" href="Data.Sigma.Base.html#455" class="Function Operator">×</a> <a id="166" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="167" class="Symbol">)</a>

<a id="swap"></a><a id="170" href="Data.Permutation.html#170" class="Function">swap</a> <a id="175" class="Symbol">:</a> <a id="177" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="179" class="Symbol">→</a> <a id="181" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="183" class="Symbol">→</a> <a id="185" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="187" class="Symbol">→</a> <a id="189" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="191" href="Data.Permutation.html#170" class="Function">swap</a> <a id="196" href="Data.Permutation.html#196" class="Bound">x</a> <a id="198" href="Data.Permutation.html#198" class="Bound">y</a> <a id="200" href="Data.Permutation.html#200" class="Bound">z</a> <a id="202" class="Symbol">=</a>
  <a id="206" href="Data.Bool.Base.html#596" class="Function Operator">if</a> <a id="209" href="Relation.Nullary.Decidable.html#316" class="Field">does</a> <a id="214" class="Symbol">(</a><a id="215" href="Data.Permutation.html#196" class="Bound">x</a> <a id="217" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="219" href="Data.Permutation.html#200" class="Bound">z</a><a id="220" class="Symbol">)</a> <a id="222" href="Data.Bool.Base.html#596" class="Function Operator">then</a> <a id="227" href="Data.Permutation.html#198" class="Bound">y</a> <a id="229" href="Data.Bool.Base.html#596" class="Function Operator">else</a>
  <a id="236" href="Data.Bool.Base.html#596" class="Function Operator">if</a> <a id="239" href="Relation.Nullary.Decidable.html#316" class="Field">does</a> <a id="244" class="Symbol">(</a><a id="245" href="Data.Permutation.html#198" class="Bound">y</a> <a id="247" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="249" href="Data.Permutation.html#200" class="Bound">z</a><a id="250" class="Symbol">)</a> <a id="252" href="Data.Bool.Base.html#596" class="Function Operator">then</a> <a id="257" href="Data.Permutation.html#196" class="Bound">x</a> <a id="259" href="Data.Bool.Base.html#596" class="Function Operator">else</a>
  <a id="266" href="Data.Permutation.html#200" class="Bound">z</a>

<a id="swap-lhs"></a><a id="269" href="Data.Permutation.html#269" class="Function">swap-lhs</a> <a id="278" class="Symbol">:</a> <a id="280" class="Symbol">∀</a> <a id="282" href="Data.Permutation.html#282" class="Bound">x</a> <a id="284" href="Data.Permutation.html#284" class="Bound">y</a> <a id="286" class="Symbol">→</a> <a id="288" href="Data.Permutation.html#170" class="Function">swap</a> <a id="293" href="Data.Permutation.html#282" class="Bound">x</a> <a id="295" href="Data.Permutation.html#284" class="Bound">y</a> <a id="297" href="Data.Permutation.html#282" class="Bound">x</a> <a id="299" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="301" href="Data.Permutation.html#284" class="Bound">y</a>
<a id="303" href="Data.Permutation.html#269" class="Function">swap-lhs</a> <a id="312" href="Data.Permutation.html#312" class="Bound">x</a> <a id="314" href="Data.Permutation.html#314" class="Bound">y</a> <a id="316" class="Keyword">with</a> <a id="321" href="Data.Permutation.html#312" class="Bound">x</a> <a id="323" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="325" href="Data.Permutation.html#312" class="Bound">x</a>
<a id="327" class="Symbol">...</a> <a id="331" class="Symbol">|</a> <a id="333" href="Relation.Nullary.Decidable.html#416" class="InductiveConstructor">no</a>  <a id="337" href="Data.Permutation.html#337" class="Bound">x≢x</a> <a id="341" class="Symbol">=</a> <a id="343" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="350" class="Symbol">(</a><a id="351" href="Data.Permutation.html#337" class="Bound">x≢x</a> <a id="355" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a><a id="359" class="Symbol">)</a> 
<a id="362" class="Symbol">...</a> <a id="366" class="Symbol">|</a> <a id="368" href="Relation.Nullary.Decidable.html#382" class="InductiveConstructor">yes</a> <a id="372" href="Data.Permutation.html#372" class="Bound">x≡x</a> <a id="376" class="Symbol">=</a> <a id="378" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>

<a id="swap-rhs"></a><a id="384" href="Data.Permutation.html#384" class="Function">swap-rhs</a> <a id="393" class="Symbol">:</a> <a id="395" class="Symbol">∀</a> <a id="397" href="Data.Permutation.html#397" class="Bound">x</a> <a id="399" href="Data.Permutation.html#399" class="Bound">y</a> <a id="401" class="Symbol">→</a> <a id="403" href="Data.Permutation.html#170" class="Function">swap</a> <a id="408" href="Data.Permutation.html#397" class="Bound">x</a> <a id="410" href="Data.Permutation.html#399" class="Bound">y</a> <a id="412" href="Data.Permutation.html#399" class="Bound">y</a> <a id="414" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="416" href="Data.Permutation.html#397" class="Bound">x</a>
<a id="418" href="Data.Permutation.html#384" class="Function">swap-rhs</a> <a id="427" href="Data.Permutation.html#427" class="Bound">x</a> <a id="429" href="Data.Permutation.html#429" class="Bound">y</a> <a id="431" class="Keyword">with</a> <a id="436" href="Data.Permutation.html#427" class="Bound">x</a> <a id="438" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="440" href="Data.Permutation.html#429" class="Bound">y</a>
<a id="442" class="Symbol">...</a> <a id="446" class="Symbol">|</a> <a id="448" href="Relation.Nullary.Decidable.html#382" class="InductiveConstructor">yes</a> <a id="452" href="Data.Permutation.html#452" class="Bound">x≡y</a> <a id="456" class="Symbol">=</a> <a id="458" href="Cubical.Foundations.Prelude.html#968" class="Function">sym</a> <a id="462" href="Data.Permutation.html#452" class="Bound">x≡y</a>
<a id="466" class="Symbol">...</a> <a id="470" class="Symbol">|</a> <a id="472" href="Relation.Nullary.Decidable.html#416" class="InductiveConstructor">no</a>  <a id="476" href="Data.Permutation.html#476" class="Bound">x≢y</a> <a id="480" class="Keyword">with</a> <a id="485" class="Bound">y</a> <a id="487" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="489" class="Bound">y</a>
<a id="491" class="Symbol">...</a> <a id="495" class="Symbol">|</a> <a id="497" href="Relation.Nullary.Decidable.html#416" class="InductiveConstructor">no</a>  <a id="501" href="Data.Permutation.html#501" class="Bound">y≢y</a> <a id="505" class="Symbol">=</a> <a id="507" href="Data.Empty.Base.html#154" class="Function">⊥-elim</a> <a id="514" class="Symbol">(</a><a id="515" href="Data.Permutation.html#501" class="Bound">y≢y</a> <a id="519" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a><a id="523" class="Symbol">)</a>
<a id="525" class="Symbol">...</a> <a id="529" class="Symbol">|</a> <a id="531" href="Relation.Nullary.Decidable.html#382" class="InductiveConstructor">yes</a> <a id="535" href="Data.Permutation.html#535" class="Bound">y≡y</a> <a id="539" class="Symbol">=</a> <a id="541" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>

<a id="swap-id"></a><a id="547" href="Data.Permutation.html#547" class="Function">swap-id</a> <a id="555" class="Symbol">:</a> <a id="557" class="Symbol">∀</a> <a id="559" href="Data.Permutation.html#559" class="Bound">x</a> <a id="561" href="Data.Permutation.html#561" class="Bound">y</a> <a id="563" class="Symbol">→</a> <a id="565" href="Data.Permutation.html#170" class="Function">swap</a> <a id="570" href="Data.Permutation.html#559" class="Bound">x</a> <a id="572" href="Data.Permutation.html#559" class="Bound">x</a> <a id="574" href="Data.Permutation.html#561" class="Bound">y</a> <a id="576" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="578" href="Data.Permutation.html#561" class="Bound">y</a>
<a id="580" href="Data.Permutation.html#547" class="Function">swap-id</a> <a id="588" href="Data.Permutation.html#588" class="Bound">x</a> <a id="590" href="Data.Permutation.html#590" class="Bound">y</a> <a id="592" class="Keyword">with</a> <a id="597" href="Data.Permutation.html#588" class="Bound">x</a> <a id="599" href="Data.Permutation.html#129" class="Function Operator">≟</a> <a id="601" href="Data.Permutation.html#590" class="Bound">y</a>
<a id="603" class="Symbol">...</a> <a id="607" class="Symbol">|</a> <a id="609" href="Relation.Nullary.Decidable.html#416" class="InductiveConstructor">no</a> <a id="612" class="Symbol">_</a> <a id="614" class="Symbol">=</a> <a id="616" href="Cubical.Foundations.Prelude.html#915" class="Function">refl</a>
<a id="621" class="Symbol">...</a> <a id="625" class="Symbol">|</a> <a id="627" href="Relation.Nullary.Decidable.html#382" class="InductiveConstructor">yes</a> <a id="631" href="Data.Permutation.html#631" class="Bound">x≡y</a> <a id="635" class="Symbol">=</a> <a id="637" href="Data.Permutation.html#631" class="Bound">x≡y</a>

<a id="perm"></a><a id="642" href="Data.Permutation.html#642" class="Function">perm</a> <a id="647" class="Symbol">:</a> <a id="649" href="Data.Permutation.html#135" class="Function">Swaps</a> <a id="655" class="Symbol">→</a> <a id="657" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="659" class="Symbol">→</a> <a id="661" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="663" href="Data.Permutation.html#642" class="Function">perm</a> <a id="668" class="Symbol">=</a> <a id="670" href="Function.html#369" class="Function">flip</a> <a id="675" class="Symbol">(</a><a id="676" href="Data.List.Base.html#463" class="Function">foldl</a> <a id="682" class="Symbol">(</a><a id="683" href="Function.html#369" class="Function">flip</a> <a id="688" class="Symbol">(</a><a id="689" href="Data.Sigma.Base.html#711" class="Function">uncurry</a> <a id="697" href="Data.Permutation.html#170" class="Function">swap</a><a id="701" class="Symbol">)))</a>

<a id="706" class="Keyword">data</a> <a id="Perm"></a><a id="711" href="Data.Permutation.html#711" class="Datatype">Perm</a> <a id="716" class="Symbol">:</a> <a id="718" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="723" class="Keyword">where</a>
  <a id="Perm.&lt;_&gt;"></a><a id="731" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&lt;_&gt;</a> <a id="735" class="Symbol">:</a> <a id="737" href="Data.Permutation.html#135" class="Function">Swaps</a> <a id="743" class="Symbol">→</a> <a id="745" href="Data.Permutation.html#711" class="Datatype">Perm</a>
  <a id="Perm.eq"></a><a id="752" href="Data.Permutation.html#752" class="InductiveConstructor">eq</a> <a id="755" class="Symbol">:</a> <a id="757" class="Symbol">(</a><a id="758" href="Data.Permutation.html#758" class="Bound">x</a> <a id="760" href="Data.Permutation.html#760" class="Bound">y</a> <a id="762" class="Symbol">:</a> <a id="764" href="Data.Permutation.html#135" class="Function">Swaps</a><a id="769" class="Symbol">)</a> <a id="771" class="Symbol">→</a> <a id="773" class="Symbol">(∀</a> <a id="776" href="Data.Permutation.html#776" class="Bound">n</a> <a id="778" class="Symbol">→</a> <a id="780" href="Data.Permutation.html#642" class="Function">perm</a> <a id="785" href="Data.Permutation.html#758" class="Bound">x</a> <a id="787" href="Data.Permutation.html#776" class="Bound">n</a> <a id="789" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="791" href="Data.Permutation.html#642" class="Function">perm</a> <a id="796" href="Data.Permutation.html#760" class="Bound">y</a> <a id="798" href="Data.Permutation.html#776" class="Bound">n</a><a id="799" class="Symbol">)</a> <a id="801" class="Symbol">→</a> <a id="803" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&lt;</a> <a id="805" href="Data.Permutation.html#758" class="Bound">x</a> <a id="807" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&gt;</a> <a id="809" href="Agda.Builtin.Cubical.Path.html#272" class="Function Operator">≡</a> <a id="811" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&lt;</a> <a id="813" href="Data.Permutation.html#760" class="Bound">y</a> <a id="815" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&gt;</a>

<a id="_·_"></a><a id="818" href="Data.Permutation.html#818" class="Function Operator">_·_</a> <a id="822" class="Symbol">:</a> <a id="824" href="Data.Permutation.html#711" class="Datatype">Perm</a> <a id="829" class="Symbol">→</a> <a id="831" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="833" class="Symbol">→</a> <a id="835" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="837" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&lt;</a> <a id="839" href="Data.Permutation.html#839" class="Bound">x</a> <a id="841" href="Data.Permutation.html#731" class="InductiveConstructor Operator">&gt;</a> <a id="843" href="Data.Permutation.html#818" class="Function Operator">·</a> <a id="845" href="Data.Permutation.html#845" class="Bound">n</a> <a id="847" class="Symbol">=</a> <a id="849" href="Data.Permutation.html#642" class="Function">perm</a> <a id="854" href="Data.Permutation.html#839" class="Bound">x</a> <a id="856" href="Data.Permutation.html#845" class="Bound">n</a>
<a id="858" href="Data.Permutation.html#752" class="InductiveConstructor">eq</a> <a id="861" href="Data.Permutation.html#861" class="Bound">x</a> <a id="863" href="Data.Permutation.html#863" class="Bound">y</a> <a id="865" href="Data.Permutation.html#865" class="Bound">e</a> <a id="867" href="Data.Permutation.html#867" class="Bound">i</a> <a id="869" href="Data.Permutation.html#818" class="Function Operator">·</a> <a id="871" href="Data.Permutation.html#871" class="Bound">n</a> <a id="873" class="Symbol">=</a> <a id="875" href="Data.Permutation.html#865" class="Bound">e</a> <a id="877" href="Data.Permutation.html#871" class="Bound">n</a> <a id="879" href="Data.Permutation.html#867" class="Bound">i</a>

<a id="882" class="Comment">-- module _ (f : ℕ → ℕ → A → A) (b : A)</a>
<a id="922" class="Comment">--          (unswap : ∀ n m x → f n m (f m n x) ≡ x)</a>
<a id="975" class="Comment">--          (swapid : ∀ n x → f n n x ≡ x)</a>
<a id="1018" class="Comment">--          where</a>

<a id="1037" class="Comment">--   perm-id : (x : Swaps) → (∀ n → perm x n ≡ n) → foldr (uncurry f) b x ≡ b</a>
<a id="1115" class="Comment">--   perm-id [] p = refl</a>
<a id="1140" class="Comment">--   perm-id ((x , y) ∷ xs) p =</a>
<a id="1172" class="Comment">--     let h₁ = cong (perm xs) (sym (swap-rhs x y)) ; p y ⦂ perm xs x ≡ y</a>
<a id="1246" class="Comment">--         h₂ = cong (perm xs) (sym (swap-lhs x y)) ; p x ⦂ perm xs y ≡ x</a>
<a id="1320" class="Comment">--     in {!!}</a>

<a id="1336" class="Comment">--   foldr-perm : Perm → A</a>
<a id="1363" class="Comment">--   foldr-perm &lt; xs &gt; = foldr (uncurry f) b xs</a>
<a id="1411" class="Comment">--   foldr-perm (eq x y e i) = lemma x y e i</a>
<a id="1456" class="Comment">--     where</a>
<a id="1469" class="Comment">--     lemma : ∀ x y </a>
<a id="1491" class="Comment">--           → (∀ n → perm x n ≡ perm y n)</a>
<a id="1534" class="Comment">--           → foldr (uncurry f) b x ≡ foldr (uncurry f) b y</a>
<a id="1595" class="Comment">--     lemma [] [] q = refl</a>
<a id="1623" class="Comment">--     lemma [] (x ∷ xs) q = {!!}</a>
<a id="1657" class="Comment">--     lemma (x ∷ x₁) [] q = {!!}</a>
<a id="1691" class="Comment">--     lemma (x ∷ x₁) (x₂ ∷ y) q = {!!}</a>

<a id="1732" class="Comment">-- -- open import Data.List.Syntax</a>

<a id="1768" class="Comment">-- -- _ : perm ( (1 , 2) ∷  (2 , 3) ∷ []) 1 ≡ 3</a>
<a id="1816" class="Comment">-- -- _ = refl</a>
</pre></body></html>