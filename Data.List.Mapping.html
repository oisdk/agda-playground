<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.List.Mapping</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--cubical</a> <a id="23" class="Pragma">--safe</a> <a id="30" class="Pragma">--postfix-projections</a> <a id="52" class="Symbol">#-}</a>

<a id="57" class="Keyword">open</a> <a id="62" class="Keyword">import</a> <a id="69" href="Prelude.html" class="Module">Prelude</a>
<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Relation.Binary.html" class="Module">Relation.Binary</a>

<a id="106" class="Keyword">module</a> <a id="113" href="Data.List.Mapping.html" class="Module">Data.List.Mapping</a> <a id="131" class="Symbol">{</a><a id="132" href="Data.List.Mapping.html#132" class="Bound">k</a><a id="133" class="Symbol">}</a> <a id="135" class="Symbol">{</a><a id="136" href="Data.List.Mapping.html#136" class="Bound">K</a> <a id="138" class="Symbol">:</a> <a id="140" href="Level.html#192" class="Function">Type</a> <a id="145" href="Data.List.Mapping.html#132" class="Bound">k</a><a id="146" class="Symbol">}</a> <a id="148" class="Symbol">{</a><a id="149" href="Data.List.Mapping.html#149" class="Bound">r₁</a> <a id="152" href="Data.List.Mapping.html#152" class="Bound">r₂</a><a id="154" class="Symbol">}</a> <a id="156" class="Symbol">(</a><a id="157" href="Data.List.Mapping.html#157" class="Bound">totalOrder</a> <a id="168" class="Symbol">:</a> <a id="170" href="Relation.Binary.html#2348" class="Record">TotalOrder</a> <a id="181" href="Data.List.Mapping.html#136" class="Bound">K</a> <a id="183" href="Data.List.Mapping.html#149" class="Bound">r₁</a> <a id="186" href="Data.List.Mapping.html#152" class="Bound">r₂</a><a id="188" class="Symbol">)</a> <a id="190" class="Keyword">where</a>

<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Relation.Binary.Construct.LowerBound.html" class="Module">Relation.Binary.Construct.LowerBound</a> <a id="246" href="Data.List.Mapping.html#157" class="Bound">totalOrder</a>
<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="278" class="Keyword">using</a> <a id="284" class="Symbol">(</a><a id="285" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="288" class="Symbol">)</a>
<a id="290" class="Keyword">open</a> <a id="295" href="Relation.Binary.html#2348" class="Module">TotalOrder</a> <a id="306" href="Data.List.Mapping.html#157" class="Bound">totalOrder</a> <a id="317" class="Keyword">using</a> <a id="323" class="Symbol">(</a>_&lt;?_<a id="328" class="Symbol">;</a> compare<a id="337" class="Symbol">;</a> InstOrdering<a id="351" class="Symbol">;</a> lt′<a id="356" class="Symbol">;</a> eq′<a id="361" class="Symbol">;</a> gt′<a id="366" class="Symbol">;</a> _&lt;_<a id="371" class="Symbol">;</a> compare′<a id="381" class="Symbol">;</a> total⇒isSet<a id="394" class="Symbol">;</a> irrefl<a id="402" class="Symbol">;</a> toInstOrd<a id="413" class="Symbol">)</a>
<a id="415" class="Keyword">open</a> <a id="420" href="Relation.Binary.html#2348" class="Module">TotalOrder</a> <a id="431" href="Relation.Binary.Construct.LowerBound.html#1841" class="Function">lb-ord</a> <a id="438" class="Keyword">using</a> <a id="444" class="Symbol">(</a>&lt;-trans<a id="452" class="Symbol">)</a> <a id="454" class="Keyword">renaming</a> <a id="463" class="Symbol">(</a>refl <a id="469" class="Symbol">to</a> &lt;-refl<a id="478" class="Symbol">)</a>
<a id="480" class="Comment">-- import Data.Empty.UniversePolymorphic as Poly</a>

<a id="530" class="Keyword">private</a>
  <a id="540" class="Keyword">variable</a>
    <a id="553" href="Data.List.Mapping.html#553" class="Generalizable">n</a> <a id="555" href="Data.List.Mapping.html#555" class="Generalizable">m</a> <a id="557" class="Symbol">:</a> <a id="559" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="565" href="Data.List.Mapping.html#565" class="Generalizable">v</a> <a id="567" class="Symbol">:</a> <a id="569" href="Agda.Primitive.html#423" class="Postulate">Level</a>
    <a id="579" href="Data.List.Mapping.html#579" class="Generalizable">Val</a> <a id="583" class="Symbol">:</a> <a id="585" href="Data.List.Mapping.html#136" class="Bound">K</a> <a id="587" class="Symbol">→</a> <a id="589" href="Level.html#192" class="Function">Type</a> <a id="594" href="Data.List.Mapping.html#565" class="Generalizable">v</a>

<a id="597" class="Keyword">infixr</a> <a id="604" class="Number">5</a> <a id="606" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">_≔_,_</a>
<a id="612" class="Keyword">data</a> <a id="MapFrom"></a><a id="617" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="625" class="Symbol">(</a><a id="626" href="Data.List.Mapping.html#626" class="Bound">lb</a> <a id="629" class="Symbol">:</a> <a id="631" href="Relation.Binary.Construct.LowerBound.html#345" class="Datatype">⌊∙⌋</a><a id="634" class="Symbol">)</a> <a id="636" class="Symbol">{</a><a id="637" href="Data.List.Mapping.html#637" class="Bound">v</a><a id="638" class="Symbol">}</a> <a id="640" class="Symbol">(</a><a id="641" href="Data.List.Mapping.html#641" class="Bound">Val</a> <a id="645" class="Symbol">:</a> <a id="647" href="Data.List.Mapping.html#136" class="Bound">K</a> <a id="649" class="Symbol">→</a> <a id="651" href="Level.html#192" class="Function">Type</a> <a id="656" href="Data.List.Mapping.html#637" class="Bound">v</a><a id="657" class="Symbol">)</a> <a id="659" class="Symbol">:</a> <a id="661" href="Level.html#192" class="Function">Type</a> <a id="666" class="Symbol">(</a><a id="667" href="Data.List.Mapping.html#132" class="Bound">k</a> <a id="669" href="Agda.Primitive.html#636" class="Primitive Operator">ℓ⊔</a> <a id="672" href="Data.List.Mapping.html#149" class="Bound">r₁</a> <a id="675" href="Agda.Primitive.html#636" class="Primitive Operator">ℓ⊔</a> <a id="678" href="Data.List.Mapping.html#637" class="Bound">v</a><a id="679" class="Symbol">)</a> <a id="681" class="Keyword">where</a>
  <a id="MapFrom.∅"></a><a id="689" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a> <a id="691" class="Symbol">:</a> <a id="693" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="701" href="Data.List.Mapping.html#626" class="Bound">lb</a> <a id="704" href="Data.List.Mapping.html#641" class="Bound">Val</a>
  <a id="MapFrom._≔_,_"></a><a id="710" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">_≔_,_</a> <a id="716" class="Symbol">:</a> <a id="718" class="Symbol">(</a><a id="719" href="Data.List.Mapping.html#719" class="Bound">key</a> <a id="723" class="Symbol">:</a> <a id="725" href="Data.List.Mapping.html#136" class="Bound">K</a><a id="726" class="Symbol">)</a> <a id="728" class="Symbol">→</a> <a id="730" class="Symbol">⦃</a> <a id="732" href="Data.List.Mapping.html#732" class="Bound">inBounds</a> <a id="741" class="Symbol">:</a> <a id="743" href="Data.List.Mapping.html#626" class="Bound">lb</a> <a id="746" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="749" href="Data.List.Mapping.html#719" class="Bound">key</a> <a id="753" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="755" class="Symbol">⦄</a> <a id="757" class="Symbol">→</a> <a id="759" class="Symbol">(</a><a id="760" href="Data.List.Mapping.html#760" class="Bound">val</a> <a id="764" class="Symbol">:</a> <a id="766" href="Data.List.Mapping.html#641" class="Bound">Val</a> <a id="770" href="Data.List.Mapping.html#719" class="Bound">key</a><a id="773" class="Symbol">)</a> <a id="775" class="Symbol">→</a> <a id="777" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="785" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="787" href="Data.List.Mapping.html#719" class="Bound">key</a> <a id="791" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a> <a id="793" href="Data.List.Mapping.html#641" class="Bound">Val</a> <a id="797" class="Symbol">→</a> <a id="799" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="807" href="Data.List.Mapping.html#626" class="Bound">lb</a> <a id="810" href="Data.List.Mapping.html#641" class="Bound">Val</a>

<a id="815" class="Keyword">private</a>
  <a id="825" class="Keyword">variable</a>
    <a id="838" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="841" class="Symbol">:</a> <a id="843" href="Relation.Binary.Construct.LowerBound.html#345" class="Datatype">⌊∙⌋</a>

<a id="weaken"></a><a id="848" href="Data.List.Mapping.html#848" class="Function">weaken</a> <a id="855" class="Symbol">:</a> <a id="857" class="Symbol">∀</a> <a id="859" class="Symbol">{</a><a id="860" href="Data.List.Mapping.html#860" class="Bound">x</a><a id="861" class="Symbol">}</a> <a id="863" class="Symbol">→</a> <a id="865" class="Symbol">⦃</a> <a id="867" href="Data.List.Mapping.html#867" class="Bound">_</a> <a id="869" class="Symbol">:</a> <a id="871" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="874" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="877" href="Data.List.Mapping.html#860" class="Bound">x</a> <a id="879" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="881" class="Symbol">⦄</a> <a id="883" class="Symbol">→</a> <a id="885" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="893" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="895" href="Data.List.Mapping.html#860" class="Bound">x</a> <a id="897" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a> <a id="899" href="Data.List.Mapping.html#579" class="Generalizable">Val</a> <a id="903" class="Symbol">→</a> <a id="905" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="913" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="916" href="Data.List.Mapping.html#579" class="Generalizable">Val</a>
<a id="920" href="Data.List.Mapping.html#848" class="Function">weaken</a> <a id="927" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a> <a id="929" class="Symbol">=</a> <a id="931" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a>
<a id="933" href="Data.List.Mapping.html#848" class="Function">weaken</a> <a id="940" class="Symbol">{</a><a id="941" class="Argument">lb</a> <a id="944" class="Symbol">=</a> <a id="946" href="Data.List.Mapping.html#946" class="Bound">lb</a><a id="948" class="Symbol">}</a> <a id="950" class="Symbol">{</a><a id="951" class="Argument">x</a> <a id="953" class="Symbol">=</a> <a id="955" href="Data.List.Mapping.html#955" class="Bound">x</a><a id="956" class="Symbol">}</a> <a id="958" class="Symbol">(</a><a id="959" href="Data.List.Mapping.html#959" class="Bound">key</a> <a id="963" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="965" href="Data.List.Mapping.html#965" class="Bound">val</a> <a id="969" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="971" href="Data.List.Mapping.html#971" class="Bound">xs</a><a id="973" class="Symbol">)</a> <a id="975" class="Symbol">=</a> <a id="977" href="Data.List.Mapping.html#959" class="Bound">key</a> <a id="981" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="983" href="Data.List.Mapping.html#965" class="Bound">val</a> <a id="987" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="989" href="Data.List.Mapping.html#971" class="Bound">xs</a>
  <a id="994" class="Keyword">where</a>
    <a id="1004" class="Keyword">instance</a>
      <a id="1019" href="Data.List.Mapping.html#1019" class="Function">p</a> <a id="1021" class="Symbol">:</a> <a id="1023" href="Data.List.Mapping.html#946" class="Bound">lb</a> <a id="1026" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1029" href="Data.List.Mapping.html#959" class="Bound">key</a> <a id="1033" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a>
      <a id="1041" href="Data.List.Mapping.html#1019" class="Function">p</a> <a id="1043" class="Symbol">=</a> <a id="1045" href="Relation.Binary.html#2650" class="Function">&lt;-trans</a> <a id="1053" class="Symbol">{</a><a id="1054" class="Argument">x</a> <a id="1056" class="Symbol">=</a> <a id="1058" href="Data.List.Mapping.html#946" class="Bound">lb</a><a id="1060" class="Symbol">}</a> <a id="1062" class="Symbol">{</a><a id="1063" class="Argument">y</a> <a id="1065" class="Symbol">=</a> <a id="1067" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="1069" href="Data.List.Mapping.html#955" class="Bound">x</a> <a id="1071" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a><a id="1072" class="Symbol">}</a> <a id="1074" class="Symbol">{</a><a id="1075" class="Argument">z</a> <a id="1077" class="Symbol">=</a> <a id="1079" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="1081" href="Data.List.Mapping.html#959" class="Bound">key</a> <a id="1085" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a><a id="1086" class="Symbol">}</a> <a id="1088" href="Instance.html#79" class="Function">it</a> <a id="1091" href="Instance.html#79" class="Function">it</a>



<a id="1097" class="Keyword">module</a> <a id="1104" href="Data.List.Mapping.html#1104" class="Module">_</a> <a id="1106" class="Symbol">{</a><a id="1107" href="Data.List.Mapping.html#1107" class="Bound">v</a><a id="1108" class="Symbol">}</a> <a id="1110" class="Symbol">{</a><a id="1111" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1115" class="Symbol">:</a> <a id="1117" href="Data.List.Mapping.html#136" class="Bound">K</a> <a id="1119" class="Symbol">→</a> <a id="1121" href="Level.html#192" class="Function">Type</a> <a id="1126" href="Data.List.Mapping.html#1107" class="Bound">v</a><a id="1127" class="Symbol">}</a> <a id="1129" class="Keyword">where</a>
  <a id="1137" href="Data.List.Mapping.html#1137" class="Function">lookup</a> <a id="1144" class="Symbol">:</a> <a id="1146" class="Symbol">(</a><a id="1147" href="Data.List.Mapping.html#1147" class="Bound">key</a> <a id="1151" class="Symbol">:</a> <a id="1153" href="Data.List.Mapping.html#136" class="Bound">K</a><a id="1154" class="Symbol">)</a> <a id="1156" class="Symbol">⦃</a> <a id="1158" href="Data.List.Mapping.html#1158" class="Bound">inBounds</a> <a id="1167" class="Symbol">:</a> <a id="1169" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1172" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1175" href="Data.List.Mapping.html#1147" class="Bound">key</a> <a id="1179" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1181" class="Symbol">⦄</a> <a id="1183" class="Symbol">→</a> <a id="1185" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="1193" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1196" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1200" class="Symbol">→</a> <a id="1202" href="Data.Maybe.Base.html#91" class="Datatype">Maybe</a> <a id="1208" class="Symbol">(</a><a id="1209" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1213" href="Data.List.Mapping.html#1147" class="Bound">key</a><a id="1216" class="Symbol">)</a>
  <a id="1220" href="Data.List.Mapping.html#1137" class="Function">lookup</a> <a id="1227" href="Data.List.Mapping.html#1227" class="Bound">key</a> <a id="1231" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a> <a id="1233" class="Symbol">=</a> <a id="1235" href="Data.Maybe.Base.html#127" class="InductiveConstructor">nothing</a>
  <a id="1245" href="Data.List.Mapping.html#1137" class="Function">lookup</a> <a id="1252" href="Data.List.Mapping.html#1252" class="Bound">k₁</a> <a id="1255" class="Symbol">(</a><a id="1256" href="Data.List.Mapping.html#1256" class="Bound">k₂</a> <a id="1259" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1261" href="Data.List.Mapping.html#1261" class="Bound">v</a> <a id="1263" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1265" href="Data.List.Mapping.html#1265" class="Bound">xs</a><a id="1267" class="Symbol">)</a> <a id="1269" class="Keyword">with</a> <a id="1274" href="Relation.Binary.html#3423" class="Function">compare′</a> <a id="1283" href="Data.List.Mapping.html#1252" class="Bound">k₁</a> <a id="1286" href="Data.List.Mapping.html#1256" class="Bound">k₂</a>
  <a id="1291" class="Symbol">...</a> <a id="1295" class="Symbol">|</a> <a id="1297" href="Relation.Binary.html#3145" class="InductiveConstructor">lt′</a> <a id="1301" class="Symbol">=</a> <a id="1303" href="Data.Maybe.Base.html#127" class="InductiveConstructor">nothing</a>
  <a id="1313" class="Symbol">...</a> <a id="1317" class="Symbol">|</a> <a id="1319" href="Relation.Binary.html#3188" class="InductiveConstructor">eq′</a> <a id="1323" class="Symbol">=</a> <a id="1325" href="Data.Maybe.Base.html#148" class="InductiveConstructor">just</a> <a id="1330" class="Symbol">(</a><a id="1331" href="Cubical.Foundations.Prelude.html#6151" class="Function">subst</a> <a id="1337" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1341" class="Symbol">(</a><a id="1342" href="Cubical.Foundations.Id.html#713" class="Function">sym</a> <a id="1346" href="Instance.html#79" class="Function">it</a><a id="1348" class="Symbol">)</a> <a id="1350" class="Bound">v</a><a id="1351" class="Symbol">)</a>
  <a id="1355" class="Symbol">...</a> <a id="1359" class="Symbol">|</a> <a id="1361" href="Relation.Binary.html#3231" class="InductiveConstructor">gt′</a> <a id="1365" class="Symbol">=</a> <a id="1367" href="Data.List.Mapping.html#1137" class="Function">lookup</a> <a id="1374" class="Bound">k₁</a> <a id="1377" class="Bound">xs</a>

  <a id="1383" href="Data.List.Mapping.html#1383" class="Function">insert</a> <a id="1390" class="Symbol">:</a> <a id="1392" class="Symbol">(</a><a id="1393" href="Data.List.Mapping.html#1393" class="Bound">key</a> <a id="1397" class="Symbol">:</a> <a id="1399" href="Data.List.Mapping.html#136" class="Bound">K</a><a id="1400" class="Symbol">)</a> <a id="1402" class="Symbol">⦃</a> <a id="1404" href="Data.List.Mapping.html#1404" class="Bound">inBounds</a> <a id="1413" class="Symbol">:</a> <a id="1415" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1418" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1421" href="Data.List.Mapping.html#1393" class="Bound">key</a> <a id="1425" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1427" class="Symbol">⦄</a> <a id="1429" class="Symbol">→</a> <a id="1431" class="Symbol">(</a><a id="1432" href="Data.List.Mapping.html#1432" class="Bound">val</a> <a id="1436" class="Symbol">:</a> <a id="1438" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1442" href="Data.List.Mapping.html#1393" class="Bound">key</a><a id="1445" class="Symbol">)</a> <a id="1447" class="Symbol">→</a> <a id="1449" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="1457" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1460" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1464" class="Symbol">→</a> <a id="1466" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="1474" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1477" href="Data.List.Mapping.html#1111" class="Bound">Val</a>
  <a id="1483" href="Data.List.Mapping.html#1383" class="Function">insert</a> <a id="1490" href="Data.List.Mapping.html#1490" class="Bound">k₁</a> <a id="1493" href="Data.List.Mapping.html#1493" class="Bound">v₁</a> <a id="1496" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a> <a id="1498" class="Symbol">=</a> <a id="1500" href="Data.List.Mapping.html#1490" class="Bound">k₁</a> <a id="1503" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1505" href="Data.List.Mapping.html#1493" class="Bound">v₁</a> <a id="1508" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1510" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a>
  <a id="1514" href="Data.List.Mapping.html#1383" class="Function">insert</a> <a id="1521" href="Data.List.Mapping.html#1521" class="Bound">k₁</a> <a id="1524" href="Data.List.Mapping.html#1524" class="Bound">v₁</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Data.List.Mapping.html#1528" class="Bound">k₂</a> <a id="1531" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1533" href="Data.List.Mapping.html#1533" class="Bound">v₂</a> <a id="1536" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1538" href="Data.List.Mapping.html#1538" class="Bound">xs</a><a id="1540" class="Symbol">)</a> <a id="1542" class="Keyword">with</a> <a id="1547" href="Relation.Binary.html#3423" class="Function">compare′</a> <a id="1556" href="Data.List.Mapping.html#1521" class="Bound">k₁</a> <a id="1559" href="Data.List.Mapping.html#1528" class="Bound">k₂</a>
  <a id="1564" class="Symbol">...</a> <a id="1568" class="Symbol">|</a> <a id="1570" href="Relation.Binary.html#3145" class="InductiveConstructor">lt′</a> <a id="1574" class="Symbol">=</a> <a id="1576" class="Bound">k₁</a> <a id="1579" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1581" class="Bound">v₁</a> <a id="1584" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1586" class="Bound">k₂</a> <a id="1589" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1591" class="Bound">v₂</a> <a id="1594" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1596" class="Bound">xs</a>
  <a id="1601" class="Symbol">...</a> <a id="1605" class="Symbol">|</a> <a id="1607" href="Relation.Binary.html#3188" class="InductiveConstructor">eq′</a> <a id="1611" class="Symbol">=</a> <a id="1613" class="Bound">k₂</a> <a id="1616" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1618" href="Cubical.Foundations.Prelude.html#6151" class="Function">subst</a> <a id="1624" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1628" href="Instance.html#79" class="Function">it</a> <a id="1631" class="Bound">v₁</a> <a id="1634" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1636" class="Bound">xs</a>
  <a id="1641" class="Symbol">...</a> <a id="1645" class="Symbol">|</a> <a id="1647" href="Relation.Binary.html#3231" class="InductiveConstructor">gt′</a> <a id="1651" class="Symbol">=</a> <a id="1653" class="Bound">k₂</a> <a id="1656" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1658" class="Bound">v₂</a> <a id="1661" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1663" href="Data.List.Mapping.html#1383" class="Function">insert</a> <a id="1670" class="Bound">k₁</a> <a id="1673" class="Bound">v₁</a> <a id="1676" class="Bound">xs</a>

  <a id="1682" href="Data.List.Mapping.html#1682" class="Function">delete</a> <a id="1689" class="Symbol">:</a> <a id="1691" class="Symbol">(</a><a id="1692" href="Data.List.Mapping.html#1692" class="Bound">key</a> <a id="1696" class="Symbol">:</a> <a id="1698" href="Data.List.Mapping.html#136" class="Bound">K</a><a id="1699" class="Symbol">)</a> <a id="1701" class="Symbol">⦃</a> <a id="1703" href="Data.List.Mapping.html#1703" class="Bound">inBounds</a> <a id="1712" class="Symbol">:</a> <a id="1714" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1717" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1720" href="Data.List.Mapping.html#1692" class="Bound">key</a> <a id="1724" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1726" class="Symbol">⦄</a> <a id="1728" class="Symbol">→</a> <a id="1730" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="1738" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1741" href="Data.List.Mapping.html#1111" class="Bound">Val</a> <a id="1745" class="Symbol">→</a> <a id="1747" href="Data.List.Mapping.html#617" class="Datatype">MapFrom</a> <a id="1755" href="Data.List.Mapping.html#838" class="Generalizable">lb</a> <a id="1758" href="Data.List.Mapping.html#1111" class="Bound">Val</a>
  <a id="1764" href="Data.List.Mapping.html#1682" class="Function">delete</a> <a id="1771" href="Data.List.Mapping.html#1771" class="Bound">k₁</a> <a id="1774" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a> <a id="1776" class="Symbol">=</a> <a id="1778" href="Data.List.Mapping.html#689" class="InductiveConstructor">∅</a>
  <a id="1782" href="Data.List.Mapping.html#1682" class="Function">delete</a> <a id="1789" href="Data.List.Mapping.html#1789" class="Bound">k₁</a> <a id="1792" class="Symbol">(</a><a id="1793" href="Data.List.Mapping.html#1793" class="Bound">k₂</a> <a id="1796" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1798" href="Data.List.Mapping.html#1798" class="Bound">v₂</a> <a id="1801" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1803" href="Data.List.Mapping.html#1803" class="Bound">xs</a><a id="1805" class="Symbol">)</a> <a id="1807" class="Keyword">with</a> <a id="1812" href="Relation.Binary.html#3423" class="Function">compare′</a> <a id="1821" href="Data.List.Mapping.html#1789" class="Bound">k₁</a> <a id="1824" href="Data.List.Mapping.html#1793" class="Bound">k₂</a>
  <a id="1829" class="Symbol">...</a> <a id="1833" class="Symbol">|</a> <a id="1835" href="Relation.Binary.html#3145" class="InductiveConstructor">lt′</a> <a id="1839" class="Symbol">=</a> <a id="1841" class="Bound">k₂</a> <a id="1844" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1846" class="Bound">v₂</a> <a id="1849" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1851" class="Bound">xs</a>
  <a id="1856" class="Symbol">...</a> <a id="1860" class="Symbol">|</a> <a id="1862" href="Relation.Binary.html#3188" class="InductiveConstructor">eq′</a> <a id="1866" class="Symbol">=</a> <a id="1868" href="Data.List.Mapping.html#848" class="Function">weaken</a> <a id="1875" class="Bound">xs</a>
  <a id="1880" class="Symbol">...</a> <a id="1884" class="Symbol">|</a> <a id="1886" href="Relation.Binary.html#3231" class="InductiveConstructor">gt′</a> <a id="1890" class="Symbol">=</a> <a id="1892" class="Bound">k₂</a> <a id="1895" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">≔</a> <a id="1897" class="Bound">v₂</a> <a id="1900" href="Data.List.Mapping.html#710" class="InductiveConstructor Operator">,</a> <a id="1902" href="Data.List.Mapping.html#1682" class="Function">delete</a> <a id="1909" class="Bound">k₁</a> <a id="1912" class="Bound">xs</a>


  <a id="1919" class="Keyword">open</a> <a id="1924" class="Keyword">import</a> <a id="1931" href="Lens.html" class="Module">Lens</a>
  <a id="1938" class="Keyword">open</a> <a id="1943" class="Keyword">import</a> <a id="1950" href="Lens.Operators.html" class="Module">Lens.Operators</a>

<a id="1966" class="Comment">--   lookup-delete : (key : K) ⦃ inBounds : lb &lt;⌊ key ⌋ ⦄ → (xs : MapFrom lb Val) → lookup key (delete key xs) ≡ nothing</a>
<a id="2087" class="Comment">--   lookup-delete _ ∅ = refl</a>
<a id="2117" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) with compare′ k₁ k₂ | inspect (compare′ k₁) k₂</a>
<a id="2200" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | lt′ | 〖 p 〗 = {!!}</a>
<a id="2257" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | eq′ | p = {!!}</a>
<a id="2310" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | gt′ | p = {!!}</a>


<a id="2365" class="Comment">--   ! : (key : K) → ⦃ inBounds : lb &lt;⌊ key ⌋ ⦄ → Lens (MapFrom lb Val) (Maybe (Val key))</a>
<a id="2455" class="Comment">--   ! key .into xs .get = lookup key xs</a>
<a id="2496" class="Comment">--   ! key .into xs .set (just v) = insert key v xs</a>
<a id="2548" class="Comment">--   ! key .into xs .set nothing  = delete key xs</a>
<a id="2598" class="Comment">--   ! key .get-set s nothing  = {!!}</a>
<a id="2636" class="Comment">--   ! key .get-set s (just x) = {!!}</a>
<a id="2674" class="Comment">--   ! key .set-get s = {!!}</a>
<a id="2703" class="Comment">--   ! key .set-set s v₁ v₂ = {!!}</a>


<a id="2740" class="Comment">-- -- module _ {v} {Val : K → Type v} where</a>
<a id="2784" class="Comment">-- --  mutual</a>
<a id="2798" class="Comment">-- --   viewSing : (k₁ k₂ : K) ⦃ inBounds₁ : lb &lt;⌊ k₁ ⌋ ⦄ ⦃ inBounds₂ : lb &lt;⌊ k₂ ⌋ ⦄ →</a>
<a id="2885" class="Comment">-- --             (val : Val k₂) →</a>
<a id="2920" class="Comment">-- --             (xs : MapFrom ⌊ k₂ ⌋ Val) →</a>
<a id="2966" class="Comment">-- --             InstOrdering k₁ k₂ →</a>
<a id="3005" class="Comment">-- --             LensPart (MapFrom lb Val) (Maybe (Val k₁))</a>
<a id="3066" class="Comment">-- --   viewSing k₁ k₂ val xs lt′ .get = nothing</a>
<a id="3115" class="Comment">-- --   viewSing k₁ k₂ val xs lt′ .set nothing = k₂ ≔ val , xs</a>
<a id="3178" class="Comment">-- --   viewSing k₁ k₂ val xs lt′ .set (just x) = k₁ ≔ x , k₂ ≔ val , xs</a>
<a id="3251" class="Comment">-- --   viewSing k₁ k₂ val xs eq′ .get = just (subst Val (sym it) val)</a>
<a id="3322" class="Comment">-- --   viewSing k₁ k₂ val xs eq′ .set nothing = weaken xs</a>
<a id="3381" class="Comment">-- --   viewSing k₁ k₂ val xs eq′ .set (just x) = k₂ ≔ (subst Val it x) , xs</a>
<a id="3458" class="Comment">-- --   viewSing k₁ k₂ val xs gt′ = map-lens-part (view k₁ xs) (k₂ ≔ val ,_)</a>

<a id="3536" class="Comment">-- --   view : (key : K) → ⦃ inBounds : lb &lt;⌊ key ⌋ ⦄ → MapFrom lb Val → LensPart (MapFrom lb Val) (Maybe (Val key))</a>
<a id="3653" class="Comment">-- --   view k₁ ∅ .get = nothing</a>
<a id="3686" class="Comment">-- --   view k₁ ∅ .set nothing = ∅</a>
<a id="3721" class="Comment">-- --   view k₁ ∅ .set (just x) = k₁ ≔ x , ∅</a>
<a id="3766" class="Comment">-- --   view k₁ (k₂ ≔ v , xs) = viewSing k₁ k₂ v xs (compare′ k₁ k₂)</a>

<a id="3836" class="Comment">-- -- open import Cubical.Foundations.Prelude using (substRefl)</a>
<a id="3900" class="Comment">-- -- open import Path.Reasoning</a>


<a id="3935" class="Comment">-- -- -- module _ {v} {Val : K → Type v} where</a>
<a id="3982" class="Comment">-- -- --   view-get-set : (key : K) (s : MapFrom lb Val) (v : Maybe (Val key)) → ⦃ _ : lb &lt;⌊ key ⌋ ⦄ → view key (view key s .set v) .get ≡ v</a>
<a id="4123" class="Comment">-- -- --   view-get-set k₁ ∅ nothing = refl</a>
<a id="4167" class="Comment">-- -- --   view-get-set k₁ ∅ (just x) with compare k₁ k₁</a>
<a id="4224" class="Comment">-- -- --   view-get-set k₁ ∅ (just x) | lt p = ⊥-elim (irrefl p refl)</a>
<a id="4294" class="Comment">-- -- --   view-get-set k₁ ∅ (just x) | eq _ = cong just (cong (λ p → subst Val p x) (total⇒isSet  _ _ _ _) ; substRefl {B = Val} x)</a>
<a id="4427" class="Comment">-- -- --   view-get-set k₁ ∅ (just x) | gt p = ⊥-elim (irrefl p refl)</a>

<a id="4498" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) v with compare′ k₁ k₂ | inspect (compare′ k₁) k₂</a>
<a id="4589" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | lt′ | 〖 q 〗 = cong (get ∘ viewSing k₁ k₂ val s) q</a>
<a id="4692" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | lt′ | _ = {!!}</a>
<a id="4760" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | eq′ | _ = {!!}</a>
<a id="4828" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | eq′ | _ = {!!}</a>
<a id="4896" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | gt′ | _ = {!!}</a>
<a id="4964" class="Comment">-- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | gt′ | 〖 q 〗 =</a>
<a id="5031" class="Comment">-- --   --   viewSing k₁ k₂ val (set (view k₁ s) (just v)) (compare′ k₁ k₂) .get ≡⟨ cong (get ∘ viewSing k₁ k₂ val (set (view k₁ s) (just v))) q ⟩</a>
<a id="5178" class="Comment">-- --   --   viewSing k₁ k₂ val (set (view k₁ s) (just v)) gt′  .get ≡⟨ {!!} ⟩</a>
<a id="5257" class="Comment">-- --   --   just v ∎</a>


</pre></body></html>