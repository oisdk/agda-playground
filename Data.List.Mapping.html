<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.List.Mapping</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--cubical</a> <a id="23" class="Pragma">--safe</a> <a id="30" class="Pragma">--postfix-projections</a> <a id="52" class="Symbol">#-}</a>

<a id="57" class="Keyword">open</a> <a id="62" class="Keyword">import</a> <a id="69" href="Prelude.html" class="Module">Prelude</a>
<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Relation.Binary.html" class="Module">Relation.Binary</a>

<a id="106" class="Keyword">module</a> <a id="113" href="Data.List.Mapping.html" class="Module">Data.List.Mapping</a> <a id="131" class="Symbol">{</a><a id="132" href="Data.List.Mapping.html#132" class="Bound">kℓ</a><a id="134" class="Symbol">}</a> <a id="136" class="Symbol">{</a><a id="137" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="139" class="Symbol">:</a> <a id="141" href="Level.html#192" class="Function">Type</a> <a id="146" href="Data.List.Mapping.html#132" class="Bound">kℓ</a><a id="148" class="Symbol">}</a> <a id="150" class="Symbol">{</a><a id="151" href="Data.List.Mapping.html#151" class="Bound">r₁</a> <a id="154" href="Data.List.Mapping.html#154" class="Bound">r₂</a><a id="156" class="Symbol">}</a> <a id="158" class="Symbol">(</a><a id="159" href="Data.List.Mapping.html#159" class="Bound">totalOrder</a> <a id="170" class="Symbol">:</a> <a id="172" href="Relation.Binary.html#2507" class="Record">TotalOrder</a> <a id="183" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="185" href="Data.List.Mapping.html#151" class="Bound">r₁</a> <a id="188" href="Data.List.Mapping.html#154" class="Bound">r₂</a><a id="190" class="Symbol">)</a> <a id="192" class="Keyword">where</a>

<a id="199" class="Keyword">open</a> <a id="204" class="Keyword">import</a> <a id="211" href="Relation.Binary.Construct.Decision.html" class="Module">Relation.Binary.Construct.Decision</a> <a id="246" href="Data.List.Mapping.html#159" class="Bound">totalOrder</a>
<a id="257" class="Keyword">open</a> <a id="262" class="Keyword">import</a> <a id="269" href="Relation.Binary.Construct.LowerBound.html" class="Module">Relation.Binary.Construct.LowerBound</a> <a id="306" href="Relation.Binary.Construct.Decision.html#1096" class="Function">dec-ord</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="335" class="Keyword">using</a> <a id="341" class="Symbol">(</a><a id="342" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+_</a><a id="345" class="Symbol">)</a>
<a id="347" class="Keyword">open</a> <a id="352" href="Relation.Binary.html#2507" class="Module">TotalOrder</a> <a id="363" href="Relation.Binary.Construct.Decision.html#1096" class="Function">dec-ord</a> <a id="371" class="Keyword">using</a> <a id="377" class="Symbol">(</a>_&lt;?_<a id="382" class="Symbol">;</a> compare<a id="391" class="Symbol">;</a> _&lt;_<a id="396" class="Symbol">;</a> total⇒isSet<a id="409" class="Symbol">;</a> irrefl<a id="417" class="Symbol">;</a> comparing_∙_|&lt;_|≡_|&gt;_<a id="440" class="Symbol">;</a> compare′<a id="450" class="Symbol">;</a> compared<a id="460" class="Symbol">)</a>
<a id="462" class="Keyword">open</a> <a id="467" href="Relation.Binary.html#2507" class="Module">TotalOrder</a> <a id="478" href="Relation.Binary.Construct.LowerBound.html#1841" class="Function">lb-ord</a> <a id="485" class="Keyword">using</a> <a id="491" class="Symbol">(</a>&lt;-trans<a id="499" class="Symbol">)</a> <a id="501" class="Keyword">renaming</a> <a id="510" class="Symbol">(</a>refl <a id="516" class="Symbol">to</a> &lt;-refl<a id="525" class="Symbol">)</a>
<a id="527" class="Keyword">import</a> <a id="534" href="Data.Unit.UniversePolymorphic.html" class="Module">Data.Unit.UniversePolymorphic</a> <a id="564" class="Symbol">as</a> <a id="567" class="Module">Poly</a>

<a id="573" class="Keyword">instance</a>
  <a id="top-inst"></a><a id="584" href="Data.List.Mapping.html#584" class="Function">top-inst</a> <a id="593" class="Symbol">:</a> <a id="595" href="Data.Unit.UniversePolymorphic.html#107" class="Record">Poly.⊤</a> <a id="602" class="Symbol">{</a><a id="603" href="Agda.Primitive.html#590" class="Primitive">ℓzero</a><a id="608" class="Symbol">}</a>
  <a id="612" href="Data.List.Mapping.html#584" class="Function">top-inst</a> <a id="621" class="Symbol">=</a> <a id="623" href="Data.Unit.UniversePolymorphic.html#140" class="InductiveConstructor">Poly.tt</a>

<a id="632" class="Keyword">private</a>
  <a id="642" class="Keyword">variable</a>
    <a id="655" href="Data.List.Mapping.html#655" class="Generalizable">n</a> <a id="657" href="Data.List.Mapping.html#657" class="Generalizable">m</a> <a id="659" class="Symbol">:</a> <a id="661" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
    <a id="667" href="Data.List.Mapping.html#667" class="Generalizable">v</a> <a id="669" class="Symbol">:</a> <a id="671" href="Agda.Primitive.html#423" class="Postulate">Level</a>
    <a id="681" href="Data.List.Mapping.html#681" class="Generalizable">Val</a> <a id="685" class="Symbol">:</a> <a id="687" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="689" class="Symbol">→</a> <a id="691" href="Level.html#192" class="Function">Type</a> <a id="696" href="Data.List.Mapping.html#667" class="Generalizable">v</a>

<a id="699" class="Keyword">infixr</a> <a id="706" class="Number">5</a> <a id="708" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">_≔_,_</a>
<a id="714" class="Keyword">data</a> <a id="MapFrom"></a><a id="719" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="727" class="Symbol">(</a><a id="728" href="Data.List.Mapping.html#728" class="Bound">lb</a> <a id="731" class="Symbol">:</a> <a id="733" href="Relation.Binary.Construct.LowerBound.html#345" class="Datatype">⌊∙⌋</a><a id="736" class="Symbol">)</a> <a id="738" class="Symbol">{</a><a id="739" href="Data.List.Mapping.html#739" class="Bound">v</a><a id="740" class="Symbol">}</a> <a id="742" class="Symbol">(</a><a id="743" href="Data.List.Mapping.html#743" class="Bound">Val</a> <a id="747" class="Symbol">:</a> <a id="749" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="751" class="Symbol">→</a> <a id="753" href="Level.html#192" class="Function">Type</a> <a id="758" href="Data.List.Mapping.html#739" class="Bound">v</a><a id="759" class="Symbol">)</a> <a id="761" class="Symbol">:</a> <a id="763" href="Level.html#192" class="Function">Type</a> <a id="768" class="Symbol">(</a><a id="769" href="Data.List.Mapping.html#132" class="Bound">kℓ</a> <a id="772" href="Agda.Primitive.html#636" class="Primitive Operator">ℓ⊔</a> <a id="775" href="Data.List.Mapping.html#151" class="Bound">r₁</a> <a id="778" href="Agda.Primitive.html#636" class="Primitive Operator">ℓ⊔</a> <a id="781" href="Data.List.Mapping.html#739" class="Bound">v</a><a id="782" class="Symbol">)</a> <a id="784" class="Keyword">where</a>
  <a id="MapFrom.∅"></a><a id="792" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a> <a id="794" class="Symbol">:</a> <a id="796" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="804" href="Data.List.Mapping.html#728" class="Bound">lb</a> <a id="807" href="Data.List.Mapping.html#743" class="Bound">Val</a>
  <a id="MapFrom._≔_,_"></a><a id="813" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">_≔_,_</a> <a id="819" class="Symbol">:</a> <a id="821" class="Symbol">(</a><a id="822" href="Data.List.Mapping.html#822" class="Bound">k</a> <a id="824" class="Symbol">:</a> <a id="826" href="Data.List.Mapping.html#137" class="Bound">K</a><a id="827" class="Symbol">)</a> <a id="829" class="Symbol">→</a> <a id="831" class="Symbol">⦃</a> <a id="833" href="Data.List.Mapping.html#833" class="Bound">inBounds</a> <a id="842" class="Symbol">:</a> <a id="844" href="Data.List.Mapping.html#728" class="Bound">lb</a> <a id="847" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="850" href="Data.List.Mapping.html#822" class="Bound">k</a> <a id="852" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="854" class="Symbol">⦄</a> <a id="856" class="Symbol">→</a> <a id="858" class="Symbol">(</a><a id="859" href="Data.List.Mapping.html#859" class="Bound">v</a> <a id="861" class="Symbol">:</a> <a id="863" href="Data.List.Mapping.html#743" class="Bound">Val</a> <a id="867" href="Data.List.Mapping.html#822" class="Bound">k</a><a id="868" class="Symbol">)</a> <a id="870" class="Symbol">→</a> <a id="872" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="880" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="882" href="Data.List.Mapping.html#822" class="Bound">k</a> <a id="884" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a> <a id="886" href="Data.List.Mapping.html#743" class="Bound">Val</a> <a id="890" class="Symbol">→</a> <a id="892" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="900" href="Data.List.Mapping.html#728" class="Bound">lb</a> <a id="903" href="Data.List.Mapping.html#743" class="Bound">Val</a>

<a id="908" class="Keyword">private</a>
  <a id="918" class="Keyword">variable</a>
    <a id="931" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="934" class="Symbol">:</a> <a id="936" href="Relation.Binary.Construct.LowerBound.html#345" class="Datatype">⌊∙⌋</a>

<a id="weaken"></a><a id="941" href="Data.List.Mapping.html#941" class="Function">weaken</a> <a id="948" class="Symbol">:</a> <a id="950" class="Symbol">∀</a> <a id="952" class="Symbol">{</a><a id="953" href="Data.List.Mapping.html#953" class="Bound">x</a><a id="954" class="Symbol">}</a> <a id="956" class="Symbol">→</a> <a id="958" class="Symbol">⦃</a> <a id="960" href="Data.List.Mapping.html#960" class="Bound">_</a> <a id="962" class="Symbol">:</a> <a id="964" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="967" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="970" href="Data.List.Mapping.html#953" class="Bound">x</a> <a id="972" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="974" class="Symbol">⦄</a> <a id="976" class="Symbol">→</a> <a id="978" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="986" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="988" href="Data.List.Mapping.html#953" class="Bound">x</a> <a id="990" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a> <a id="992" href="Data.List.Mapping.html#681" class="Generalizable">Val</a> <a id="996" class="Symbol">→</a> <a id="998" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1006" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1009" href="Data.List.Mapping.html#681" class="Generalizable">Val</a>
<a id="1013" href="Data.List.Mapping.html#941" class="Function">weaken</a> <a id="1020" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a> <a id="1022" class="Symbol">=</a> <a id="1024" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a>
<a id="1026" href="Data.List.Mapping.html#941" class="Function">weaken</a> <a id="1033" class="Symbol">{</a><a id="1034" class="Argument">lb</a> <a id="1037" class="Symbol">=</a> <a id="1039" href="Data.List.Mapping.html#1039" class="Bound">lb</a><a id="1041" class="Symbol">}</a> <a id="1043" class="Symbol">{</a><a id="1044" class="Argument">x</a> <a id="1046" class="Symbol">=</a> <a id="1048" href="Data.List.Mapping.html#1048" class="Bound">x</a><a id="1049" class="Symbol">}</a> <a id="1051" class="Symbol">(</a><a id="1052" href="Data.List.Mapping.html#1052" class="Bound">k</a> <a id="1054" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1056" href="Data.List.Mapping.html#1056" class="Bound">val</a> <a id="1060" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1062" href="Data.List.Mapping.html#1062" class="Bound">xs</a><a id="1064" class="Symbol">)</a> <a id="1066" class="Symbol">=</a> <a id="1068" href="Data.List.Mapping.html#1052" class="Bound">k</a> <a id="1070" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1072" href="Data.List.Mapping.html#1056" class="Bound">val</a> <a id="1076" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1078" href="Data.List.Mapping.html#1062" class="Bound">xs</a>
  <a id="1083" class="Keyword">where</a>
    <a id="1093" class="Keyword">instance</a>
      <a id="1108" href="Data.List.Mapping.html#1108" class="Function">p</a> <a id="1110" class="Symbol">:</a> <a id="1112" href="Data.List.Mapping.html#1039" class="Bound">lb</a> <a id="1115" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1118" href="Data.List.Mapping.html#1052" class="Bound">k</a> <a id="1120" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a>
      <a id="1128" href="Data.List.Mapping.html#1108" class="Function">p</a> <a id="1130" class="Symbol">=</a> <a id="1132" href="Relation.Binary.html#2809" class="Function">&lt;-trans</a> <a id="1140" class="Symbol">{</a><a id="1141" class="Argument">x</a> <a id="1143" class="Symbol">=</a> <a id="1145" href="Data.List.Mapping.html#1039" class="Bound">lb</a><a id="1147" class="Symbol">}</a> <a id="1149" class="Symbol">{</a><a id="1150" class="Argument">y</a> <a id="1152" class="Symbol">=</a> <a id="1154" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="1156" href="Data.List.Mapping.html#1048" class="Bound">x</a> <a id="1158" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a><a id="1159" class="Symbol">}</a> <a id="1161" class="Symbol">{</a><a id="1162" class="Argument">z</a> <a id="1164" class="Symbol">=</a> <a id="1166" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌊</a> <a id="1168" href="Data.List.Mapping.html#1052" class="Bound">k</a> <a id="1170" href="Relation.Binary.Construct.LowerBound.html#378" class="InductiveConstructor Operator">⌋</a><a id="1171" class="Symbol">}</a> <a id="1173" href="Instance.html#79" class="Function">it</a> <a id="1176" href="Instance.html#79" class="Function">it</a>

<a id="1180" class="Keyword">module</a> <a id="1187" href="Data.List.Mapping.html#1187" class="Module">_</a> <a id="1189" class="Symbol">{</a><a id="1190" href="Data.List.Mapping.html#1190" class="Bound">v</a><a id="1191" class="Symbol">}</a> <a id="1193" class="Symbol">{</a><a id="1194" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1198" class="Symbol">:</a> <a id="1200" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="1202" class="Symbol">→</a> <a id="1204" href="Level.html#192" class="Function">Type</a> <a id="1209" href="Data.List.Mapping.html#1190" class="Bound">v</a><a id="1210" class="Symbol">}</a> <a id="1212" class="Keyword">where</a>
  <a id="1220" href="Data.List.Mapping.html#1220" class="Function">lookup</a> <a id="1227" class="Symbol">:</a> <a id="1229" class="Symbol">(</a><a id="1230" href="Data.List.Mapping.html#1230" class="Bound">k</a> <a id="1232" class="Symbol">:</a> <a id="1234" href="Data.List.Mapping.html#137" class="Bound">K</a><a id="1235" class="Symbol">)</a> <a id="1237" class="Symbol">⦃</a> <a id="1239" href="Data.List.Mapping.html#1239" class="Bound">inBounds</a> <a id="1248" class="Symbol">:</a> <a id="1250" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1253" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1256" href="Data.List.Mapping.html#1230" class="Bound">k</a> <a id="1258" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1260" class="Symbol">⦄</a> <a id="1262" class="Symbol">→</a> <a id="1264" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1272" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1275" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1279" class="Symbol">→</a> <a id="1281" href="Data.Maybe.Base.html#91" class="Datatype">Maybe</a> <a id="1287" class="Symbol">(</a><a id="1288" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1292" href="Data.List.Mapping.html#1230" class="Bound">k</a><a id="1293" class="Symbol">)</a>
  <a id="1297" href="Data.List.Mapping.html#1220" class="Function">lookup</a> <a id="1304" href="Data.List.Mapping.html#1304" class="Bound">k</a> <a id="1306" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a> <a id="1308" class="Symbol">=</a> <a id="1310" href="Data.Maybe.Base.html#127" class="InductiveConstructor">nothing</a>
  <a id="1320" href="Data.List.Mapping.html#1220" class="Function">lookup</a> <a id="1327" href="Data.List.Mapping.html#1327" class="Bound">k₁</a> <a id="1330" class="Symbol">(</a><a id="1331" href="Data.List.Mapping.html#1331" class="Bound">k₂</a> <a id="1334" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1336" href="Data.List.Mapping.html#1336" class="Bound">v</a> <a id="1338" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1340" href="Data.List.Mapping.html#1340" class="Bound">xs</a><a id="1342" class="Symbol">)</a> <a id="1344" class="Symbol">=</a> <a id="1346" href="Relation.Binary.html#3596" class="Function Operator">comparing</a> <a id="1356" href="Data.List.Mapping.html#1327" class="Bound">k₁</a> <a id="1359" href="Relation.Binary.html#3596" class="Function Operator">∙</a> <a id="1361" href="Data.List.Mapping.html#1331" class="Bound">k₂</a>
     <a id="1369" href="Relation.Binary.html#3596" class="Function Operator">|&lt;</a> <a id="1372" href="Data.Maybe.Base.html#127" class="InductiveConstructor">nothing</a>
     <a id="1385" href="Relation.Binary.html#3596" class="Function Operator">|≡</a> <a id="1388" href="Data.Maybe.Base.html#148" class="InductiveConstructor">just</a> <a id="1393" class="Symbol">(</a><a id="1394" href="Cubical.Foundations.Prelude.html#6151" class="Function">subst</a> <a id="1400" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1404" class="Symbol">(</a><a id="1405" href="Cubical.Foundations.Id.html#713" class="Function">sym</a> <a id="1409" href="Instance.html#79" class="Function">it</a><a id="1411" class="Symbol">)</a> <a id="1413" href="Data.List.Mapping.html#1336" class="Bound">v</a><a id="1414" class="Symbol">)</a>
     <a id="1421" href="Relation.Binary.html#3596" class="Function Operator">|&gt;</a> <a id="1424" href="Data.List.Mapping.html#1220" class="Function">lookup</a> <a id="1431" href="Data.List.Mapping.html#1327" class="Bound">k₁</a> <a id="1434" href="Data.List.Mapping.html#1340" class="Bound">xs</a>

  <a id="1440" class="Keyword">infixl</a> <a id="1447" class="Number">4</a> <a id="1449" href="Data.List.Mapping.html#1220" class="Function">lookup</a>
  <a id="1458" class="Keyword">syntax</a> <a id="1465" href="Data.List.Mapping.html#1220" class="Function">lookup</a> <a id="1472" class="Bound">k</a> <a id="1474" class="Bound">xs</a> <a id="1477" class="Symbol">=</a> <a id="1479" class="Bound">xs</a> <a id="1482" class="Function">[</a> <a id="1484" class="Bound">k</a> <a id="1486" class="Function">]</a>

  <a id="1491" href="Data.List.Mapping.html#1491" class="Function">insert</a> <a id="1498" class="Symbol">:</a> <a id="1500" class="Symbol">(</a><a id="1501" href="Data.List.Mapping.html#1501" class="Bound">k</a> <a id="1503" class="Symbol">:</a> <a id="1505" href="Data.List.Mapping.html#137" class="Bound">K</a><a id="1506" class="Symbol">)</a> <a id="1508" class="Symbol">⦃</a> <a id="1510" href="Data.List.Mapping.html#1510" class="Bound">inBounds</a> <a id="1519" class="Symbol">:</a> <a id="1521" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1524" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1527" href="Data.List.Mapping.html#1501" class="Bound">k</a> <a id="1529" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1531" class="Symbol">⦄</a> <a id="1533" class="Symbol">→</a> <a id="1535" class="Symbol">(</a><a id="1536" href="Data.List.Mapping.html#1536" class="Bound">val</a> <a id="1540" class="Symbol">:</a> <a id="1542" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1546" href="Data.List.Mapping.html#1501" class="Bound">k</a><a id="1547" class="Symbol">)</a> <a id="1549" class="Symbol">→</a> <a id="1551" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1559" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1562" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1566" class="Symbol">→</a> <a id="1568" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1576" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1579" href="Data.List.Mapping.html#1194" class="Bound">Val</a>
  <a id="1585" href="Data.List.Mapping.html#1491" class="Function">insert</a> <a id="1592" href="Data.List.Mapping.html#1592" class="Bound">k₁</a> <a id="1595" href="Data.List.Mapping.html#1595" class="Bound">v₁</a> <a id="1598" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a> <a id="1600" class="Symbol">=</a> <a id="1602" href="Data.List.Mapping.html#1592" class="Bound">k₁</a> <a id="1605" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1607" href="Data.List.Mapping.html#1595" class="Bound">v₁</a> <a id="1610" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1612" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a>
  <a id="1616" href="Data.List.Mapping.html#1491" class="Function">insert</a> <a id="1623" href="Data.List.Mapping.html#1623" class="Bound">k₁</a> <a id="1626" href="Data.List.Mapping.html#1626" class="Bound">v₁</a> <a id="1629" class="Symbol">(</a><a id="1630" href="Data.List.Mapping.html#1630" class="Bound">k₂</a> <a id="1633" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1635" href="Data.List.Mapping.html#1635" class="Bound">v₂</a> <a id="1638" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1640" href="Data.List.Mapping.html#1640" class="Bound">xs</a><a id="1642" class="Symbol">)</a> <a id="1644" class="Symbol">=</a>
    <a id="1650" href="Relation.Binary.html#3596" class="Function Operator">comparing</a> <a id="1660" href="Data.List.Mapping.html#1623" class="Bound">k₁</a> <a id="1663" href="Relation.Binary.html#3596" class="Function Operator">∙</a> <a id="1665" href="Data.List.Mapping.html#1630" class="Bound">k₂</a>
      <a id="1674" href="Relation.Binary.html#3596" class="Function Operator">|&lt;</a> <a id="1677" href="Data.List.Mapping.html#1623" class="Bound">k₁</a> <a id="1680" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1682" href="Data.List.Mapping.html#1626" class="Bound">v₁</a> <a id="1685" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1687" href="Data.List.Mapping.html#1630" class="Bound">k₂</a> <a id="1690" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1692" href="Data.List.Mapping.html#1635" class="Bound">v₂</a> <a id="1695" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1697" href="Data.List.Mapping.html#1640" class="Bound">xs</a>
      <a id="1706" href="Relation.Binary.html#3596" class="Function Operator">|≡</a> <a id="1709" href="Data.List.Mapping.html#1630" class="Bound">k₂</a> <a id="1712" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1714" href="Cubical.Foundations.Prelude.html#6151" class="Function">subst</a> <a id="1720" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1724" href="Instance.html#79" class="Function">it</a> <a id="1727" href="Data.List.Mapping.html#1626" class="Bound">v₁</a> <a id="1730" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1732" href="Data.List.Mapping.html#1640" class="Bound">xs</a>
      <a id="1741" href="Relation.Binary.html#3596" class="Function Operator">|&gt;</a> <a id="1744" href="Data.List.Mapping.html#1630" class="Bound">k₂</a> <a id="1747" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1749" href="Data.List.Mapping.html#1635" class="Bound">v₂</a> <a id="1752" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1754" href="Data.List.Mapping.html#1491" class="Function">insert</a> <a id="1761" href="Data.List.Mapping.html#1623" class="Bound">k₁</a> <a id="1764" href="Data.List.Mapping.html#1626" class="Bound">v₁</a> <a id="1767" href="Data.List.Mapping.html#1640" class="Bound">xs</a>

  <a id="1773" class="Keyword">infixl</a> <a id="1780" class="Number">4</a> <a id="1782" href="Data.List.Mapping.html#1491" class="Function">insert</a>
  <a id="1791" class="Keyword">syntax</a> <a id="1798" href="Data.List.Mapping.html#1491" class="Function">insert</a> <a id="1805" class="Bound">k</a> <a id="1807" class="Bound">v</a> <a id="1809" class="Bound">xs</a> <a id="1812" class="Symbol">=</a> <a id="1814" class="Bound">xs</a> <a id="1817" class="Function">[</a> <a id="1819" class="Bound">k</a> <a id="1821" class="Function">]≔</a> <a id="1824" class="Bound">v</a>

  <a id="1829" href="Data.List.Mapping.html#1829" class="Function">delete</a> <a id="1836" class="Symbol">:</a> <a id="1838" class="Symbol">(</a><a id="1839" href="Data.List.Mapping.html#1839" class="Bound">k</a> <a id="1841" class="Symbol">:</a> <a id="1843" href="Data.List.Mapping.html#137" class="Bound">K</a><a id="1844" class="Symbol">)</a> <a id="1846" class="Symbol">⦃</a> <a id="1848" href="Data.List.Mapping.html#1848" class="Bound">inBounds</a> <a id="1857" class="Symbol">:</a> <a id="1859" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1862" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">&lt;⌊</a> <a id="1865" href="Data.List.Mapping.html#1839" class="Bound">k</a> <a id="1867" href="Relation.Binary.Construct.LowerBound.html#532" class="Function Operator">⌋</a> <a id="1869" class="Symbol">⦄</a> <a id="1871" class="Symbol">→</a> <a id="1873" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1881" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1884" href="Data.List.Mapping.html#1194" class="Bound">Val</a> <a id="1888" class="Symbol">→</a> <a id="1890" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="1898" href="Data.List.Mapping.html#931" class="Generalizable">lb</a> <a id="1901" href="Data.List.Mapping.html#1194" class="Bound">Val</a>
  <a id="1907" href="Data.List.Mapping.html#1829" class="Function">delete</a> <a id="1914" href="Data.List.Mapping.html#1914" class="Bound">k₁</a> <a id="1917" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a> <a id="1919" class="Symbol">=</a> <a id="1921" href="Data.List.Mapping.html#792" class="InductiveConstructor">∅</a>
  <a id="1925" href="Data.List.Mapping.html#1829" class="Function">delete</a> <a id="1932" href="Data.List.Mapping.html#1932" class="Bound">k₁</a> <a id="1935" class="Symbol">(</a><a id="1936" href="Data.List.Mapping.html#1936" class="Bound">k₂</a> <a id="1939" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1941" href="Data.List.Mapping.html#1941" class="Bound">v₂</a> <a id="1944" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1946" href="Data.List.Mapping.html#1946" class="Bound">xs</a><a id="1948" class="Symbol">)</a> <a id="1950" class="Symbol">=</a> <a id="1952" href="Relation.Binary.html#3596" class="Function Operator">comparing</a> <a id="1962" href="Data.List.Mapping.html#1932" class="Bound">k₁</a> <a id="1965" href="Relation.Binary.html#3596" class="Function Operator">∙</a> <a id="1967" href="Data.List.Mapping.html#1936" class="Bound">k₂</a>
      <a id="1976" href="Relation.Binary.html#3596" class="Function Operator">|&lt;</a> <a id="1979" href="Data.List.Mapping.html#1936" class="Bound">k₂</a> <a id="1982" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="1984" href="Data.List.Mapping.html#1941" class="Bound">v₂</a> <a id="1987" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="1989" href="Data.List.Mapping.html#1946" class="Bound">xs</a>
      <a id="1998" href="Relation.Binary.html#3596" class="Function Operator">|≡</a> <a id="2001" href="Data.List.Mapping.html#941" class="Function">weaken</a> <a id="2008" href="Data.List.Mapping.html#1946" class="Bound">xs</a>
      <a id="2017" href="Relation.Binary.html#3596" class="Function Operator">|&gt;</a> <a id="2020" href="Data.List.Mapping.html#1936" class="Bound">k₂</a> <a id="2023" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">≔</a> <a id="2025" href="Data.List.Mapping.html#1941" class="Bound">v₂</a> <a id="2028" href="Data.List.Mapping.html#813" class="InductiveConstructor Operator">,</a> <a id="2030" href="Data.List.Mapping.html#1829" class="Function">delete</a> <a id="2037" href="Data.List.Mapping.html#1932" class="Bound">k₁</a> <a id="2040" href="Data.List.Mapping.html#1946" class="Bound">xs</a>

  <a id="2046" class="Keyword">infixl</a> <a id="2053" class="Number">4</a> <a id="2055" href="Data.List.Mapping.html#1829" class="Function">delete</a>
  <a id="2064" class="Keyword">syntax</a> <a id="2071" href="Data.List.Mapping.html#1829" class="Function">delete</a> <a id="2078" class="Bound">k</a> <a id="2080" class="Bound">xs</a> <a id="2083" class="Symbol">=</a> <a id="2085" class="Bound">xs</a> <a id="2088" class="Function">[</a> <a id="2090" class="Bound">k</a> <a id="2092" class="Function">]∅</a>

<a id="2096" class="Keyword">infixr</a> <a id="2103" class="Number">0</a> <a id="2105" href="Data.List.Mapping.html#2109" class="Function">Map</a>
<a id="Map"></a><a id="2109" href="Data.List.Mapping.html#2109" class="Function">Map</a> <a id="2113" class="Symbol">:</a> <a id="2115" class="Symbol">∀</a> <a id="2117" class="Symbol">{</a><a id="2118" href="Data.List.Mapping.html#2118" class="Bound">v</a><a id="2119" class="Symbol">}</a> <a id="2121" class="Symbol">(</a><a id="2122" href="Data.List.Mapping.html#2122" class="Bound">Val</a> <a id="2126" class="Symbol">:</a> <a id="2128" href="Data.List.Mapping.html#137" class="Bound">K</a> <a id="2130" class="Symbol">→</a> <a id="2132" href="Level.html#192" class="Function">Type</a> <a id="2137" href="Data.List.Mapping.html#2118" class="Bound">v</a><a id="2138" class="Symbol">)</a> <a id="2140" class="Symbol">→</a> <a id="2142" href="Level.html#192" class="Function">Type</a> <a id="2147" class="Symbol">_</a>
<a id="2149" href="Data.List.Mapping.html#2109" class="Function">Map</a> <a id="2153" class="Symbol">=</a> <a id="2155" href="Data.List.Mapping.html#719" class="Datatype">MapFrom</a> <a id="2163" href="Relation.Binary.Construct.LowerBound.html#366" class="InductiveConstructor">⌊⊥⌋</a>

<a id="2168" class="Keyword">syntax</a> <a id="2175" href="Data.List.Mapping.html#2109" class="Function">Map</a> <a id="2179" class="Symbol">(λ</a> <a id="2182" class="Bound">s</a> <a id="2184" class="Symbol">→</a> <a id="2186" class="Bound">e</a><a id="2187" class="Symbol">)</a> <a id="2189" class="Symbol">=</a> <a id="2191" class="Bound">s</a> <a id="2193" class="Function">↦</a> <a id="2195" class="Bound">e</a>

<a id="Map′"></a><a id="2198" href="Data.List.Mapping.html#2198" class="Function">Map′</a> <a id="2203" class="Symbol">:</a> <a id="2205" class="Symbol">∀</a> <a id="2207" class="Symbol">{</a><a id="2208" href="Data.List.Mapping.html#2208" class="Bound">v</a><a id="2209" class="Symbol">}</a> <a id="2211" class="Symbol">(</a><a id="2212" href="Data.List.Mapping.html#2212" class="Bound">Val</a> <a id="2216" class="Symbol">:</a> <a id="2218" href="Level.html#192" class="Function">Type</a> <a id="2223" href="Data.List.Mapping.html#2208" class="Bound">v</a><a id="2224" class="Symbol">)</a> <a id="2226" class="Symbol">→</a> <a id="2228" href="Level.html#192" class="Function">Type</a> <a id="2233" class="Symbol">_</a>
<a id="2235" href="Data.List.Mapping.html#2198" class="Function">Map′</a> <a id="2240" href="Data.List.Mapping.html#2240" class="Bound">V</a> <a id="2242" class="Symbol">=</a> <a id="2244" href="Data.List.Mapping.html#2109" class="Function">Map</a> <a id="2248" class="Symbol">(</a><a id="2249" href="Function.html#512" class="Function">const</a> <a id="2255" href="Data.List.Mapping.html#2240" class="Bound">V</a><a id="2256" class="Symbol">)</a>


  <a id="2262" class="Comment">-- open import Lens</a>
  <a id="2284" class="Comment">-- open import Lens.Operators</a>

<a id="2315" class="Comment">--   lookup-delete : (k : K) ⦃ inBounds : lb &lt;⌊ k ⌋ ⦄ → (xs : MapFrom lb Val) → lookup k (delete k xs) ≡ nothing</a>
<a id="2428" class="Comment">--   lookup-delete _ ∅ = refl</a>
<a id="2458" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) with compare′ k₁ k₂ | inspect (compare′ k₁) k₂</a>
<a id="2541" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | lt′ | 〖 p 〗 = {!!}</a>
<a id="2598" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | eq′ | p = {!!}</a>
<a id="2651" class="Comment">--   lookup-delete k₁ (k₂ ≔ v , xs) | gt′ | p = {!!}</a>

<a id="2705" class="Comment">--   delete-delete : (k : K) → ⦃ inBounds : lb &lt;⌊ k ⌋ ⦄ → (xs : MapFrom lb Val) → delete k (delete k xs) ≡ delete k xs</a>
<a id="2824" class="Comment">--   delete-delete k₁ ∅ = refl</a>
<a id="2855" class="Comment">--   delete-delete k₁ (k₂ ≔ v , xs) with compare k₁ k₂ | inspect (compare k₁) k₂</a>
<a id="2936" class="Comment">--   delete-delete k₁ (k₂ ≔ v , xs) | lt q | 〖 p 〗 = {!!}</a>
<a id="2994" class="Comment">--   delete-delete k₁ (k₂ ≔ v , xs) | eq q | 〖 p 〗 = {!!}</a>
<a id="3052" class="Comment">--   delete-delete k₁ (k₂ ≔ v , xs) | gt q | 〖 p 〗 = {!!}</a>


<a id="3112" class="Comment">--   ! : (k : K) → ⦃ inBounds : lb &lt;⌊ k ⌋ ⦄ → Lens (MapFrom lb Val) (Maybe (Val k))</a>
<a id="3196" class="Comment">--   ! k .into xs .get = lookup k xs</a>
<a id="3233" class="Comment">--   ! k .into xs .set (just v) = insert k v xs</a>
<a id="3281" class="Comment">--   ! k .into xs .set nothing  = delete k xs</a>
<a id="3327" class="Comment">--   ! k .get-set s nothing  = {!!}</a>
<a id="3363" class="Comment">--   ! k .get-set s (just x) = {!!}</a>
<a id="3399" class="Comment">--   ! k .set-get s = {!!}</a>
<a id="3426" class="Comment">--   ! k .set-set s nothing nothing = {!!}</a>
<a id="3469" class="Comment">--   ! k .set-set s nothing (just x) = {!!}</a>
<a id="3513" class="Comment">--   ! k .set-set s (just x) nothing = {!!}</a>
<a id="3557" class="Comment">--   ! k .set-set s (just x) (just y) = {!!}</a>


<a id="3604" class="Comment">-- -- -- module _ {v} {Val : K → Type v} where</a>
<a id="3651" class="Comment">-- -- --  mutual</a>
<a id="3668" class="Comment">-- -- --   viewSing : (k₁ k₂ : K) ⦃ inBounds₁ : lb &lt;⌊ k₁ ⌋ ⦄ ⦃ inBounds₂ : lb &lt;⌊ k₂ ⌋ ⦄ →</a>
<a id="3758" class="Comment">-- -- --             (val : Val k₂) →</a>
<a id="3796" class="Comment">-- -- --             (xs : MapFrom ⌊ k₂ ⌋ Val) →</a>
<a id="3845" class="Comment">-- -- --             InstOrdering k₁ k₂ →</a>
<a id="3887" class="Comment">-- -- --             LensPart (MapFrom lb Val) (Maybe (Val k₁))</a>
<a id="3951" class="Comment">-- -- --   viewSing k₁ k₂ val xs lt′ .get = nothing</a>
<a id="4003" class="Comment">-- -- --   viewSing k₁ k₂ val xs lt′ .set nothing = k₂ ≔ val , xs</a>
<a id="4069" class="Comment">-- -- --   viewSing k₁ k₂ val xs lt′ .set (just x) = k₁ ≔ x , k₂ ≔ val , xs</a>
<a id="4145" class="Comment">-- -- --   viewSing k₁ k₂ val xs eq′ .get = just (subst Val (sym it) val)</a>
<a id="4219" class="Comment">-- -- --   viewSing k₁ k₂ val xs eq′ .set nothing = weaken xs</a>
<a id="4281" class="Comment">-- -- --   viewSing k₁ k₂ val xs eq′ .set (just x) = k₂ ≔ (subst Val it x) , xs</a>
<a id="4361" class="Comment">-- -- --   viewSing k₁ k₂ val xs gt′ = map-lens-part (view k₁ xs) (k₂ ≔ val ,_)</a>

<a id="4442" class="Comment">-- -- --   view : (k : K) → ⦃ inBounds : lb &lt;⌊ k ⌋ ⦄ → MapFrom lb Val → LensPart (MapFrom lb Val) (Maybe (Val k))</a>
<a id="4556" class="Comment">-- -- --   view k₁ ∅ .get = nothing</a>
<a id="4592" class="Comment">-- -- --   view k₁ ∅ .set nothing = ∅</a>
<a id="4630" class="Comment">-- -- --   view k₁ ∅ .set (just x) = k₁ ≔ x , ∅</a>
<a id="4678" class="Comment">-- -- --   view k₁ (k₂ ≔ v , xs) = viewSing k₁ k₂ v xs (compare′ k₁ k₂)</a>

<a id="4751" class="Comment">-- -- -- open import Cubical.Foundations.Prelude using (substRefl)</a>
<a id="4818" class="Comment">-- -- -- open import Path.Reasoning</a>


<a id="4856" class="Comment">-- -- -- -- module _ {v} {Val : K → Type v} where</a>
<a id="4906" class="Comment">-- -- -- --   view-get-set : (k : K) (s : MapFrom lb Val) (v : Maybe (Val k)) → ⦃ _ : lb &lt;⌊ k ⌋ ⦄ → view k (view k s .set v) .get ≡ v</a>
<a id="5040" class="Comment">-- -- -- --   view-get-set k₁ ∅ nothing = refl</a>
<a id="5087" class="Comment">-- -- -- --   view-get-set k₁ ∅ (just x) with compare k₁ k₁</a>
<a id="5147" class="Comment">-- -- -- --   view-get-set k₁ ∅ (just x) | lt p = ⊥-elim (irrefl p refl)</a>
<a id="5220" class="Comment">-- -- -- --   view-get-set k₁ ∅ (just x) | eq _ = cong just (cong (λ p → subst Val p x) (total⇒isSet  _ _ _ _) ; substRefl {B = Val} x)</a>
<a id="5356" class="Comment">-- -- -- --   view-get-set k₁ ∅ (just x) | gt p = ⊥-elim (irrefl p refl)</a>

<a id="5430" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) v with compare′ k₁ k₂ | inspect (compare′ k₁) k₂</a>
<a id="5524" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | lt′ | 〖 q 〗 = cong (get ∘ viewSing k₁ k₂ val s) q</a>
<a id="5630" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | lt′ | _ = {!!}</a>
<a id="5701" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | eq′ | _ = {!!}</a>
<a id="5772" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | eq′ | _ = {!!}</a>
<a id="5843" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) nothing  | gt′ | _ = {!!}</a>
<a id="5914" class="Comment">-- -- --   -- view-get-set k₁ (k₂ ≔ val , s) (just v) | gt′ | 〖 q 〗 =</a>
<a id="5984" class="Comment">-- -- --   --   viewSing k₁ k₂ val (set (view k₁ s) (just v)) (compare′ k₁ k₂) .get ≡⟨ cong (get ∘ viewSing k₁ k₂ val (set (view k₁ s) (just v))) q ⟩</a>
<a id="6134" class="Comment">-- -- --   --   viewSing k₁ k₂ val (set (view k₁ s) (just v)) gt′  .get ≡⟨ {!!} ⟩</a>
<a id="6216" class="Comment">-- -- --   --   just v ∎</a>


</pre></body></html>